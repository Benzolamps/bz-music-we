{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./node_modules/eel-wasm/dist/src/utils.js","webpack://[name]/./node_modules/eel-wasm/dist/src/shims.js","webpack://[name]/./node_modules/eel-wasm/dist/src/encoding.js","webpack://[name]/./node_modules/eel-wasm/dist/src/constants.js","webpack://[name]/./src/blankPreset.js","webpack://[name]/./node_modules/eel-wasm/dist/src/parser.js","webpack://[name]/./node_modules/eel-wasm/dist/src/errorUtils.js","webpack://[name]/./node_modules/eel-wasm/dist/src/compiler.js","webpack://[name]/./node_modules/eel-wasm/dist/src/wasmFunctions.js","webpack://[name]/./node_modules/eel-wasm/dist/src/index.js","webpack://[name]/./src/assemblyscript/presetFunctions.ts","webpack://[name]/./node_modules/ecma-proposal-math-extensions/reference-implementation/index.js","webpack://[name]/./src/presetBase.js","webpack://[name]/./node_modules/eel-wasm/dist/src/preProcessor.js","webpack://[name]/./node_modules/eel-wasm/dist/src/envParser.js","webpack://[name]/./node_modules/eel-wasm/dist/build/parser.js","webpack://[name]/(webpack)/buildin/module.js","webpack://[name]/./node_modules/process/browser.js","webpack://[name]/./node_modules/eel-wasm/dist/src/astUtils.js","webpack://[name]/./node_modules/eel-wasm/dist/src/emitter.js","webpack://[name]/./node_modules/eel-wasm/dist/src/ieee754.js","webpack://[name]/./node_modules/eel-wasm/dist/src/loader.js","webpack://[name]/./node_modules/@assemblyscript/loader/index.js","webpack://[name]/./src/audio/fft.js","webpack://[name]/./src/audio/audioProcessor.js","webpack://[name]/./src/audio/audioLevels.js","webpack://[name]/./src/utils.js","webpack://[name]/./src/equations/presetEquationRunner.js","webpack://[name]/./src/equations/presetEquationRunnerWASM.js","webpack://[name]/./src/rendering/shaders/shaderUtils.js","webpack://[name]/./src/rendering/waves/waveUtils.js","webpack://[name]/./src/rendering/waves/basicWaveform.js","webpack://[name]/./src/rendering/waves/customWaveform.js","webpack://[name]/./src/rendering/shapes/customShape.js","webpack://[name]/./src/rendering/sprites/border.js","webpack://[name]/./src/rendering/sprites/darkenCenter.js","webpack://[name]/./src/rendering/motionVectors/motionVectors.js","webpack://[name]/./src/rendering/shaders/warp.js","webpack://[name]/./src/rendering/shaders/comp.js","webpack://[name]/./src/rendering/shaders/output.js","webpack://[name]/./src/rendering/shaders/resample.js","webpack://[name]/./src/rendering/shaders/blur/blurVertical.js","webpack://[name]/./src/rendering/shaders/blur/blurHorizontal.js","webpack://[name]/./src/rendering/shaders/blur/blur.js","webpack://[name]/./src/noise/noise.js","webpack://[name]/./src/image/imageTextures.js","webpack://[name]/./src/rendering/text/titleText.js","webpack://[name]/./src/rendering/blendPattern.js","webpack://[name]/./src/rendering/renderer.js","webpack://[name]/./src/visualizer.js","webpack://[name]/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__read","this","iterator","e","ar","next","done","push","error","__spread","arguments","length","concat","arrayJoin","arr","joiner","newArr","flatten","forEach","subArr","apply","flattenTwice","times","cb","Array","fill","map","_","repeat","char","join","ScopedIdMap","_list","namespace","findIndex","_a","_b","k","size","formatList","list","Error","quoted","last","pop","shims","sin","Math","cos","tan","asin","acos","atan","atan2","rand","a","random","pow","log","log10","exp","sigmoid","x","y","abs","__importStar","mod","result","ieee754","utils_1","encodef64","num","Uint8Array","write","unsignedLEB128","buffer","byte","signedLEB128","bytes","ceil","log2","negative","more","MAGIC","WASM_VERSION","EPSILON","SECTION","TYPE","IMPORT","FUNC","MEMORY","GLOBAL","EXPORT","CODE","EXPORT_TYPE","TABLE","op","block","blockType","loop","retType","end","br_if","drop","select","local_get","local_set","local_tee","global_get","global_set","f64_load","align","offset","f64_store","i32_const","f64_const","i32_eqz","i32_ne","i32_lt_s","i32_lt_u","i32_gt_s","i32_le_s","i32_le_u","i32_ge_s","f64_eq","f64_ne","f64_lt","f64_gt","f64_le","f64_ge","i32_add","i32_sub","i32_mul","i32_and","i32_or","i64_rem_s","i64_and","i64_or","f64_abs","f64_neg","f64_ceil","f64_floor","f64_sqrt","f64_add","f64_sub","f64_mul","f64_div","f64_min","f64_max","i32_trunc_f64_s","i64_trunc_s_f64","f64_convert_i64_s","f64_convert_i32_s","VAL_TYPE","i32","i64","f32","f64","MUTABILITY","BLOCK","FUNCTION_TYPE","MEMORY_IDX","GLOBAL_TYPE","TYPE_IDX","IS_ZEROISH","IS_NOT_ZEROISH","encodeString","str","split","charCodeAt","encodeVector","data","encodeSection","type","subSections","MAX_LOOP_COUNT","BUFFER_SIZE","WASM_MEMORY_SIZE","baseVals","gammaadj","wave_g","mv_x","warpscale","brighten","mv_y","wave_scale","echo_alpha","additivewave","sx","sy","warp","red_blue","wave_mode","wave_brighten","wrap","zoomexp","fshader","wave_r","echo_zoom","wave_smoothing","warpanimspeed","wave_dots","wave_x","wave_y","zoom","solarize","modwavealphabyvolume","dx","cx","dy","darken_center","cy","invert","bmotionvectorson","rot","modwavealphaend","wave_mystery","decay","wave_a","wave_b","rating","modwavealphastart","darken","echo_orient","ib_r","ib_g","ib_b","ib_a","ib_size","ob_r","ob_g","ob_b","ob_a","ob_size","mv_dx","mv_dy","mv_a","mv_r","mv_g","mv_b","mv_l","init_eqs","frame_eqs","rkeys","treb_att","bass_att","pixel_eqs","rad","waves","enabled","b","g","scaling","samples","additive","usedots","spectrum","smoothing","thick","sep","point_eqs","shapes","r2","tex_ang","thickoutline","textured","g2","tex_zoom","border_a","border_b","b2","a2","border_g","ang","sides","border_r","comp","__assign","assign","preProcessor_1","envParser_1","astUtils_1","errorUtils_1","mapLoc","loc","mapper","first","getLoc","first_column","last_column","column","first_line","line","last_line","parse","code","preProcess","processedCode","ast","mapAst","node","createCompilerError","hash","createUserError","message","extendStatics","__extends","setPrototypeOf","__proto__","__","constructor","printLoc","rawSource","contextLines","firstIndex","max","lastIndex","annotatedLines","slice","lineNumber","padding","underline","insertIndex","splice","CompilerError","_super","_this","sourceContext","UserError","__importDefault","parser_1","emitter_1","encoding_1","shims_1","Utils","wasmFunctions_1","constants_1","compileModule","pools","funcs","functions","eelVersion","_c","preParsed","keys","includes","importedVars","entries","poolName","variableName","varResolver","functionImports","func","args","returns","localFuncOrder","moduleFuncs","pool","poolsList","body","localVariables","context","resolveVar","test","resolveLocal","resolveFunc","shimdex","localFuncMap","index","indexOf","binary","emit","exportName","localFuncs","getSignatureKey","types","typeIndexByKey","Map","getTypeIndex","typeIndex","has","set","imports","memories","globalCount","globals","xports","funcIndex","codes","localTypes","sqr","bor","band","sign","bitwiseOr","bitwiseAnd","div","_getBufferIndex","compiler_1","loader_1","loadModule","defineMath","assignment","configurable","writable","PI","f32A","Float32Array","inLow","inHigh","outLow","outHigh","Number","isNaN","NaN","Infinity","scale","lower","upper","min","degrees","DEG_PER_RAD","radians","RAD_PER_DEG","sqrt","val","LOG10E","xf","floor","randint","bnot","z","isFinite","bitor","bitand","equal","above","below","ifcond","memcpy","megabuf","dst","src","len","destOffset","srcOffset","copyLen","copyWithin","destCol","previousAnchor","srcCol","srcLine","anchor","remainingColumns","dest","lineStart","inlineComment","blockComment","emitAnchor","parserImpl","parser","v","$V0","$V1","$V2","$V3","$V4","$V5","$V6","$V7","$V8","$V9","$Va","$Vb","$Vc","$Vd","$Ve","$Vf","$Vg","$Vh","$Vi","$Vj","$Vk","$Vl","$Vm","$Vn","$Vo","$Vp","$Vq","$Vr","$Vs","$Vt","trace","yy","symbols_","terminals_","2","5","8","12","15","17","18","20","22","24","25","28","29","30","32","33","34","35","36","37","38","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","toLowerCase","callee","left","right","operator","table","3","4","6","9","11","16","19","21","23","26","27","31","1","7","10","13","14","defaultActions","parseError","recoverable","input","self","stack","vstack","lstack","recovering","TERROR","EOF","lexer","sharedState","setInput","yylloc","yyloc","ranges","options","getPrototypeOf","symbol","preErrorSymbol","state","action","newState","expected","lex","token","yyval","errStr","showPosition","text","match","range","_input","_more","_backtrack","matched","conditionStack","ch","unput","lines","substr","oldLines","reject","backtrack_lexer","less","pastInput","past","replace","upcomingInput","pre","test_match","indexed_rule","backup","matches","tempMatch","rules","_currentRules","flex","begin","condition","popState","conditions","topState","pushState","stateStackSize","yy_","$avoiding_name_collisions","YY_START","Parser","main","process","argv","webpackPolyfill","deprecate","paths","children","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","env","version","versions","on","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","CHILDREN","ASSIGNMENT_EXPRESSION","SCRIPT","EXPRESSION_BLOCK","UNARY_EXPRESSION","NUMBER_LITERAL","IDENTIFIER","CALL_EXPRESSION","BINARY_EXPRESSION","LOGICAL_EXPRESSION","newAst","child","orignalChild","newChild","orignalChildren","newChildren_1","originalChild","some","statement","emitExpressionBlock","functionName_1","argList_1","assertArity","arity","consiquent","alternate","emitConditional","expression","iterationCount","emitWhile","count","localIndex","emitLoop","emitAddMemoryOffset","variableIdentifier","resolvedName","invocation","startsWith","rightCode","mutationCode","operatorCode","undefined","getAssignmentOperatorMutation","bufferName","addOffset","unnormalizedIndex","rightValue_1","inBounds","rightValue","behavior","comparison","shortCircutValue","statements","mLen","eLen","nBytes","eMax","eBias","rt","LN2","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","fulfilled","step","rejected","then","__generator","f","label","sent","trys","ops","verb","TypeError","compilerPools","importObject","Set","WebAssembly","compile","instantiate","BIGINT","BigUint64Array","THIS","decoder","TextDecoder","getStringImpl","ptr","Uint32Array","Uint16Array","String","fromCharCode","decode","preInstantiate","extendedExports","getString","memory","abort","msg","file","colm","console","seed","Date","now","postInstantiate","instance","__new","__retain","__rtti_base","getArrayInfo","id","info","U32","getInfo","getBase","getValueAlign","clz32","getView","alignLog2","signed","float","Float64Array","Int8Array","Int16Array","Int32Array","BigInt64Array","__getArrayView","buf","subarray","getTypedArray","Type","getTypedArrayView","bufPtr","attachTypedArrayFunctions","ctor","__newString","U16","__getString","__newArray","values","view","__getArray","out","__getArrayBuffer","Uint8ClampedArray","BYTES_PER_ELEMENT","__instanceof","baseId","demangle","isResponse","Response","isModule","Module","async","source","instantiateStreaming","extended","arrayBuffer","setArgumentsLength","internalName","elem","parts","curr","part","shift","className","substring","classElem","thisValue","getOwnPropertyNames","getOwnPropertyDescriptor","setter","original","instantiateSync","Instance","FFT","samplesIn","samplesOut","equalize","NFREQ","initEqualizeTable","initBitRevTable","initCosSinTable","equalizeArr","invHalfNFREQ","bitrevtable","j","temp","dftsize","tabsize","cossintable","theta","timeToFrequencyDomain","waveDataIn","real","imag","idx","wpr","wpi","wr","wi","hdftsize","tempr","tempi","wtemp","spectralDataOut","AudioProcessor","numSamps","fftSize","fft","audioContext","audible","createDelay","analyser","createAnalyser","smoothingTimeConstant","connect","analyserL","analyserR","splitter","createChannelSplitter","timeByteArray","timeByteArrayL","timeByteArrayR","timeArray","timeByteArraySignedL","timeByteArraySignedR","tempTimeArrayL","tempTimeArrayR","timeArrayL","timeArrayR","sampleAudio","getByteTimeDomainData","processAudio","updateAudio","lastIdx","freqArray","freqArrayL","freqArrayR","connectAudio","audionode","disconnectAudio","disconnect","AudioLevels","audio","sampleRate","bucketHz","bassLow","clamp","round","bassHigh","midHigh","trebHigh","starts","stops","imm","att","avg","longAvg","rate","baseFPS","FPS","updateAudioLevels","fps","frame","effectiveFPS","isFiniteNumber","adjustRateToFPS","vars","start","from","obj","newObj","wasmGlobals","PresetEquationRunner","preset","globalVars","opts","texsizeX","texsizeY","mesh_width","mesh_height","aspectx","aspecty","invAspectx","invAspecty","qs","ts","regs","initializeEquations","runVertEQs","mdVSQInit","mdVSRegs","mdVSFrame","mdVSUserKeys","mdVSFrameMap","mdVSShapes","mdVSUserKeysShapes","mdVSFrameMapShapes","mdVSWaves","mdVSUserKeysWaves","mdVSFrameMapWaves","mdVSQAfterFrame","gmegabuf","mdVSBase","time","bass","mid","mid_att","treb","meshx","meshy","pixelsx","pixelsy","mdVS","rand_start","rand_preset","nonUserKeys","mdVSAfterInit","cloneVars","pick","initUserVars","omit","mdVSTWaveInits","wave","mdVSWave","nonUserWaveKeys","mdVSTShapeInits","shape","mdVSShape","nonUserShapeKeys","updatePreset","updateGlobals","runFrameEquations","runPixelEquations","mdVSVertex","runShapeFrameEquations","shapeIdx","runWaveFrameEquations","waveIdx","runWavePointEquations","mdVSWaveFrame","PresetEquationRunnerWASM","globalKeys","frameKeys","waveFrameKeys","waveFrameInputKeys","getQVars","pickWasm","globalPools","getTVars","setWasm","perFrame","save_qs","lineMatcher","samplerMatcher","ShaderUtils","sbIndex","beforeShaderBody","afterShaderBody","firstCurly","lastCurly","lastIndexOf","gl","getShaderPrecisionFormat","FRAGMENT_SHADER","HIGH_FLOAT","precision","MEDIUM_FLOAT","samplers","lineMatches","samplerMatches","sampler","WaveUtils","positions","positionsSmoothed","nVertsIn","zCoord","iAbove","iBelow","iAbove2","colors","colorsSmoothed","BasicWaveform","numAudioSamples","positions2","oldPositions","oldPositions2","smoothedPositions","smoothedPositions2","color","floatPrecision","getFragmentFloatPrecision","createShader","vertexBuf","createBuffer","shaderProgram","createProgram","vertShader","VERTEX_SHADER","shaderSource","trim","compileShader","fragShader","attachShader","linkProgram","aPosLoc","getAttribLocation","colorLoc","getUniformLocation","thickOffsetLoc","waveform","smooth","smooth2","generateWaveform","blending","blendProgress","alpha","vol","waveL","processWaveform","waveR","newWaveMode","oldWaveMode","old_wave_mode","wavePosX","wavePosY","numVert","oldNumVert","its","it","waveMode","fWaveParam2","alphaDiff","numVertInv","sampleOffset","mix","w1","w2","cosRot","sinRot","ioff","x0","y0","edgex","edgey","bClip","dxi","dyi","ang2","perpDx","perpDy","sample","oldAlpha","mix2","maxc","fIdx","nIdx","halfNumVert","smoothedNumVert","smoothWave","drawBasicWaveform","useProgram","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniform4fv","instances","wave_thick","blendFunc","SRC_ALPHA","ONE","ONE_MINUS_SRC_ALPHA","drawMode","POINTS","LINE_STRIP","uniform2fv","drawArrays","CustomWaveform","pointsData","maxSamples","smoothedColors","positionVertexBuf","colorVertexBuf","aPosLocation","aColorLocation","sizeLoc","presetEquationRunner","waveEqs","alphaMult","useWASM","frameR","frameG","frameB","frameA","waveScale","useSpectrum","pointsLeft","pointsRight","j0","j1","mix1","varPool","value1","value2","mdvsUserKeysWave","mdVSNewFrameMapWave","smoothWaveAndColor","drawCustomWaveform","waveUseDots","waveThick","waveAdditive","numVerts","uniform1f","CustomShape","uvs","borderPositions","uvVertexBuf","borderPositionVertexBuf","createBorderShader","mainSampler","createSampler","samplerParameteri","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","aUvLocation","texturedLoc","textureLoc","borderShaderProgram","aBorderPosLoc","uBorderColorLoc","drawCustomShape","shapeEqs","prevTexture","setupShapeBuffers","restore_qs","save_ts","frame_eqs_save","numInst","num_inst","frame_eqs_restore","restore_ts","borderR","borderG","borderB","borderA","borderColor","texZoom","texAng","hasBorder","isTextured","isBorderThick","isAdditive","quarterPi","pTwoPi","angSum","texAngSum","drawCustomShapeInstance","frame_eqs_str","mdVSShapeFrame","mdVSUserKeysShape","mdVSNewFrameMapShape","DYNAMIC_DRAW","wrapping","CLAMP_TO_EDGE","bufferSubData","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","bindSampler","uniform1i","TRIANGLE_FAN","Border","addTriangle","point1","point2","point3","generateBorder","borderSize","prevBorderSize","width","height","widthHalf","heightHalf","prevBorderWidth","borderWidth","prevBorderWidthWidth","prevBorderWidthHeight","borderWidthWidth","borderWidthHeight","point4","drawBorder","TRIANGLES","generatePositions","drawDarkenCenter","MotionVectors","maxX","maxY","getMotionDir","warpUVs","fx","fy","x1","y1","gridX1","fx2","fy2","generateMotionVectors","mvA","nX","nY","dx2","dy2","lenMult","minLen","numVecVerts","fx2arr","fdist","vx1","vy1","vx2","vy2","drawMotionVectors","lineWidth","LINES","WarpShader","noise","image","buildPositions","indexBuf","warpUvVertexBuf","warpColorVertexBuf","mainSamplerFW","mainSamplerFC","mainSamplerPW","mainSamplerPC","NEAREST_MIPMAP_NEAREST","NEAREST","gridX","gridY","gridY1","segmentWidth","segmentHeight","vertices","iy","ix","indices","shaderText","fragShaderText","fragShaderHeaderText","shaderParts","getShaderParts","userTextures","getUserSamplers","positionLocation","warpUvLocation","warpColorLocation","textureFWLoc","textureFCLoc","texturePWLoc","texturePCLoc","blurTexture1Loc","blurTexture2Loc","blurTexture3Loc","noiseLQLoc","noiseMQLoc","noiseHQLoc","noiseLQLiteLoc","noisePointLQLoc","noiseVolLQLoc","noiseVolHQLoc","decayLoc","texsizeLoc","texsizeNoiseLQLoc","texsizeNoiseMQLoc","texsizeNoiseHQLoc","texsizeNoiseLQLiteLoc","texsizeNoiseVolLQLoc","texsizeNoiseVolHQLoc","resolutionLoc","aspectLoc","bassLoc","midLoc","trebLoc","volLoc","bassAttLoc","midAttLoc","trebAttLoc","volAttLoc","timeLoc","frameLoc","fpsLoc","blur1MinLoc","blur1MaxLoc","blur2MinLoc","blur2MaxLoc","blur3MinLoc","blur3MaxLoc","scale1Loc","scale2Loc","scale3Loc","bias1Loc","bias2Loc","bias3Loc","randPresetLoc","randFrameLoc","qaLoc","qbLoc","qcLoc","qdLoc","qeLoc","qfLoc","qgLoc","qhLoc","slowRoamCosLoc","roamCosLoc","slowRoamSinLoc","roamSinLoc","userTexture","updateShader","bindBlurVals","blurMins","blurMaxs","blurMin1","blurMin2","blurMin3","blurMax1","blurMax2","blurMax3","scale1","bias1","scale2","bias2","scale3","bias3","renderQuadTexture","texture","blurTexture1","blurTexture2","blurTexture3","mdVSQs","warpColor","ELEMENT_ARRAY_BUFFER","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","noiseTexLQ","TEXTURE9","noiseTexMQ","TEXTURE10","noiseTexHQ","TEXTURE11","noiseTexLQLite","TEXTURE12","noiseTexPointLQ","TEXTURE13","TEXTURE_3D","noiseTexVolLQ","TEXTURE14","noiseTexVolHQ","TEXTURE15","getTexture","q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15","q16","q17","q18","q19","q20","q21","q22","q23","q24","q25","q26","q27","q28","q29","q30","q31","q32","disable","BLEND","drawElements","UNSIGNED_SHORT","enable","CompShader","compWidth","compHeight","compColorVertexBuf","compColorLocation","gammaAdjLoc","echoZoomLoc","echoAlphaLoc","echoOrientationLoc","invertLoc","brightenLoc","darkenLoc","solarizeLoc","fShaderLoc","hueBase","maxshade","generateCompColors","generateHueBase","compColor","offsetColor","col","nx","ny","compColors","OutputShader","textureRatio","useFXAA","createFXAAShader","deleteProgram","TRIANGLE_STRIP","ResampleShader","generateMipmap","BlurVertical","blurLevel","w","w1V","w2V","d1V","d2V","wds","wDiv","texsizeLocation","ed1Loc","ed2Loc","ed3Loc","wdsLocation","wdivLoc","srcTexsize","b1ed","BlurHorizontal","w1H","w2H","w3H","w4H","d1H","d2H","d3H","d4H","ws","ds","scaleLoc","biasLoc","wsLoc","dsLocation","getScaleAndBias","bias","tempMin","tempMax","BlurShader","blurRatios","anisoExt","getExtension","blurHorizontalFrameBuffer","createFramebuffer","blurVerticalFrameBuffer","blurHorizontalTexture","createTexture","blurVerticalTexture","setupFrameBufferTextures","blurHorizontal","blurVertical","getTextureSize","sizeRatio","sizeX","sizeY","srcBlurRatios","dstBlurRatios","srcTexsizeHorizontal","dstTexsizeHorizontal","bindFrameBufferTexture","srcTexsizeVertical","dstTexsizeVertical","horizontalTexsizes","verticalTexsizes","bindFrambufferAndSetViewport","fb","texsize","bindFramebuffer","FRAMEBUFFER","viewport","targetFrameBuffer","targetTexture","pixelStorei","UNPACK_ALIGNMENT","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","getParameter","MAX_TEXTURE_MAX_ANISOTROPY_EXT","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","framebufferTexture2D","COLOR_ATTACHMENT0","renderBlurTexture","Noise","nTexArrLQ","createNoiseTex","nTexArrLQLite","nTexArrMQ","nTexArrHQ","nTexArrVolLQ","createNoiseVolTex","nTexArrVolHQ","bindTexture3D","depth","texImage3D","TEXTURE_WRAP_R","y2","y3","t2","a0","ret","fCubicInterpolate","noiseSize","nsize","texArr","texRange","halfTexRange","wordsPerSlice","wordsPerLine","baseX","baseY","dwCubicInterpolate","baseZ","ImageTextures","clouds2Image","Image","onload","clouds2","emptyImage","empty","loadExtraImages","imageData","imageName","tex","TitleText","textTexture","generateTitleTexture","UNPACK_FLIP_Y_WEBGL","uvLocation","textColorLoc","generateUvs","progress","flip","renderTitle","progressUvs","BlendPattern","vertInfoA","vertInfoC","createBlendPattern","oldMat","oldWidth","oldHeight","newWidth","newHeight","newMat","nVert","val00","val01","val10","val11","oldMeshWidth","oldMeshHeight","resizeMatrixValues","genPlasma","dt","midx","midy","t00","t01","t10","t11","mixType","vx","vy","invBand","minc","mult","Renderer","showTitleOpts","frameNum","presetTime","lastTime","performance","timeHist","timeHistMax","blendStartTime","blendDuration","meshWidth","meshHeight","pixelRatio","devicePixelRatio","outputFXAA","audioLevels","prevFrameBuffer","compFrameBuffer","compTexture","params","warpShader","compShader","outputShader","prevWarpShader","prevCompShader","numBlurPasses","blurShader1","blurShader2","blurShader3","basicWaveform","customWaveforms","customShapes","prevCustomWaveforms","prevCustomShapes","darkenCenter","DarkenCenter","innerBorder","outerBorder","motionVectors","titleText","blendPattern","resampleShader","clearColor","blankPreset","prevPreset","prevPresetEquationRunner","regVars","loadPreset","blendTime","pixel_eqs_initialize_array","tmpWarpShader","tmpCompShader","warpText","compText","getHighestBlur","setRendererSize","oldTexsizeX","oldTexsizeY","targetTextureNew","renderToScreen","setInternalMeshSize","setOutputAA","useAA","calcTimeAndFPS","elapsedTime","elapsed","newTime","newHistTime","newFPS","damping","gridZ","gridZ1","warpTimeV","warpScaleInv","warpf0","warpf1","warpf2","warpf3","texelOffsetX","texelOffsetY","perVertex","pixel_eqs_wasm","newWarpUVs","pixel_eqs_get_array","iz","u","zoomExp","zoom2Inv","u2","v2","mdVSFramePrev","mixedFrame","b1n","b2n","b3n","b1x","b2x","b3x","fMinDist","render","prevGlobalVars","mdVSFrameMixed","prevMDVSFrame","mixFrameEquations","swapTexture","swapFrameBuffer","clear","COLOR_BUFFER_BIT","blendEquation","FUNC_ADD","getBlurValues","outerColor","innerColor","rendered","launchSongTitleAnim","toDataURL","readPixels","canvas","document","createElement","getContext","createImageData","putImageData","deleteTexture","deleteFramebuffer","warpBufferToDataURL","Visualizer","vizWidth","vizHeight","OffscreenCanvas","internalCanvas","antialias","stencil","premultipliedAlpha","outputGl","baseValsDefaults","shapeBaseValsDefaults","waveBaseValsDefaults","globalPerFrameVars","globalPerPixelVars","globalShapeVars","shapeBaseVars","globalWaveVars","renderer","loseGLContext","loseContext","audioNode","combinedVals","createQVars","wasmVars","Global","mutable","createTVars","createPerFramePool","createPerPixelPool","createCustomShapePerFramePool","createCustomWavePerFramePool","variables","reduce","acc","variable","base64","binaryString","atob","presetMap","JSON","stringify","overrideDefaultVars","forceJS","useJS","onlyUseWASM","loadWASMPreset","warn","loadJSPreset","qWasmVars","tWasmVars","wasmVarPools","wasmFunctions","presetInit","init_eqs_eel","frame_eqs_eel","pixel_eqs_eel","perPixel","point_eqs_eel","handleEmptyFunction","presetFunctionsMod","ascLoader","base64ToArrayBuffer","loadPresetFunctionsBuffer","pixelEqs","perPixelEqs","pixelVarPool","qVarPool","tVarPool","shapePool0","makeShapeResetPool","shapePool1","shapePool2","shapePool3","logi","logf","saveQs","restoreQs","saveTs","restoreTs","arrPtr","createFloat32Array","pixel_eqs_array","__getFloat32ArrayView","Function","init_eqs_str","pixel_eqs_str","point_eqs_str","setCanvas","renderOutput","drawImage","Butterchurn"],"mappings":"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J,KAAM,IACNC,KAAM,IACNC,KAAM,IACNC,KAAM,GAGRlO,KAAK6xD,sBAAwB,CAC3BriD,QAAS,EACTyB,MAAO,EACPpB,SAAU,EACVU,aAAc,EACdC,SAAU,EACV47B,SAAU,EACV17B,SAAU,EACVJ,QAAS,EACTzM,EAAG,GACHC,EAAG,GACHwL,IAAK,GACL0B,IAAK,EACLnS,EAAG,EACH6Q,EAAG,EACHD,EAAG,EACHnM,EAAG,EACH+M,GAAI,EACJI,GAAI,EACJI,GAAI,EACJC,GAAI,EACJI,SAAU,EACVH,SAAU,EACVH,SAAU,EACVD,SAAU,IAGZ3Q,KAAK8xD,qBAAuB,CAC1BtiD,QAAS,EACTI,QAAS,IACTM,IAAK,EACLP,QAAS,EACTK,UAAW,GACXnR,EAAG,EACH6Q,EAAG,EACHD,EAAG,EACHnM,EAAG,EACHyM,SAAU,EACVD,QAAS,EACTG,MAAO,EACPJ,SAAU,GAGZ7P,KAAK87B,GAAKjnB,EAAMwP,MAAM,EAAG,IAAI5iB,IAAKoC,GAAO,IAAGA,GAC5C7D,KAAK+7B,GAAKlnB,EAAMwP,MAAM,EAAG,GAAG5iB,IAAKoC,GAAO,IAAGA,GAE3C7D,KAAK+xD,mBAAqB,CACxB,gBAEA,QACA,OACA,MACA,OACA,WACA,MACA,UACA,OACA,WACA,QACA,QACA,UACA,UACA,UACA,UACA,aACA,eAGF/xD,KAAKgyD,mBAAqB,CAExB,QACA,OACA,MACA,OACA,WACA,MACA,UACA,OACA,WACA,QACA,QACA,UACA,UACA,UACA,UACA,aACA,cAEA,IACA,IACA,MACA,OAGFhyD,KAAKiyD,gBAAkB,CAErB,QACA,OACA,MACA,OACA,WACA,MACA,UACA,OACA,WACA,QACA,QACA,UACA,UACA,UACA,UACA,aACA,cAEA,YAGFjyD,KAAKkyD,cAAgB,CACnB,IACA,IACA,MACA,MACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,WACA,WACA,WACA,WACA,eACA,WACA,WACA,UACA,YAGFlyD,KAAKmyD,eAAiB,CAEpB,QACA,OACA,MACA,OACA,WACA,MACA,UACA,OACA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","file":"butterchurn.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"butterchurn\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"butterchurn\"] = factory();\n\telse\n\t\troot[\"butterchurn\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nexports.__esModule = true;\nfunction arrayJoin(arr, joiner) {\n    var newArr = [];\n    for (var i = 0; i < arr.length; i++) {\n        newArr.push(arr[i]);\n        var last = i === arr.length - 1;\n        if (!last) {\n            newArr.push(joiner);\n        }\n    }\n    return newArr;\n}\nexports.arrayJoin = arrayJoin;\nfunction flatten(arr) {\n    var newArr = [];\n    arr.forEach(function (subArr) {\n        newArr.push.apply(newArr, __spread(subArr));\n    });\n    return newArr;\n}\nexports.flatten = flatten;\nexports.flattenTwice = function (arr) {\n    return [].concat.apply([], arr);\n};\nfunction times(n, cb) {\n    return new Array(n).fill(null).map(function (_, i) { return cb(i); });\n}\nexports.times = times;\nfunction repeat(n, char) {\n    return new Array(n).fill(char).join(\"\");\n}\nexports.repeat = repeat;\n// Maintain an ordered list of indexes for namespace/key pairs.\n// In Wasm binary variables are referenced by their index. In our emitter we\n// want to emit variables indexes as we encounter their names. This data\n// structure lets us issue variable indexes on demmand and then iterate through\n// them post facto.\n//\n// `null` may be passed for the namespace argument in order to get a global\n// variable that exists in all namespaces.\n//\n// TODO: We could improve this with a map to get constant time lookups, but I\n// suspect it's not worth the complexity.\nvar ScopedIdMap = /** @class */ (function () {\n    function ScopedIdMap() {\n        this._list = [];\n    }\n    // Get the index of a given namespace/key pair\n    ScopedIdMap.prototype.get = function (namespace, key) {\n        var i = this._list.findIndex(function (_a) {\n            var _b = __read(_a, 2), n = _b[0], k = _b[1];\n            return n === namespace && k === key;\n        });\n        if (i === -1) {\n            this._list.push([namespace, key]);\n            return this._list.length - 1;\n        }\n        return i;\n    };\n    ScopedIdMap.prototype.size = function () {\n        return this._list.length;\n    };\n    return ScopedIdMap;\n}());\nexports.ScopedIdMap = ScopedIdMap;\nfunction formatList(list) {\n    if (list.length === 0) {\n        throw new Error(\"Cannot format an empty list\");\n    }\n    if (list.length === 1) {\n        return list[0];\n    }\n    var quoted = list.map(function (name) { return \"\\\"\" + name + \"\\\"\"; });\n    var last = quoted.pop();\n    return quoted.join(\", \") + (\" and \" + last);\n}\nexports.formatList = formatList;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nexports.__esModule = true;\nvar EPSILON = 0.00001;\nvar shims = {\n    // TODO: Reimplement some of these functions natively in Wasm?\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    atan2: Math.atan2,\n    rand: function (a) { return Math.random() * a; },\n    pow: Math.pow,\n    log: Math.log,\n    log10: Math.log10,\n    exp: Math.exp,\n    sigmoid: function (x, y) {\n        var t = 1 + Math.exp(-x * y);\n        return Math.abs(t) > EPSILON ? 1.0 / t : 0;\n    }\n};\nexports[\"default\"] = shims;\n//# sourceMappingURL=shims.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nexports.__esModule = true;\nvar ieee754 = __importStar(require(\"./ieee754\"));\nvar utils_1 = require(\"./utils\");\nexports.MAGIC = [0x00, 0x61, 0x73, 0x6d];\nexports.WASM_VERSION = [0x01, 0x00, 0x00, 0x00];\nexports.EPSILON = 0.00001;\n// An intial attempt to construct a Wasm binary by hand.\n/*\n0\tcustom section\n1\ttype section\n2\timport section\n3\tfunction section\n4\ttable section\n5\tmemory section\n6\tglobal section\n7\texport section\n8\tstart section\n9\telement section\n10\tcode section\n11\tdata section\n*/\n// https://webassembly.github.io/spec/core/binary/modules.html#sections\nexports.SECTION = {\n    TYPE: 1,\n    IMPORT: 2,\n    FUNC: 3,\n    MEMORY: 5,\n    GLOBAL: 6,\n    EXPORT: 7,\n    CODE: 10\n};\nexports.EXPORT_TYPE = {\n    FUNC: 0x00,\n    TABLE: 0x01,\n    MEMORY: 0x02,\n    GLOBAL: 0x03\n};\nexports.op = {\n    /*\n     * Control Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#control-instructions\n     */\n    // unreachable: 0x00,\n    // nop: 0x01,\n    block: function (blockType) { return [0x02, blockType]; },\n    loop: function (blockType) { return [0x03, blockType]; },\n    \"if\": function (retType) { return [0x04, retType]; },\n    \"else\": 0x05,\n    end: 0x0b,\n    // br: (i: number) => [0x0c, ...signedLEB128(i)],\n    br_if: function (i) { return __spread([0x0d], unsignedLEB128(i)); },\n    // br_table: 0x0d,\n    // return: 0x0f,\n    call: function (i) { return __spread([0x10], unsignedLEB128(i)); },\n    // call_indirect: 0x11,\n    /*\n     * Parametric Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#parametric-instructions\n     */\n    drop: 0x1a,\n    select: 0x1b,\n    /*\n     * Variable Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#variable-instructions\n     */\n    local_get: function (i) { return __spread([0x20], unsignedLEB128(i)); },\n    local_set: function (i) { return __spread([0x21], unsignedLEB128(i)); },\n    local_tee: function (i) { return __spread([0x22], unsignedLEB128(i)); },\n    global_get: function (i) { return __spread([0x23], unsignedLEB128(i)); },\n    global_set: function (i) { return __spread([0x24], unsignedLEB128(i)); },\n    /*\n     * Memory Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#memory-instructions\n     */\n    f64_load: function (align, offset) { return __spread([\n        0x2b\n    ], unsignedLEB128(align), unsignedLEB128(offset)); },\n    f64_store: function (align, offset) { return __spread([\n        0x39\n    ], unsignedLEB128(align), unsignedLEB128(offset)); },\n    /*\n     * Numeric Instructions\n     * https://webassembly.github.io/spec/core/binary/instructions.html#numeric-instructions\n     */\n    i32_const: function (i) { return __spread([0x41], signedLEB128(i)); },\n    // i64_const: 0x42,\n    // f32_const: 0x43,\n    f64_const: function (i) { return __spread([0x44], encodef64(i)); },\n    i32_eqz: 0x45,\n    // i32_eq: 0x46,\n    i32_ne: 0x47,\n    i32_lt_s: 0x48,\n    i32_lt_u: 0x49,\n    i32_gt_s: 0x4a,\n    // i32_gt_u: 0x4b,\n    i32_le_s: 0x4c,\n    i32_le_u: 0x4d,\n    i32_ge_s: 0x4e,\n    // i32_ge_u: 0x4f,\n    // [0x50...0x5a] i64\n    // [0x5b...0x60] f32\n    f64_eq: 0x61,\n    f64_ne: 0x62,\n    f64_lt: 0x63,\n    f64_gt: 0x64,\n    f64_le: 0x65,\n    f64_ge: 0x66,\n    // i32_clz: 0x67,\n    // i32_ctz: 0x68,\n    // i32_popcnt: 0x69,\n    i32_add: 0x6a,\n    i32_sub: 0x6b,\n    i32_mul: 0x6c,\n    // i32_div_s: 0x6d,\n    // i32_div_u: 0x6e,\n    // i32_rem_s: 0x6f,\n    // i32_rem_u: 0x70,\n    i32_and: 0x71,\n    i32_or: 0x72,\n    // [0x73...0x78] More i32\n    // [0x79...0x8a] More i64\n    i64_rem_s: 0x81,\n    i64_and: 0x83,\n    i64_or: 0x84,\n    // [0x8b...0x98] More f32\n    f64_abs: 0x99,\n    f64_neg: 0x9a,\n    f64_ceil: 0x9b,\n    f64_floor: 0x9c,\n    // f64_trunc: 0x9d,\n    // f64_nearest: 0x9e,\n    f64_sqrt: 0x9f,\n    f64_add: 0xa0,\n    f64_sub: 0xa1,\n    f64_mul: 0xa2,\n    f64_div: 0xa3,\n    f64_min: 0xa4,\n    f64_max: 0xa5,\n    // f64_copysign: 0xa6,\n    i32_trunc_f64_s: 0xaa,\n    // i32_trunc_f64_u: 0xab,\n    i64_trunc_s_f64: 0xb0,\n    f64_convert_i64_s: 0xb9,\n    f64_convert_i32_s: 0xb7\n};\n// https://webassembly.github.io/spec/core/binary/instructions.html#binary-blocktype\nexports.VAL_TYPE = {\n    i32: 0x7f,\n    i64: 0x7e,\n    f32: 0x7d,\n    f64: 0x7c\n};\nexports.MUTABILITY = {\n    \"const\": 0x00,\n    \"var\": 0x01\n};\nexports.BLOCK = {\n    \"void\": 0x40,\n    i32: 0x7f,\n    i64: 0x7e,\n    f32: 0x7d,\n    f64: 0x7c\n};\n// http://webassembly.github.io/spec/core/binary/types.html#function-types\nexports.FUNCTION_TYPE = 0x60;\n// I think these might actually be specific to importdesc\nexports.MEMORY_IDX = 0x02;\nexports.GLOBAL_TYPE = 0x03;\nexports.TYPE_IDX = 0x00;\n// Takes an f64 on the stack and leaves an int32 boolean representing if it's\n// within epsilon of zero.\nexports.IS_ZEROISH = __spread([\n    exports.op.f64_abs\n], exports.op.f64_const(exports.EPSILON), [\n    exports.op.f64_lt,\n]);\nexports.IS_NOT_ZEROISH = __spread([\n    exports.op.f64_abs\n], exports.op.f64_const(exports.EPSILON), [\n    exports.op.f64_gt,\n]);\n// f64\nfunction encodef64(num) {\n    var arr = new Uint8Array(8);\n    ieee754.write(arr, num);\n    return arr;\n}\nexports.encodef64 = encodef64;\nexports.encodeString = function (str) { return __spread([\n    str.length\n], str.split(\"\").map(function (s) { return s.charCodeAt(0); })); };\nfunction unsignedLEB128(n) {\n    var buffer = [];\n    do {\n        var byte = n & 0x7f;\n        n >>>= 7;\n        if (n !== 0) {\n            byte |= 0x80;\n        }\n        buffer.push(byte);\n    } while (n !== 0);\n    return buffer;\n}\nexports.unsignedLEB128 = unsignedLEB128;\n// https://github.com/shmishtopher/wasm-LEB128/blob/2f1039636e758293e571f996e8012c4d69f4b58f/lib/index.js#L6\nfunction signedLEB128(value) {\n    var bytes = [];\n    var byte = 0x00;\n    var size = Math.ceil(Math.log2(Math.abs(value)));\n    var negative = value < 0;\n    var more = true;\n    while (more) {\n        byte = value & 127;\n        value = value >> 7;\n        if (negative) {\n            value = value | -(1 << (size - 7));\n        }\n        if ((value == 0 && (byte & 0x40) == 0) ||\n            (value == -1 && (byte & 0x40) == 0x40)) {\n            more = false;\n        }\n        else {\n            byte = byte | 128;\n        }\n        bytes.push(byte);\n    }\n    return bytes;\n}\nexports.signedLEB128 = signedLEB128;\n// https://webassembly.github.io/spec/core/binary/conventions.html#binary-vec\n// Vectors are encoded with their length followed by their element sequence\nexports.encodeVector = function (data) { return __spread(unsignedLEB128(data.length), utils_1.flattenTwice(data)); };\n// subSections is an array of arrays\nfunction encodeSection(type, subSections) {\n    // Sections are all optional, so if we get an empty vector of subSections, we\n    // can omit the whole section.\n    if (subSections.length === 0) {\n        return [];\n    }\n    // The size of this vector is not needed for decoding, but can be\n    // used to skip sections when navigating through a binary.\n    // TODO: Remove this assertion once we are more confident in our output.\n    return __spread([type], exports.encodeVector(exports.encodeVector(subSections)));\n}\nexports.encodeSection = encodeSection;\n//# sourceMappingURL=encoding.js.map","\"use strict\";\nexports.__esModule = true;\n// https://webassembly.github.io/spec/core/exec/runtime.html#page-size\nvar WASM_PAGE_SIZE = 65536;\nvar BYTES_PER_F64 = 8;\nvar BUFFER_COUNT = 2;\n// https://github.com/WACUP/vis_milk2/blob/de9625a89e724afe23ed273b96b8e48496095b6c/ns-eel2/ns-eel.h#L136\nexports.MAX_LOOP_COUNT = 1048576;\n// The number of items allowed in each buffer (megabuf/gmegabuf).\n// https://github.com/WACUP/vis_milk2/blob/de9625a89e724afe23ed273b96b8e48496095b6c/ns-eel2/ns-eel.h#L145\nexports.BUFFER_SIZE = 65536 * 128;\nexports.WASM_MEMORY_SIZE = Math.ceil((exports.BUFFER_SIZE * BYTES_PER_F64 * BUFFER_COUNT) / WASM_PAGE_SIZE);\n//# sourceMappingURL=constants.js.map","/* eslint-disable */\r\ndefine([], function () {\r\n  \"use strict;\";\r\n\r\n  var pmap = {\r\n    baseVals: {\r\n      gammaadj: 1.25,\r\n      wave_g: 0.5,\r\n      mv_x: 12.0,\r\n      warpscale: 1.0,\r\n      brighten: 0.0,\r\n      mv_y: 9.0,\r\n      wave_scale: 1.0,\r\n      echo_alpha: 0.0,\r\n      additivewave: 0.0,\r\n      sx: 1.0,\r\n      sy: 1.0,\r\n      warp: 0.01,\r\n      red_blue: 0.0,\r\n      wave_mode: 0.0,\r\n      wave_brighten: 0.0,\r\n      wrap: 0.0,\r\n      zoomexp: 1.0,\r\n      fshader: 0.0,\r\n      wave_r: 0.5,\r\n      echo_zoom: 1.0,\r\n      wave_smoothing: 0.75,\r\n      warpanimspeed: 1.0,\r\n      wave_dots: 0.0,\r\n      wave_x: 0.5,\r\n      wave_y: 0.5,\r\n      zoom: 1.0,\r\n      solarize: 0.0,\r\n      modwavealphabyvolume: 0.0,\r\n      dx: 0.0,\r\n      cx: 0.5,\r\n      dy: 0.0,\r\n      darken_center: 0.0,\r\n      cy: 0.5,\r\n      invert: 0.0,\r\n      bmotionvectorson: 0.0,\r\n      rot: 0.0,\r\n      modwavealphaend: 0.95,\r\n      wave_mystery: -0.2,\r\n      decay: 0.9,\r\n      wave_a: 1.0,\r\n      wave_b: 0.5,\r\n      rating: 5.0,\r\n      modwavealphastart: 0.75,\r\n      darken: 0.0,\r\n      echo_orient: 0.0,\r\n      ib_r: 0.5,\r\n      ib_g: 0.5,\r\n      ib_b: 0.5,\r\n      ib_a: 0.0,\r\n      ib_size: 0.0,\r\n      ob_r: 0.5,\r\n      ob_g: 0.5,\r\n      ob_b: 0.5,\r\n      ob_a: 0.0,\r\n      ob_size: 0.0,\r\n      mv_dx: 0.0,\r\n      mv_dy: 0.0,\r\n      mv_a: 0.0,\r\n      mv_r: 0.5,\r\n      mv_g: 0.5,\r\n      mv_b: 0.5,\r\n      mv_l: 0.0,\r\n    },\r\n    init_eqs: function () {\r\n      var m = {};\r\n      return m;\r\n    },\r\n    frame_eqs: function (m) {\r\n      m.rkeys = [\"warp\"];\r\n      m.zoom = 1.01 + 0.02 * m.treb_att;\r\n      m.warp = 0.15 + 0.25 * m.bass_att;\r\n      return m;\r\n    },\r\n    pixel_eqs: function (m) {\r\n      m.warp = m.warp + m.rad * 0.15;\r\n      return m;\r\n    },\r\n    waves: [\r\n      {\r\n        baseVals: {\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 1.0,\r\n          g: 1.0,\r\n          scaling: 1.0,\r\n          samples: 512.0,\r\n          additive: 0.0,\r\n          usedots: 0.0,\r\n          spectrum: 0.0,\r\n          r: 1.0,\r\n          smoothing: 0.5,\r\n          thick: 0.0,\r\n          sep: 0.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n        point_eqs: \"\",\r\n      },\r\n      {\r\n        baseVals: {\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 1.0,\r\n          g: 1.0,\r\n          scaling: 1.0,\r\n          samples: 512.0,\r\n          additive: 0.0,\r\n          usedots: 0.0,\r\n          spectrum: 0.0,\r\n          r: 1.0,\r\n          smoothing: 0.5,\r\n          thick: 0.0,\r\n          sep: 0.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n        point_eqs: \"\",\r\n      },\r\n      {\r\n        baseVals: {\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 1.0,\r\n          g: 1.0,\r\n          scaling: 1.0,\r\n          samples: 512.0,\r\n          additive: 0.0,\r\n          usedots: 0.0,\r\n          spectrum: 0.0,\r\n          r: 1.0,\r\n          smoothing: 0.5,\r\n          thick: 0.0,\r\n          sep: 0.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n        point_eqs: \"\",\r\n      },\r\n      {\r\n        baseVals: {\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 1.0,\r\n          g: 1.0,\r\n          scaling: 1.0,\r\n          samples: 512.0,\r\n          additive: 0.0,\r\n          usedots: 0.0,\r\n          spectrum: 0.0,\r\n          r: 1.0,\r\n          smoothing: 0.5,\r\n          thick: 0.0,\r\n          sep: 0.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n        point_eqs: \"\",\r\n      },\r\n    ],\r\n    shapes: [\r\n      {\r\n        baseVals: {\r\n          r2: 0.0,\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 0.0,\r\n          tex_ang: 0.0,\r\n          thickoutline: 0.0,\r\n          g: 0.0,\r\n          textured: 0.0,\r\n          g2: 1.0,\r\n          tex_zoom: 1.0,\r\n          additive: 0.0,\r\n          border_a: 0.1,\r\n          border_b: 1.0,\r\n          b2: 0.0,\r\n          a2: 0.0,\r\n          r: 1.0,\r\n          border_g: 1.0,\r\n          rad: 0.1,\r\n          x: 0.5,\r\n          y: 0.5,\r\n          ang: 0.0,\r\n          sides: 4.0,\r\n          border_r: 1.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n      },\r\n      {\r\n        baseVals: {\r\n          r2: 0.0,\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 0.0,\r\n          tex_ang: 0.0,\r\n          thickoutline: 0.0,\r\n          g: 0.0,\r\n          textured: 0.0,\r\n          g2: 1.0,\r\n          tex_zoom: 1.0,\r\n          additive: 0.0,\r\n          border_a: 0.1,\r\n          border_b: 1.0,\r\n          b2: 0.0,\r\n          a2: 0.0,\r\n          r: 1.0,\r\n          border_g: 1.0,\r\n          rad: 0.1,\r\n          x: 0.5,\r\n          y: 0.5,\r\n          ang: 0.0,\r\n          sides: 4.0,\r\n          border_r: 1.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n      },\r\n      {\r\n        baseVals: {\r\n          r2: 0.0,\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 0.0,\r\n          tex_ang: 0.0,\r\n          thickoutline: 0.0,\r\n          g: 0.0,\r\n          textured: 0.0,\r\n          g2: 1.0,\r\n          tex_zoom: 1.0,\r\n          additive: 0.0,\r\n          border_a: 0.1,\r\n          border_b: 1.0,\r\n          b2: 0.0,\r\n          a2: 0.0,\r\n          r: 1.0,\r\n          border_g: 1.0,\r\n          rad: 0.1,\r\n          x: 0.5,\r\n          y: 0.5,\r\n          ang: 0.0,\r\n          sides: 4.0,\r\n          border_r: 1.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n      },\r\n      {\r\n        baseVals: {\r\n          r2: 0.0,\r\n          a: 1.0,\r\n          enabled: 0.0,\r\n          b: 0.0,\r\n          tex_ang: 0.0,\r\n          thickoutline: 0.0,\r\n          g: 0.0,\r\n          textured: 0.0,\r\n          g2: 1.0,\r\n          tex_zoom: 1.0,\r\n          additive: 0.0,\r\n          border_a: 0.1,\r\n          border_b: 1.0,\r\n          b2: 0.0,\r\n          a2: 0.0,\r\n          r: 1.0,\r\n          border_g: 1.0,\r\n          rad: 0.1,\r\n          x: 0.5,\r\n          y: 0.5,\r\n          ang: 0.0,\r\n          sides: 4.0,\r\n          border_r: 1.0,\r\n        },\r\n        init_eqs: function (m) {\r\n          m.rkeys = [];\r\n          return m;\r\n        },\r\n        frame_eqs: function (m) {\r\n          return m;\r\n        },\r\n      },\r\n    ],\r\n    warp:\r\n      \"shader_body {\\nret = texture2D(sampler_main, uv).rgb;\\nret -= 0.004;\\n}\\n\",\r\n    comp:\r\n      \"shader_body {\\nret = texture2D(sampler_main, uv).rgb;\\nret *= hue_shader;\\n}\\n\",\r\n  };\r\n\r\n  return pmap;\r\n});\r\n/* eslint-enable */\r\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nvar preProcessor_1 = require(\"./preProcessor\");\nvar envParser_1 = require(\"./envParser\");\nvar astUtils_1 = require(\"./astUtils\");\nvar errorUtils_1 = require(\"./errorUtils\");\nfunction mapLoc(loc, mapper) {\n    var first = preProcessor_1.getLoc(mapper, loc.first_column);\n    var last = preProcessor_1.getLoc(mapper, loc.last_column);\n    return {\n        first_column: first.column,\n        last_column: last.column,\n        first_line: first.line,\n        last_line: last.line\n    };\n}\nfunction parse(code) {\n    var _a = __read(preProcessor_1.preProcess(code), 2), processedCode = _a[0], mapper = _a[1];\n    try {\n        var ast = envParser_1.parse(processedCode);\n        return astUtils_1.mapAst(ast, function (node) {\n            if (node.loc.first_line !== 1 || node.loc.last_line != 1) {\n                throw errorUtils_1.createCompilerError(\"Unexpected multiline\", node.loc, code);\n            }\n            return __assign(__assign({}, node), { loc: mapLoc(node.loc, mapper) });\n        });\n    }\n    catch (e) {\n        if (e.hash == null) {\n            throw e;\n        }\n        throw errorUtils_1.createUserError(\"Parse Error: \" + e.message.split(\"\\n\")[3], mapLoc(e.hash.loc, mapper), code);\n    }\n}\nexports.parse = parse;\n//# sourceMappingURL=parser.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar utils_1 = require(\"./utils\");\n/* Build up a string showing a formatted source location in context with line numbers.\n *\n *   2 | z = sqr(y, 10);\n * > 3 | x = wat();\n *     |     ^^^\n *   4 | y = 100;\n */\nfunction printLoc(loc, rawSource, contextLines) {\n    if (contextLines === void 0) { contextLines = 1; }\n    var firstIndex = Math.max(loc.first_line - 1 - contextLines, 0);\n    var lastIndex = loc.last_line + contextLines;\n    var sourceLines = rawSource.split(\"\\n\").slice(firstIndex, lastIndex);\n    var annotatedLines = sourceLines.map(function (line, i) {\n        var lineNumber = i + firstIndex + 1;\n        var inRange = lineNumber >= loc.first_line && lineNumber <= loc.last_line;\n        var gutter = inRange ? \">\" : \" \";\n        return gutter + \" \" + lineNumber + \" | \" + line;\n    });\n    if (loc.first_line === loc.last_line) {\n        var padding = utils_1.repeat(loc.first_column, \" \");\n        var underline = utils_1.repeat(loc.last_column - loc.first_column, \"^\");\n        var insertIndex = loc.first_line - firstIndex;\n        annotatedLines.splice(insertIndex, 0, \"    | \" + padding + underline);\n    }\n    return annotatedLines.join(\"\\n\");\n}\nexports.printLoc = printLoc;\nvar CompilerError = /** @class */ (function (_super) {\n    __extends(CompilerError, _super);\n    function CompilerError(message, loc, rawSource) {\n        var _this = _super.call(this, message) || this;\n        // TODO: Create an error message that encourages users to open an issue at\n        // https://github.com/captbaritone/eel-wasm/issues is they see this, and gives\n        // Them an easy way to attach the right context.\n        _this.sourceContext = printLoc(loc, rawSource);\n        _this.loc = loc;\n        return _this;\n    }\n    return CompilerError;\n}(Error));\nvar UserError = /** @class */ (function (_super) {\n    __extends(UserError, _super);\n    function UserError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return UserError;\n}(CompilerError));\nfunction createUserError(message, loc, rawSource) {\n    return new UserError(message, loc, rawSource);\n}\nexports.createUserError = createUserError;\nfunction createCompilerError(message, loc, rawSource) {\n    return new CompilerError(message, loc, rawSource);\n}\nexports.createCompilerError = createCompilerError;\n//# sourceMappingURL=errorUtils.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nexports.__esModule = true;\nvar parser_1 = require(\"./parser\");\nvar emitter_1 = require(\"./emitter\");\nvar encoding_1 = require(\"./encoding\");\nvar shims_1 = __importDefault(require(\"./shims\"));\nvar Utils = __importStar(require(\"./utils\"));\nvar wasmFunctions_1 = require(\"./wasmFunctions\");\nvar constants_1 = require(\"./constants\");\nfunction compileModule(_a) {\n    var pools = _a.pools, funcs = _a.functions, _b = _a.eelVersion, eelVersion = _b === void 0 ? 2 : _b, _c = _a.preParsed, preParsed = _c === void 0 ? false : _c;\n    if (Object.keys(pools).includes(\"shims\")) {\n        throw new Error('You may not name a pool \"shims\". \"shims\" is reserved for injected JavaScript functions.');\n    }\n    // Collect all the globals that we expect to get as imports.\n    var importedVars = [];\n    Object.entries(pools).forEach(function (_a) {\n        var _b = __read(_a, 2), poolName = _b[0], pool = _b[1];\n        pool.forEach(function (variableName) {\n            importedVars.push([poolName, variableName]);\n        });\n    });\n    // Ensure all the imported globals get the first ids.\n    var varResolver = new Utils.ScopedIdMap();\n    importedVars.forEach(function (_a) {\n        var _b = __read(_a, 2), poolName = _b[0], variableName = _b[1];\n        varResolver.get(poolName, variableName);\n    });\n    var functionImports = Object.entries(shims_1[\"default\"]).map(function (_a) {\n        var _b = __read(_a, 2), name = _b[0], func = _b[1];\n        return {\n            args: new Array(func.length).fill(null).map(function (_) { return encoding_1.VAL_TYPE.f64; }),\n            // Shims implicitly always return a number\n            returns: [encoding_1.VAL_TYPE.f64],\n            name: name\n        };\n    });\n    var localFuncOrder = [];\n    var moduleFuncs = [];\n    Object.entries(funcs).forEach(function (_a) {\n        var _b = __read(_a, 2), name = _b[0], _c = _b[1], pool = _c.pool, code = _c.code;\n        if (pools[pool] == null) {\n            var poolsList = Object.keys(pools);\n            if (poolsList.length === 0) {\n                throw new Error(\"The function \\\"\" + name + \"\\\" was declared as using a variable \" +\n                    (\"pool named \\\"\" + pool + \"\\\" but no pools were defined.\"));\n            }\n            throw new Error(\"The function \\\"\" + name + \"\\\" was declared as using a variable \" +\n                (\"pool named \\\"\" + pool + \"\\\" which is not among the variable \") +\n                \"pools defined. The defined variable pools are: \" +\n                (Utils.formatList(poolsList) + \".\"));\n        }\n        var ast = preParsed ? code : parser_1.parse(code);\n        if (typeof ast === \"string\") {\n            // TODO: Change the API so this can be enforced by types\n            throw new Error(\"Got passed unparsed code without setting the preParsed flag\");\n        }\n        if (ast.type !== \"SCRIPT\") {\n            throw new Error(\"Invalid AST\");\n        }\n        if (ast.body.length === 0) {\n            return;\n        }\n        var localVariables = [];\n        var context = {\n            resolveVar: function (name) {\n                // The `reg00`-`reg99` variables are special in that they are shared between all pools.\n                if (/^reg\\d\\d$/.test(name)) {\n                    return varResolver.get(null, name);\n                }\n                return varResolver.get(pool, name);\n            },\n            resolveLocal: function (type) {\n                // TODO: We could provide a way for the emitter to release a local\n                // variable so that we can reuse it, much in the same way a traditional\n                // compiler does in register allocation.\n                localVariables.push(type);\n                return localVariables.length - 1;\n            },\n            resolveFunc: function (name) {\n                // If this is a shim, return the shim index.\n                var shimdex = functionImports.findIndex(function (func) { return func.name === name; });\n                if (shimdex !== -1) {\n                    var call = encoding_1.op.call(shimdex);\n                    if (name === \"rand\" && eelVersion === 1) {\n                        return __spread(call, [encoding_1.op.f64_floor]);\n                    }\n                    return call;\n                }\n                // If it's not a shim and it's not a defined function, return null.\n                // The emitter will generate a nice error.\n                if (wasmFunctions_1.localFuncMap[name] == null) {\n                    return null;\n                }\n                var index = localFuncOrder.indexOf(name);\n                if (index === -1) {\n                    localFuncOrder.push(name);\n                    index = localFuncOrder.length - 1;\n                }\n                return encoding_1.op.call(index + functionImports.length);\n            },\n            rawSource: code\n        };\n        var binary = emitter_1.emit(ast, context);\n        moduleFuncs.push({\n            binary: binary,\n            exportName: name,\n            args: [],\n            returns: [],\n            localVariables: localVariables\n        });\n    });\n    var localFuncs = localFuncOrder.map(function (name) {\n        var func = wasmFunctions_1.localFuncMap[name];\n        // This check is technicaly redundant since we check inside resolveLocalFunc\n        // in the compiler context. It's here just to catch potential compiler bugs.\n        if (func == null) {\n            throw new Error(\"Undefined local function \\\"\" + name + \"\\\"\");\n        }\n        return func;\n    });\n    // Given a function definition, return a hashable string representation of its signature.\n    var getSignatureKey = function (func) {\n        return __spread(func.args, [\"|\"], func.returns).join(\"-\");\n    };\n    // https://webassembly.github.io/spec/core/binary/modules.html#type-section\n    var types = [];\n    var typeIndexByKey = new Map();\n    __spread(functionImports, localFuncs, moduleFuncs).forEach(function (func) {\n        var key = getSignatureKey(func);\n        if (typeIndexByKey.has(key)) {\n            return;\n        }\n        types.push(__spread([\n            encoding_1.FUNCTION_TYPE\n        ], encoding_1.encodeVector(func.args), encoding_1.encodeVector(func.returns)));\n        typeIndexByKey.set(key, types.length - 1);\n    });\n    function getTypeIndex(func) {\n        var key = getSignatureKey(func);\n        var typeIndex = typeIndexByKey.get(key);\n        if (typeIndex == null) {\n            throw new Error(\"Failed to get a type index for key \" + key);\n        }\n        return typeIndex;\n    }\n    // https://webassembly.github.io/spec/core/binary/modules.html#import-section\n    var imports = __spread(importedVars.map(function (_a) {\n        var _b = __read(_a, 2), namespace = _b[0], name = _b[1];\n        return __spread(encoding_1.encodeString(namespace), encoding_1.encodeString(name), [encoding_1.GLOBAL_TYPE, encoding_1.VAL_TYPE.f64, encoding_1.MUTABILITY[\"var\"]]);\n    }), functionImports.map(function (func, i) {\n        var typeIndex = getTypeIndex(func);\n        return __spread(encoding_1.encodeString(\"shims\"), encoding_1.encodeString(func.name), __spread([encoding_1.TYPE_IDX], encoding_1.unsignedLEB128(typeIndex)));\n    }));\n    // https://webassembly.github.io/spec/core/binary/modules.html#function-section\n    //\n    // > Functions are referenced through function indices, starting with the smallest\n    // > index not referencing a function import.\n    var functions = __spread(localFuncs, moduleFuncs).map(function (func) {\n        var typeIndex = getTypeIndex(func);\n        return encoding_1.unsignedLEB128(typeIndex);\n    });\n    var memories = [\n        __spread([\n            0x01\n        ], encoding_1.unsignedLEB128(constants_1.WASM_MEMORY_SIZE), encoding_1.unsignedLEB128(constants_1.WASM_MEMORY_SIZE)),\n    ];\n    // https://webassembly.github.io/spec/core/binary/modules.html#global-section\n    var globalCount = varResolver.size() - importedVars.length;\n    var globals = Utils.times(globalCount, function () {\n        return __spread([\n            encoding_1.VAL_TYPE.f64,\n            encoding_1.MUTABILITY[\"var\"]\n        ], encoding_1.op.f64_const(0), [\n            encoding_1.op.end,\n        ]);\n    });\n    // https://webassembly.github.io/spec/core/binary/modules.html#binary-exportsec\n    var xports = __spread(moduleFuncs).map(function (func, i) {\n        var funcIndex = i + functionImports.length + localFuncs.length;\n        return __spread(encoding_1.encodeString(func.exportName), [\n            encoding_1.EXPORT_TYPE.FUNC\n        ], encoding_1.unsignedLEB128(funcIndex));\n    });\n    /* Uncomment this to expose memory\n    xports.push([\n      ...encodeString(\"memory\"),\n      EXPORT_TYPE.MEMORY,\n      ...unsignedLEB128(0),\n    ]);\n    */\n    // https://webassembly.github.io/spec/core/binary/modules.html#code-section\n    var codes = __spread(localFuncs, moduleFuncs).map(function (func) {\n        var _a;\n        // TODO: We could collapose consecutive types here, or even move to a two\n        // pass approach where ids are resolved after the emitter is run.\n        var localTypes = ((_a = func.localVariables) !== null && _a !== void 0 ? _a : []).map(function (type) {\n            return __spread(encoding_1.unsignedLEB128(1), [type]);\n        });\n        // It's a bit odd that every other section is an array of arrays and this\n        // one is an array of vectors. The spec says this is so that when navigating\n        // the binary functions can be skipped efficiently.\n        return encoding_1.encodeVector(__spread(encoding_1.encodeVector(localTypes), func.binary, [encoding_1.op.end]));\n    });\n    return new Uint8Array(__spread(encoding_1.MAGIC, encoding_1.WASM_VERSION, encoding_1.encodeSection(encoding_1.SECTION.TYPE, types), encoding_1.encodeSection(encoding_1.SECTION.IMPORT, imports), encoding_1.encodeSection(encoding_1.SECTION.FUNC, functions), encoding_1.encodeSection(encoding_1.SECTION.MEMORY, memories), encoding_1.encodeSection(encoding_1.SECTION.GLOBAL, globals), encoding_1.encodeSection(encoding_1.SECTION.EXPORT, xports), encoding_1.encodeSection(encoding_1.SECTION.CODE, codes)));\n}\nexports.compileModule = compileModule;\n//# sourceMappingURL=compiler.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nexports.__esModule = true;\nvar encoding_1 = require(\"./encoding\");\nvar constants_1 = require(\"./constants\");\nexports.localFuncMap = {\n    sqr: {\n        args: [encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: __spread(encoding_1.op.local_get(0), encoding_1.op.local_get(0), [encoding_1.op.f64_mul])\n    },\n    bor: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: __spread(encoding_1.op.local_get(0), encoding_1.IS_NOT_ZEROISH, encoding_1.op.local_get(1), encoding_1.IS_NOT_ZEROISH, [\n            encoding_1.op.i32_or\n        ], encoding_1.op.i32_const(0), [\n            encoding_1.op.i32_ne,\n            encoding_1.op.f64_convert_i32_s,\n        ])\n    },\n    band: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: __spread(encoding_1.op.local_get(0), encoding_1.IS_NOT_ZEROISH, encoding_1.op.local_get(1), encoding_1.IS_NOT_ZEROISH, [\n            encoding_1.op.i32_and\n        ], encoding_1.op.i32_const(0), [\n            encoding_1.op.i32_ne,\n            encoding_1.op.f64_convert_i32_s,\n        ])\n    },\n    sign: {\n        args: [encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: __spread(encoding_1.op.f64_const(0), encoding_1.op.local_get(0), [\n            encoding_1.op.f64_lt\n        ], encoding_1.op.local_get(0), encoding_1.op.f64_const(0), [\n            encoding_1.op.f64_lt,\n            encoding_1.op.i32_sub,\n            encoding_1.op.f64_convert_i32_s,\n        ])\n    },\n    mod: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        // TODO: Simplify all this type coersion\n        binary: __spread(encoding_1.op.local_get(1), encoding_1.op.f64_const(0), [\n            encoding_1.op.f64_ne\n        ], encoding_1.op[\"if\"](encoding_1.BLOCK.f64), encoding_1.op.local_get(0), [\n            encoding_1.op.i64_trunc_s_f64\n        ], encoding_1.op.local_get(1), [\n            encoding_1.op.i64_trunc_s_f64,\n            encoding_1.op.i64_rem_s,\n            encoding_1.op.f64_convert_i64_s,\n            encoding_1.op[\"else\"]\n        ], encoding_1.op.f64_const(0), [\n            encoding_1.op.end,\n        ])\n    },\n    bitwiseOr: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: __spread(encoding_1.op.local_get(0), [\n            encoding_1.op.i64_trunc_s_f64\n        ], encoding_1.op.local_get(1), [\n            encoding_1.op.i64_trunc_s_f64,\n            encoding_1.op.i64_or,\n            encoding_1.op.f64_convert_i64_s,\n        ])\n    },\n    bitwiseAnd: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        binary: __spread(encoding_1.op.local_get(0), [\n            encoding_1.op.i64_trunc_s_f64\n        ], encoding_1.op.local_get(1), [\n            encoding_1.op.i64_trunc_s_f64,\n            encoding_1.op.i64_and,\n            encoding_1.op.f64_convert_i64_s,\n        ])\n    },\n    div: {\n        args: [encoding_1.VAL_TYPE.f64, encoding_1.VAL_TYPE.f64],\n        returns: [encoding_1.VAL_TYPE.f64],\n        localVariables: [encoding_1.VAL_TYPE.i32],\n        binary: __spread(encoding_1.op.local_get(1), encoding_1.op.f64_const(0), [\n            encoding_1.op.f64_ne\n        ], encoding_1.op[\"if\"](encoding_1.BLOCK.f64), encoding_1.op.local_get(0), encoding_1.op.local_get(1), [\n            encoding_1.op.f64_div,\n            encoding_1.op[\"else\"]\n        ], encoding_1.op.f64_const(0), [\n            encoding_1.op.end,\n        ])\n    },\n    // Takes a float buffer index and converts it to an int. Values out of range\n    // are returned as `-1`.\n    //\n    // NOTE: There's actually a subtle bug that exists in Milkdrop's Eel\n    // implementation, which we reproduce here.\n    //\n    // Wasm's `trunc()` rounds towards zero. This means that for index `-1` we\n    // will return zero, since: `roundTowardZero(-1 + EPSILON) == 0`\n    //\n    // A subsequent check handles negative indexes, so negative indexes > than\n    // `-1` are not affected.\n    _getBufferIndex: {\n        args: [encoding_1.VAL_TYPE.f64 /* 0: $index */],\n        returns: [encoding_1.VAL_TYPE.i32 /* $noramlizedIndex */],\n        localVariables: [\n            encoding_1.VAL_TYPE.f64,\n            encoding_1.VAL_TYPE.i32,\n        ],\n        binary: __spread(encoding_1.op.f64_const(encoding_1.EPSILON), encoding_1.op.local_get(0), [\n            encoding_1.op.f64_add\n        ], encoding_1.op.local_tee(1), [\n            encoding_1.op.i32_trunc_f64_s\n        ], encoding_1.op.local_set(2), encoding_1.op.i32_const(-1), encoding_1.op.local_get(2), encoding_1.op.i32_const(8), [\n            encoding_1.op.i32_mul\n        ], encoding_1.op.local_get(2), encoding_1.op.i32_const(0), [\n            // STACK: [-1, $truncated * 8, $truncated, 0]\n            encoding_1.op.i32_lt_s\n        ], encoding_1.op.local_get(2), encoding_1.op.i32_const(constants_1.BUFFER_SIZE - 1), [\n            encoding_1.op.i32_gt_s,\n            // STACK: [-1, $truncated * 8, <is index less than 0>, <is index more than MAX>]\n            encoding_1.op.i32_or,\n            // STACK: [-1, $truncated * 8, <is index out of range>]\n            encoding_1.op.select,\n        ])\n    }\n};\n//# sourceMappingURL=wasmFunctions.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar parser_1 = require(\"./parser\");\nexports.parse = parser_1.parse;\nvar compiler_1 = require(\"./compiler\");\nexports.compileModule = compiler_1.compileModule;\nvar shims_1 = __importDefault(require(\"./shims\"));\nexports.shims = shims_1[\"default\"];\nvar loader_1 = require(\"./loader\");\nexports.loadModule = loader_1.loadModule;\n//# sourceMappingURL=index.js.map","\nvar data = \"AGFzbQEAAAABPQpgAABgAXwBfGACfHwBfGACf38AYAR/f39/AGAJf39/f3x8fHx8AGADf399AGABfwF/YAJ/fwF/YAF+AX8CuBWMAQNlbnYFYWJvcnQABAhwaXhlbEVxcwtwZXJQaXhlbEVxcwAADHBpeGVsVmFyUG9vbAR3YXJwA3wBDHBpeGVsVmFyUG9vbAR6b29tA3wBDHBpeGVsVmFyUG9vbAd6b29tZXhwA3wBDHBpeGVsVmFyUG9vbAJjeAN8AQxwaXhlbFZhclBvb2wCY3kDfAEMcGl4ZWxWYXJQb29sAnN4A3wBDHBpeGVsVmFyUG9vbAJzeQN8AQxwaXhlbFZhclBvb2wCZHgDfAEMcGl4ZWxWYXJQb29sAmR5A3wBDHBpeGVsVmFyUG9vbANyb3QDfAEMcGl4ZWxWYXJQb29sA3JhZAN8AQxwaXhlbFZhclBvb2wDYW5nA3wBDHBpeGVsVmFyUG9vbAF4A3wBDHBpeGVsVmFyUG9vbAF5A3wBCHFWYXJQb29sAnExA3wBCHFWYXJQb29sAnEyA3wBCHFWYXJQb29sAnEzA3wBCHFWYXJQb29sAnE0A3wBCHFWYXJQb29sAnE1A3wBCHFWYXJQb29sAnE2A3wBCHFWYXJQb29sAnE3A3wBCHFWYXJQb29sAnE4A3wBCHFWYXJQb29sAnE5A3wBCHFWYXJQb29sA3ExMAN8AQhxVmFyUG9vbANxMTEDfAEIcVZhclBvb2wDcTEyA3wBCHFWYXJQb29sA3ExMwN8AQhxVmFyUG9vbANxMTQDfAEIcVZhclBvb2wDcTE1A3wBCHFWYXJQb29sA3ExNgN8AQhxVmFyUG9vbANxMTcDfAEIcVZhclBvb2wDcTE4A3wBCHFWYXJQb29sA3ExOQN8AQhxVmFyUG9vbANxMjADfAEIcVZhclBvb2wDcTIxA3wBCHFWYXJQb29sA3EyMgN8AQhxVmFyUG9vbANxMjMDfAEIcVZhclBvb2wDcTI0A3wBCHFWYXJQb29sA3EyNQN8AQhxVmFyUG9vbANxMjYDfAEIcVZhclBvb2wDcTI3A3wBCHFWYXJQb29sA3EyOAN8AQhxVmFyUG9vbANxMjkDfAEIcVZhclBvb2wDcTMwA3wBCHFWYXJQb29sA3EzMQN8AQhxVmFyUG9vbANxMzIDfAEIdFZhclBvb2wCdDEDfAEIdFZhclBvb2wCdDIDfAEIdFZhclBvb2wCdDMDfAEIdFZhclBvb2wCdDQDfAEIdFZhclBvb2wCdDUDfAEIdFZhclBvb2wCdDYDfAEIdFZhclBvb2wCdDcDfAEIdFZhclBvb2wCdDgDfAEKc2hhcGVQb29sMAN4XzADfAEKc2hhcGVQb29sMAN5XzADfAEKc2hhcGVQb29sMAVyYWRfMAN8AQpzaGFwZVBvb2wwBWFuZ18wA3wBCnNoYXBlUG9vbDADcl8wA3wBCnNoYXBlUG9vbDADZ18wA3wBCnNoYXBlUG9vbDADYl8wA3wBCnNoYXBlUG9vbDADYV8wA3wBCnNoYXBlUG9vbDAEcjJfMAN8AQpzaGFwZVBvb2wwBGcyXzADfAEKc2hhcGVQb29sMARiMl8wA3wBCnNoYXBlUG9vbDAEYTJfMAN8AQpzaGFwZVBvb2wwCmJvcmRlcl9yXzADfAEKc2hhcGVQb29sMApib3JkZXJfZ18wA3wBCnNoYXBlUG9vbDAKYm9yZGVyX2JfMAN8AQpzaGFwZVBvb2wwCmJvcmRlcl9hXzADfAEKc2hhcGVQb29sMA50aGlja291dGxpbmVfMAN8AQpzaGFwZVBvb2wwCnRleHR1cmVkXzADfAEKc2hhcGVQb29sMAp0ZXhfem9vbV8wA3wBCnNoYXBlUG9vbDAJdGV4X2FuZ18wA3wBCnNoYXBlUG9vbDAKYWRkaXRpdmVfMAN8AQpzaGFwZVBvb2wxA3hfMQN8AQpzaGFwZVBvb2wxA3lfMQN8AQpzaGFwZVBvb2wxBXJhZF8xA3wBCnNoYXBlUG9vbDEFYW5nXzEDfAEKc2hhcGVQb29sMQNyXzEDfAEKc2hhcGVQb29sMQNnXzEDfAEKc2hhcGVQb29sMQNiXzEDfAEKc2hhcGVQb29sMQNhXzEDfAEKc2hhcGVQb29sMQRyMl8xA3wBCnNoYXBlUG9vbDEEZzJfMQN8AQpzaGFwZVBvb2wxBGIyXzEDfAEKc2hhcGVQb29sMQRhMl8xA3wBCnNoYXBlUG9vbDEKYm9yZGVyX3JfMQN8AQpzaGFwZVBvb2wxCmJvcmRlcl9nXzEDfAEKc2hhcGVQb29sMQpib3JkZXJfYl8xA3wBCnNoYXBlUG9vbDEKYm9yZGVyX2FfMQN8AQpzaGFwZVBvb2wxDnRoaWNrb3V0bGluZV8xA3wBCnNoYXBlUG9vbDEKdGV4dHVyZWRfMQN8AQpzaGFwZVBvb2wxCnRleF96b29tXzEDfAEKc2hhcGVQb29sMQl0ZXhfYW5nXzEDfAEKc2hhcGVQb29sMQphZGRpdGl2ZV8xA3wBCnNoYXBlUG9vbDIDeF8yA3wBCnNoYXBlUG9vbDIDeV8yA3wBCnNoYXBlUG9vbDIFcmFkXzIDfAEKc2hhcGVQb29sMgVhbmdfMgN8AQpzaGFwZVBvb2wyA3JfMgN8AQpzaGFwZVBvb2wyA2dfMgN8AQpzaGFwZVBvb2wyA2JfMgN8AQpzaGFwZVBvb2wyA2FfMgN8AQpzaGFwZVBvb2wyBHIyXzIDfAEKc2hhcGVQb29sMgRnMl8yA3wBCnNoYXBlUG9vbDIEYjJfMgN8AQpzaGFwZVBvb2wyBGEyXzIDfAEKc2hhcGVQb29sMgpib3JkZXJfcl8yA3wBCnNoYXBlUG9vbDIKYm9yZGVyX2dfMgN8AQpzaGFwZVBvb2wyCmJvcmRlcl9iXzIDfAEKc2hhcGVQb29sMgpib3JkZXJfYV8yA3wBCnNoYXBlUG9vbDIOdGhpY2tvdXRsaW5lXzIDfAEKc2hhcGVQb29sMgp0ZXh0dXJlZF8yA3wBCnNoYXBlUG9vbDIKdGV4X3pvb21fMgN8AQpzaGFwZVBvb2wyCXRleF9hbmdfMgN8AQpzaGFwZVBvb2wyCmFkZGl0aXZlXzIDfAEKc2hhcGVQb29sMwN4XzMDfAEKc2hhcGVQb29sMwN5XzMDfAEKc2hhcGVQb29sMwVyYWRfMwN8AQpzaGFwZVBvb2wzBWFuZ18zA3wBCnNoYXBlUG9vbDMDcl8zA3wBCnNoYXBlUG9vbDMDZ18zA3wBCnNoYXBlUG9vbDMDYl8zA3wBCnNoYXBlUG9vbDMDYV8zA3wBCnNoYXBlUG9vbDMEcjJfMwN8AQpzaGFwZVBvb2wzBGcyXzMDfAEKc2hhcGVQb29sMwRiMl8zA3wBCnNoYXBlUG9vbDMEYTJfMwN8AQpzaGFwZVBvb2wzCmJvcmRlcl9yXzMDfAEKc2hhcGVQb29sMwpib3JkZXJfZ18zA3wBCnNoYXBlUG9vbDMKYm9yZGVyX2JfMwN8AQpzaGFwZVBvb2wzCmJvcmRlcl9hXzMDfAEKc2hhcGVQb29sMw50aGlja291dGxpbmVfMwN8AQpzaGFwZVBvb2wzCnRleHR1cmVkXzMDfAEKc2hhcGVQb29sMwp0ZXhfem9vbV8zA3wBCnNoYXBlUG9vbDMJdGV4X2FuZ18zA3wBCnNoYXBlUG9vbDMKYWRkaXRpdmVfMwN8AQMZGAgDBwkBAQICAQYFAAAAAAAAAAAAAAAAAAUDAQABBuwMigF8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt8AUQAAAAAAAAAAAt/AUEAC3wBRAAAAAAAAAAAC3wBRAAAAAAAAAAAC34BQgALB9kB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\";\n\nmodule.exports = () => data;\n","\"use strict\";\n\n{\n  const defineMath = (name, assignment) => {\n    var configurable = typeof assignment === \"function\" ? true : false;\n    var writable = typeof assignment === \"function\" ? true : false;\n    var enumerable = typeof assignment === \"function\" ? true : false;\n\n    Object.defineProperty(Math, name, {\n      configurable: configurable,\n      enumerable: enumerable,\n      writable: writable,\n      value: assignment\n    });\n  };\n\n  defineMath(\"DEG_PER_RAD\", Math.PI / 180);\n  defineMath(\"RAD_PER_DEG\", 180 / Math.PI);\n\n  const f32A = new Float32Array(1);\n\n  defineMath(\"scale\", function scale(x, inLow, inHigh, outLow, outHigh) {\n    if (arguments.length === 0) {\n      return NaN;\n    }\n\n    if (Number.isNaN(x) ||\n        Number.isNaN(inLow) ||\n        Number.isNaN(inHigh) ||\n        Number.isNaN(outLow) ||\n        Number.isNaN(outHigh)) {\n      return NaN;\n    }\n\n    if (x === Infinity ||\n        x === -Infinity) {\n      return x;\n    }\n\n    return (x - inLow) * (outHigh - outLow) /\n      (inHigh - inLow) + outLow;\n  });\n\n  defineMath(\"fscale\", function fscale(x, inLow, inHigh, outLow, outHigh) {\n    f32A[0] = Math.scale(x, inLow, inHigh, outLow, outHigh);\n    return f32A[0];\n  });\n\n  defineMath(\"clamp\", function clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  });\n\n  defineMath(\"radians\", function radians(degrees) {\n    return degrees * Math.DEG_PER_RAD;\n  });\n\n  defineMath(\"degrees\", function degrees(radians) {\n    return radians * Math.RAD_PER_DEG;\n  });\n}\n","/* eslint-disable */\r\nvar EPSILON = 0.00001;\r\n\r\nwindow.sqr = function sqr(x) {\r\n  return x * x;\r\n};\r\n\r\nwindow.sqrt = function sqrt(x) {\r\n  return Math.sqrt(Math.abs(x));\r\n};\r\n\r\nwindow.log10 = function log10(val) {\r\n  return Math.log(val) * Math.LOG10E;\r\n};\r\n\r\nwindow.sign = function sign(x) {\r\n  return x > 0 ? 1 : x < 0 ? -1 : 0;\r\n};\r\n\r\nwindow.rand = function rand(x) {\r\n  var xf = Math.floor(x);\r\n  if (xf < 1) {\r\n    return Math.random();\r\n  }\r\n  return Math.random() * xf;\r\n};\r\n\r\nwindow.randint = function randint(x) {\r\n  return Math.floor(rand(x));\r\n};\r\n\r\nwindow.bnot = function bnot(x) {\r\n  return Math.abs(x) < EPSILON ? 1 : 0;\r\n};\r\n\r\nfunction isFiniteNumber(num) {\r\n  return isFinite(num) && !isNaN(num);\r\n}\r\n\r\nwindow.pow = function pow(x, y) {\r\n  var z = Math.pow(x, y);\r\n  if (!isFiniteNumber(z)) {\r\n    // mostly from complex results\r\n    return 0;\r\n  }\r\n  return z;\r\n};\r\n\r\nwindow.div = function div(x, y) {\r\n  if (y === 0) {\r\n    return 0;\r\n  }\r\n  return x / y;\r\n};\r\n\r\nwindow.mod = function mod(x, y) {\r\n  if (y === 0) {\r\n    return 0;\r\n  }\r\n  var z = Math.floor(x) % Math.floor(y);\r\n  return z;\r\n};\r\n\r\nwindow.bitor = function bitor(x, y) {\r\n  var z = Math.floor(x) | Math.floor(y);\r\n  return z;\r\n};\r\n\r\nwindow.bitand = function bitand(x, y) {\r\n  var z = Math.floor(x) & Math.floor(y);\r\n  return z;\r\n};\r\n\r\nwindow.sigmoid = function sigmoid(x, y) {\r\n  var t = 1 + Math.exp(-x * y);\r\n  return Math.abs(t) > EPSILON ? 1.0 / t : 0;\r\n};\r\n\r\nwindow.bor = function bor(x, y) {\r\n  return Math.abs(x) > EPSILON || Math.abs(y) > EPSILON ? 1 : 0;\r\n};\r\n\r\nwindow.band = function band(x, y) {\r\n  return Math.abs(x) > EPSILON && Math.abs(y) > EPSILON ? 1 : 0;\r\n};\r\n\r\nwindow.equal = function equal(x, y) {\r\n  return Math.abs(x - y) < EPSILON ? 1 : 0;\r\n};\r\n\r\nwindow.above = function above(x, y) {\r\n  return x > y ? 1 : 0;\r\n};\r\n\r\nwindow.below = function below(x, y) {\r\n  return x < y ? 1 : 0;\r\n};\r\n\r\nwindow.ifcond = function ifcond(x, y, z) {\r\n  return Math.abs(x) > EPSILON ? y : z;\r\n};\r\n\r\nwindow.memcpy = function memcpy(megabuf, dst, src, len) {\r\n  let destOffset = dst;\r\n  let srcOffset = src;\r\n  let copyLen = len;\r\n\r\n  if (srcOffset < 0) {\r\n    copyLen += srcOffset;\r\n    destOffset -= srcOffset;\r\n    srcOffset = 0;\r\n  }\r\n\r\n  if (destOffset < 0) {\r\n    copyLen += destOffset;\r\n    srcOffset -= destOffset;\r\n    destOffset = 0;\r\n  }\r\n\r\n  if (copyLen > 0) {\r\n    megabuf.copyWithin(destOffset, srcOffset, copyLen);\r\n  }\r\n\r\n  return dst;\r\n};\r\n/* eslint-enable */\r\n","\"use strict\";\nexports.__esModule = true;\nfunction getLoc(mapper, destCol) {\n    var previousAnchor = { destCol: 1, srcCol: 1, srcLine: 1 };\n    // Find the last anchor with a destCol > destCol.\n    // Reversed: Find the first anchor with a destCol <= destCol\n    // TODO: Use binary search\n    mapper.forEach(function (anchor) {\n        if (anchor.destCol > destCol) {\n            return;\n        }\n        previousAnchor = anchor;\n    });\n    var remainingColumns = destCol - previousAnchor.destCol;\n    return {\n        column: previousAnchor.srcCol + remainingColumns,\n        line: previousAnchor.srcLine\n    };\n}\nexports.getLoc = getLoc;\n// Started with this function: https://github.com/WACUP/vis_milk2/blob/cc2e85aed44373d0b6b2115c0806ec035856860a/vis_milk2/state.cpp#L1532-L1557\nfunction preProcess(src) {\n    var mapper = [];\n    var srcLine = 1;\n    var dest = \"\";\n    var lineStart = 0;\n    var inlineComment = false;\n    var blockComment = false;\n    var emitAnchor = false;\n    for (var i = 0; i < src.length; i++) {\n        var char = src[i];\n        if (emitAnchor) {\n            var destCol = dest.length + 1;\n            var srcCol = i - lineStart + 1;\n            mapper.push({ destCol: destCol, srcCol: srcCol, srcLine: srcLine });\n            emitAnchor = false;\n        }\n        if (char === \"\\n\") {\n            inlineComment = false;\n            srcLine++;\n            lineStart = i + 1;\n            emitAnchor = true;\n        }\n        else if (char === \"\\r\" && src[i + 1] === \"\\n\") {\n            i++;\n            inlineComment = false;\n            srcLine++;\n            lineStart = i + 1;\n            emitAnchor = true;\n        }\n        else if (blockComment && char === \"*\" && src[i + 1] === \"/\") {\n            // TODO: What if we are not currently in a block comment?\n            blockComment = false;\n            i++;\n            emitAnchor = true;\n        }\n        else if ((char === \"\\\\\" && src[i + 1] === \"\\\\\") ||\n            (char === \"/\" && src[i + 1] === \"/\")) {\n            inlineComment = true;\n            i++;\n        }\n        else if (char === \"/\" && src[i + 1] === \"*\") {\n            blockComment = true;\n            i++;\n        }\n        else if (!inlineComment && !blockComment) {\n            dest += char;\n        }\n    }\n    return [dest, mapper];\n}\nexports.preProcess = preProcess;\n//# sourceMappingURL=preProcessor.js.map","// This module is in charge of selecting either the pre-built module or the one\n// that builds it a runtime with jison.\nvar parserImpl = require(\"../build/parser\");\n/*\nlet parserImpl = null;\n// Always use the dynamic one, while we figure out why the built one doens't work.\nif (process.env.NODE_ENV === \"production\") {\n  parserImpl = require(\"../build/parser\");\n} else {\n  parserImpl = require(\"../tools/buildParser\");\n}\n*/\nmodule.exports = { parse: parserImpl.parse };\n//# sourceMappingURL=envParser.js.map","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function () {\n    var o = function (k, v, o, l) { for (o = o || {}, l = k.length; l--; o[k[l]] = v)\n        ; return o; }, $V0 = [1, 18], $V1 = [1, 7], $V2 = [1, 19], $V3 = [1, 20], $V4 = [1, 14], $V5 = [1, 15], $V6 = [1, 16], $V7 = [1, 33], $V8 = [1, 31], $V9 = [1, 23], $Va = [1, 22], $Vb = [1, 24], $Vc = [1, 25], $Vd = [1, 26], $Ve = [1, 27], $Vf = [1, 28], $Vg = [1, 29], $Vh = [1, 30], $Vi = [5, 8, 15, 18, 20, 28, 29, 32, 33, 34, 35, 36, 37, 38], $Vj = [5, 15, 18], $Vk = [5, 12, 15, 17, 18, 24, 25, 28, 29, 30], $Vl = [1, 57], $Vm = [5, 8, 12, 15, 17, 18, 24, 25, 28, 29, 30], $Vn = [15, 18], $Vo = [5, 8, 15, 18, 28, 29, 38], $Vp = [5, 8, 15, 18, 28, 29, 32, 33, 38], $Vq = [5, 8, 15, 18, 28, 29, 32, 33, 34, 37, 38], $Vr = [5, 8, 15, 18, 28, 29, 32, 33, 34, 35, 36, 37, 38], $Vs = [5, 8, 15, 18], $Vt = [5, 8, 15, 18, 20, 22, 28, 29, 32, 33, 34, 35, 36, 37, 38];\n    var parser = { trace: function trace() { },\n        yy: {},\n        symbols_: { \"error\": 2, \"SCRIPT\": 3, \"expression\": 4, \"EOF\": 5, \"expressionsOptionalTrailingSemi\": 6, \"separator\": 7, \";\": 8, \"expressions\": 9, \"EXPRESSION_BLOCK\": 10, \"IDENTIFIER\": 11, \"IDENTIFIER_TOKEN\": 12, \"argument\": 13, \"arguments\": 14, \",\": 15, \"FUNCTION_CALL\": 16, \"(\": 17, \")\": 18, \"LOGICAL_EXPRESSION\": 19, \"LOGICAL_OPERATOR_TOKEN\": 20, \"ASSIGNMENT\": 21, \"ASSIGNMENT_OPERATOR_TOKEN\": 22, \"number\": 23, \"DIGITS_TOKEN\": 24, \".\": 25, \"NUMBER_LITERAL\": 26, \"UNARY_EXPRESSION\": 27, \"-\": 28, \"+\": 29, \"!\": 30, \"BINARY_EXPRESSION\": 31, \"*\": 32, \"/\": 33, \"%\": 34, \"&\": 35, \"|\": 36, \"^\": 37, \"COMPARISON_TOKEN\": 38, \"$accept\": 0, \"$end\": 1 },\n        terminals_: { 2: \"error\", 5: \"EOF\", 8: \";\", 12: \"IDENTIFIER_TOKEN\", 15: \",\", 17: \"(\", 18: \")\", 20: \"LOGICAL_OPERATOR_TOKEN\", 22: \"ASSIGNMENT_OPERATOR_TOKEN\", 24: \"DIGITS_TOKEN\", 25: \".\", 28: \"-\", 29: \"+\", 30: \"!\", 32: \"*\", 33: \"/\", 34: \"%\", 35: \"&\", 36: \"|\", 37: \"^\", 38: \"COMPARISON_TOKEN\" },\n        productions_: [0, [3, 2], [3, 2], [3, 1], [7, 1], [7, 2], [9, 2], [9, 3], [6, 1], [6, 2], [10, 1], [11, 1], [13, 1], [13, 1], [14, 1], [14, 3], [16, 3], [16, 4], [19, 3], [21, 3], [21, 3], [23, 1], [23, 2], [23, 3], [23, 2], [23, 1], [26, 1], [27, 2], [27, 2], [27, 2], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [31, 3], [4, 1], [4, 1], [4, 3], [4, 1], [4, 1], [4, 1], [4, 1], [4, 1], [4, 3]],\n        performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n            /* this == yyval */\n            var $0 = $$.length - 1;\n            switch (yystate) {\n                case 1:\n                    return { type: 'SCRIPT', body: [$$[$0 - 1]], loc: this._$ };\n                    break;\n                case 2:\n                    return { type: 'SCRIPT', body: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 3:\n                    return { type: 'SCRIPT', body: [], loc: this._$ };\n                    break;\n                case 6:\n                    this.$ = [$$[$0 - 1]];\n                    break;\n                case 7:\n                    this.$ = $$[$0 - 2].concat([$$[$0 - 1]]);\n                    break;\n                case 8:\n                    this.$ = $$[$0];\n                    break;\n                case 9:\n                    this.$ = $$[$0 - 1].concat([$$[$0]]);\n                    break;\n                case 10:\n                    this.$ = { type: 'EXPRESSION_BLOCK', body: $$[$0], loc: this._$ };\n                    break;\n                case 11:\n                    this.$ = { type: 'IDENTIFIER', value: $$[$0].toLowerCase(), loc: this._$ };\n                    break;\n                case 14:\n                    this.$ = [$$[$0]];\n                    break;\n                case 15:\n                    this.$ = $$[$0 - 2].concat([$$[$0]]);\n                    break;\n                case 16:\n                    this.$ = { type: 'CALL_EXPRESSION', callee: $$[$0 - 2], arguments: [], loc: this._$ };\n                    break;\n                case 17:\n                    this.$ = { type: 'CALL_EXPRESSION', callee: $$[$0 - 3], arguments: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 18:\n                    this.$ = { type: 'LOGICAL_EXPRESSION', left: $$[$0 - 2], right: $$[$0], operator: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 19:\n                case 20:\n                    this.$ = { type: 'ASSIGNMENT_EXPRESSION', left: $$[$0 - 2], operator: $$[$0 - 1], right: $$[$0], loc: this._$ };\n                    break;\n                case 21:\n                    this.$ = Number($$[$0]);\n                    break;\n                case 22:\n                    this.$ = Number($$[$0 - 1]);\n                    break;\n                case 23:\n                    this.$ = Number($$[$0 - 2] + $$[$0 - 1] + $$[$0]);\n                    break;\n                case 24:\n                    this.$ = Number('0' + $$[$0 - 1] + $$[$0]);\n                    break;\n                case 25:\n                    this.$ = 0;\n                    break;\n                case 26:\n                    this.$ = { type: 'NUMBER_LITERAL', value: $$[$0], loc: this._$ };\n                    break;\n                case 27:\n                case 28:\n                case 29:\n                    this.$ = { type: 'UNARY_EXPRESSION', value: $$[$0], operator: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 30:\n                case 31:\n                case 32:\n                case 33:\n                case 34:\n                case 35:\n                case 36:\n                case 37:\n                case 38:\n                    this.$ = { type: 'BINARY_EXPRESSION', left: $$[$0 - 2], right: $$[$0], operator: $$[$0 - 1], loc: this._$ };\n                    break;\n                case 41:\n                case 47:\n                    this.$ = $$[$0 - 1];\n                    break;\n            }\n        },\n        table: [{ 3: 1, 4: 2, 5: [1, 4], 6: 3, 9: 13, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 1: [3] }, { 5: [1, 21], 7: 32, 8: $V7, 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }, { 5: [1, 34] }, { 1: [2, 3] }, o($Vi, [2, 39]), o($Vi, [2, 40]), { 4: 35, 6: 37, 9: 13, 10: 36, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vi, [2, 42]), o($Vi, [2, 43]), o($Vi, [2, 44], { 22: [1, 38] }), o($Vi, [2, 45], { 17: [1, 40], 22: [1, 39] }), o($Vi, [2, 46]), o($Vj, [2, 8], { 31: 5, 27: 6, 26: 8, 21: 9, 16: 10, 11: 11, 19: 12, 23: 17, 4: 41, 12: $V0, 17: $V1, 24: $V2, 25: $V3, 28: $V4, 29: $V5, 30: $V6 }), { 4: 42, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 43, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 44, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vi, [2, 26]), o([5, 8, 15, 17, 18, 20, 22, 28, 29, 32, 33, 34, 35, 36, 37, 38], [2, 11]), o($Vi, [2, 21], { 25: [1, 45] }), o($Vi, [2, 25], { 24: [1, 46] }), { 1: [2, 1] }, { 4: 47, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 48, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 49, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 50, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 51, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 52, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 53, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 54, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 55, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 56, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vk, [2, 6], { 8: $Vl }), o($Vm, [2, 4]), { 1: [2, 2] }, { 7: 32, 8: $V7, 18: [1, 58], 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }, { 18: [1, 59] }, o($Vn, [2, 10]), { 4: 60, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 61, 11: 11, 12: $V0, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, { 4: 65, 6: 37, 9: 13, 10: 66, 11: 11, 12: $V0, 13: 64, 14: 63, 16: 10, 17: $V1, 18: [1, 62], 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vj, [2, 9], { 7: 67, 8: $V7, 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vo, [2, 27], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vo, [2, 28], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vo, [2, 29], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vi, [2, 22], { 24: [1, 68] }), o($Vi, [2, 24]), o($Vo, [2, 30], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vo, [2, 31], { 20: $V8, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vp, [2, 32], { 20: $V8, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vp, [2, 33], { 20: $V8, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg }), o($Vq, [2, 34], { 20: $V8, 35: $Ve, 36: $Vf }), o($Vr, [2, 35], { 20: $V8 }), o($Vr, [2, 36], { 20: $V8 }), o($Vq, [2, 37], { 20: $V8, 35: $Ve, 36: $Vf }), o($Vs, [2, 38], { 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vi, [2, 18]), o($Vm, [2, 5]), o($Vi, [2, 41]), o($Vi, [2, 47]), o($Vs, [2, 20], { 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vs, [2, 19], { 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vt, [2, 16]), { 15: [1, 70], 18: [1, 69] }, o($Vn, [2, 14]), o($Vn, [2, 12], { 7: 32, 8: $V7, 20: $V8, 28: $V9, 29: $Va, 32: $Vb, 33: $Vc, 34: $Vd, 35: $Ve, 36: $Vf, 37: $Vg, 38: $Vh }), o($Vn, [2, 13]), o($Vk, [2, 7], { 8: $Vl }), o($Vi, [2, 23]), o($Vt, [2, 17]), { 4: 65, 6: 37, 9: 13, 10: 66, 11: 11, 12: $V0, 13: 71, 16: 10, 17: $V1, 19: 12, 21: 9, 23: 17, 24: $V2, 25: $V3, 26: 8, 27: 6, 28: $V4, 29: $V5, 30: $V6, 31: 5 }, o($Vn, [2, 15])],\n        defaultActions: { 4: [2, 3], 21: [2, 1], 34: [2, 2] },\n        parseError: function parseError(str, hash) {\n            if (hash.recoverable) {\n                this.trace(str);\n            }\n            else {\n                var error = new Error(str);\n                error.hash = hash;\n                throw error;\n            }\n        },\n        parse: function parse(input) {\n            var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n            var args = lstack.slice.call(arguments, 1);\n            var lexer = Object.create(this.lexer);\n            var sharedState = { yy: {} };\n            for (var k in this.yy) {\n                if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n                    sharedState.yy[k] = this.yy[k];\n                }\n            }\n            lexer.setInput(input, sharedState.yy);\n            sharedState.yy.lexer = lexer;\n            sharedState.yy.parser = this;\n            if (typeof lexer.yylloc == 'undefined') {\n                lexer.yylloc = {};\n            }\n            var yyloc = lexer.yylloc;\n            lstack.push(yyloc);\n            var ranges = lexer.options && lexer.options.ranges;\n            if (typeof sharedState.yy.parseError === 'function') {\n                this.parseError = sharedState.yy.parseError;\n            }\n            else {\n                this.parseError = Object.getPrototypeOf(this).parseError;\n            }\n            function popStack(n) {\n                stack.length = stack.length - 2 * n;\n                vstack.length = vstack.length - n;\n                lstack.length = lstack.length - n;\n            }\n            _token_stack: var lex = function () {\n                var token;\n                token = lexer.lex() || EOF;\n                if (typeof token !== 'number') {\n                    token = self.symbols_[token] || token;\n                }\n                return token;\n            };\n            var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n            while (true) {\n                state = stack[stack.length - 1];\n                if (this.defaultActions[state]) {\n                    action = this.defaultActions[state];\n                }\n                else {\n                    if (symbol === null || typeof symbol == 'undefined') {\n                        symbol = lex();\n                    }\n                    action = table[state] && table[state][symbol];\n                }\n                if (typeof action === 'undefined' || !action.length || !action[0]) {\n                    var errStr = '';\n                    expected = [];\n                    for (p in table[state]) {\n                        if (this.terminals_[p] && p > TERROR) {\n                            expected.push('\\'' + this.terminals_[p] + '\\'');\n                        }\n                    }\n                    if (lexer.showPosition) {\n                        errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n                    }\n                    else {\n                        errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n                    }\n                    this.parseError(errStr, {\n                        text: lexer.match,\n                        token: this.terminals_[symbol] || symbol,\n                        line: lexer.yylineno,\n                        loc: yyloc,\n                        expected: expected\n                    });\n                }\n                if (action[0] instanceof Array && action.length > 1) {\n                    throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n                }\n                switch (action[0]) {\n                    case 1:\n                        stack.push(symbol);\n                        vstack.push(lexer.yytext);\n                        lstack.push(lexer.yylloc);\n                        stack.push(action[1]);\n                        symbol = null;\n                        if (!preErrorSymbol) {\n                            yyleng = lexer.yyleng;\n                            yytext = lexer.yytext;\n                            yylineno = lexer.yylineno;\n                            yyloc = lexer.yylloc;\n                            if (recovering > 0) {\n                                recovering--;\n                            }\n                        }\n                        else {\n                            symbol = preErrorSymbol;\n                            preErrorSymbol = null;\n                        }\n                        break;\n                    case 2:\n                        len = this.productions_[action[1]][1];\n                        yyval.$ = vstack[vstack.length - len];\n                        yyval._$ = {\n                            first_line: lstack[lstack.length - (len || 1)].first_line,\n                            last_line: lstack[lstack.length - 1].last_line,\n                            first_column: lstack[lstack.length - (len || 1)].first_column,\n                            last_column: lstack[lstack.length - 1].last_column\n                        };\n                        if (ranges) {\n                            yyval._$.range = [\n                                lstack[lstack.length - (len || 1)].range[0],\n                                lstack[lstack.length - 1].range[1]\n                            ];\n                        }\n                        r = this.performAction.apply(yyval, [\n                            yytext,\n                            yyleng,\n                            yylineno,\n                            sharedState.yy,\n                            action[1],\n                            vstack,\n                            lstack\n                        ].concat(args));\n                        if (typeof r !== 'undefined') {\n                            return r;\n                        }\n                        if (len) {\n                            stack = stack.slice(0, -1 * len * 2);\n                            vstack = vstack.slice(0, -1 * len);\n                            lstack = lstack.slice(0, -1 * len);\n                        }\n                        stack.push(this.productions_[action[1]][0]);\n                        vstack.push(yyval.$);\n                        lstack.push(yyval._$);\n                        newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n                        stack.push(newState);\n                        break;\n                    case 3:\n                        return true;\n                }\n            }\n            return true;\n        } };\n    /* generated by jison-lex 0.3.4 */\n    var lexer = (function () {\n        var lexer = ({\n            EOF: 1,\n            parseError: function parseError(str, hash) {\n                if (this.yy.parser) {\n                    this.yy.parser.parseError(str, hash);\n                }\n                else {\n                    throw new Error(str);\n                }\n            },\n            // resets the lexer, sets new input\n            setInput: function (input, yy) {\n                this.yy = yy || this.yy || {};\n                this._input = input;\n                this._more = this._backtrack = this.done = false;\n                this.yylineno = this.yyleng = 0;\n                this.yytext = this.matched = this.match = '';\n                this.conditionStack = ['INITIAL'];\n                this.yylloc = {\n                    first_line: 1,\n                    first_column: 0,\n                    last_line: 1,\n                    last_column: 0\n                };\n                if (this.options.ranges) {\n                    this.yylloc.range = [0, 0];\n                }\n                this.offset = 0;\n                return this;\n            },\n            // consumes and returns one char from the input\n            input: function () {\n                var ch = this._input[0];\n                this.yytext += ch;\n                this.yyleng++;\n                this.offset++;\n                this.match += ch;\n                this.matched += ch;\n                var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n                if (lines) {\n                    this.yylineno++;\n                    this.yylloc.last_line++;\n                }\n                else {\n                    this.yylloc.last_column++;\n                }\n                if (this.options.ranges) {\n                    this.yylloc.range[1]++;\n                }\n                this._input = this._input.slice(1);\n                return ch;\n            },\n            // unshifts one char (or a string) into the input\n            unput: function (ch) {\n                var len = ch.length;\n                var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n                this._input = ch + this._input;\n                this.yytext = this.yytext.substr(0, this.yytext.length - len);\n                //this.yyleng -= len;\n                this.offset -= len;\n                var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n                this.match = this.match.substr(0, this.match.length - 1);\n                this.matched = this.matched.substr(0, this.matched.length - 1);\n                if (lines.length - 1) {\n                    this.yylineno -= lines.length - 1;\n                }\n                var r = this.yylloc.range;\n                this.yylloc = {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.yylineno + 1,\n                    first_column: this.yylloc.first_column,\n                    last_column: lines ?\n                        (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                            + oldLines[oldLines.length - lines.length].length - lines[0].length :\n                        this.yylloc.first_column - len\n                };\n                if (this.options.ranges) {\n                    this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n                }\n                this.yyleng = this.yytext.length;\n                return this;\n            },\n            // When called from action, caches matched text and appends it on next action\n            more: function () {\n                this._more = true;\n                return this;\n            },\n            // When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\n            reject: function () {\n                if (this.options.backtrack_lexer) {\n                    this._backtrack = true;\n                }\n                else {\n                    return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                        text: \"\",\n                        token: null,\n                        line: this.yylineno\n                    });\n                }\n                return this;\n            },\n            // retain first n characters of the match\n            less: function (n) {\n                this.unput(this.match.slice(n));\n            },\n            // displays already matched input, i.e. for error messages\n            pastInput: function () {\n                var past = this.matched.substr(0, this.matched.length - this.match.length);\n                return (past.length > 20 ? '...' : '') + past.substr(-20).replace(/\\n/g, \"\");\n            },\n            // displays upcoming input, i.e. for error messages\n            upcomingInput: function () {\n                var next = this.match;\n                if (next.length < 20) {\n                    next += this._input.substr(0, 20 - next.length);\n                }\n                return (next.substr(0, 20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n            },\n            // displays the character position where the lexing error occurred, i.e. for error messages\n            showPosition: function () {\n                var pre = this.pastInput();\n                var c = new Array(pre.length + 1).join(\"-\");\n                return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n            },\n            // test the lexed token: return FALSE when not a match, otherwise return token\n            test_match: function (match, indexed_rule) {\n                var token, lines, backup;\n                if (this.options.backtrack_lexer) {\n                    // save context\n                    backup = {\n                        yylineno: this.yylineno,\n                        yylloc: {\n                            first_line: this.yylloc.first_line,\n                            last_line: this.last_line,\n                            first_column: this.yylloc.first_column,\n                            last_column: this.yylloc.last_column\n                        },\n                        yytext: this.yytext,\n                        match: this.match,\n                        matches: this.matches,\n                        matched: this.matched,\n                        yyleng: this.yyleng,\n                        offset: this.offset,\n                        _more: this._more,\n                        _input: this._input,\n                        yy: this.yy,\n                        conditionStack: this.conditionStack.slice(0),\n                        done: this.done\n                    };\n                    if (this.options.ranges) {\n                        backup.yylloc.range = this.yylloc.range.slice(0);\n                    }\n                }\n                lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n                if (lines) {\n                    this.yylineno += lines.length;\n                }\n                this.yylloc = {\n                    first_line: this.yylloc.last_line,\n                    last_line: this.yylineno + 1,\n                    first_column: this.yylloc.last_column,\n                    last_column: lines ?\n                        lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                        this.yylloc.last_column + match[0].length\n                };\n                this.yytext += match[0];\n                this.match += match[0];\n                this.matches = match;\n                this.yyleng = this.yytext.length;\n                if (this.options.ranges) {\n                    this.yylloc.range = [this.offset, this.offset += this.yyleng];\n                }\n                this._more = false;\n                this._backtrack = false;\n                this._input = this._input.slice(match[0].length);\n                this.matched += match[0];\n                token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n                if (this.done && this._input) {\n                    this.done = false;\n                }\n                if (token) {\n                    return token;\n                }\n                else if (this._backtrack) {\n                    // recover context\n                    for (var k in backup) {\n                        this[k] = backup[k];\n                    }\n                    return false; // rule action called reject() implying the next rule should be tested instead.\n                }\n                return false;\n            },\n            // return next match in input\n            next: function () {\n                if (this.done) {\n                    return this.EOF;\n                }\n                if (!this._input) {\n                    this.done = true;\n                }\n                var token, match, tempMatch, index;\n                if (!this._more) {\n                    this.yytext = '';\n                    this.match = '';\n                }\n                var rules = this._currentRules();\n                for (var i = 0; i < rules.length; i++) {\n                    tempMatch = this._input.match(this.rules[rules[i]]);\n                    if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                        match = tempMatch;\n                        index = i;\n                        if (this.options.backtrack_lexer) {\n                            token = this.test_match(tempMatch, rules[i]);\n                            if (token !== false) {\n                                return token;\n                            }\n                            else if (this._backtrack) {\n                                match = false;\n                                continue; // rule action called reject() implying a rule MISmatch.\n                            }\n                            else {\n                                // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                                return false;\n                            }\n                        }\n                        else if (!this.options.flex) {\n                            break;\n                        }\n                    }\n                }\n                if (match) {\n                    token = this.test_match(match, rules[index]);\n                    if (token !== false) {\n                        return token;\n                    }\n                    // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                    return false;\n                }\n                if (this._input === \"\") {\n                    return this.EOF;\n                }\n                else {\n                    return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                        text: \"\",\n                        token: null,\n                        line: this.yylineno\n                    });\n                }\n            },\n            // return next match that has a token\n            lex: function lex() {\n                var r = this.next();\n                if (r) {\n                    return r;\n                }\n                else {\n                    return this.lex();\n                }\n            },\n            // activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\n            begin: function begin(condition) {\n                this.conditionStack.push(condition);\n            },\n            // pop the previously active lexer condition state off the condition stack\n            popState: function popState() {\n                var n = this.conditionStack.length - 1;\n                if (n > 0) {\n                    return this.conditionStack.pop();\n                }\n                else {\n                    return this.conditionStack[0];\n                }\n            },\n            // produce the lexer rule set which is active for the currently active lexer condition state\n            _currentRules: function _currentRules() {\n                if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n                    return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n                }\n                else {\n                    return this.conditions[\"INITIAL\"].rules;\n                }\n            },\n            // return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\n            topState: function topState(n) {\n                n = this.conditionStack.length - 1 - Math.abs(n || 0);\n                if (n >= 0) {\n                    return this.conditionStack[n];\n                }\n                else {\n                    return \"INITIAL\";\n                }\n            },\n            // alias for begin(condition)\n            pushState: function pushState(condition) {\n                this.begin(condition);\n            },\n            // return the number of states currently on the stack\n            stateStackSize: function stateStackSize() {\n                return this.conditionStack.length;\n            },\n            options: {},\n            performAction: function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {\n                var YYSTATE = YY_START;\n                switch ($avoiding_name_collisions) {\n                    case 0: /* skip whitespace */\n                        break;\n                    case 1:\n                        return 24;\n                        break;\n                    case 2:\n                        return 38;\n                        break;\n                    case 3:\n                        return 22;\n                        break;\n                    case 4:\n                        return 20;\n                        break;\n                    case 5:\n                        return 12;\n                        break;\n                    case 6:\n                        return 5;\n                        break;\n                    case 7:\n                        return yy_.yytext[0];\n                        break;\n                }\n            },\n            rules: [/^(?:\\s+)/, /^(?:[0-9]+)/, /^(?:(==|!=|<=|>=|<|>))/, /^(?:[+\\-*/%]?=)/, /^(?:(\\&\\&)|\\|\\|)/, /^(?:[a-zA-Z_][a-zA-Z0-9._]*)/, /^(?:$)/, /^(?:.)/],\n            conditions: { \"INITIAL\": { \"rules\": [0, 1, 2, 3, 4, 5, 6, 7], \"inclusive\": true } }\n        });\n        return lexer;\n    })();\n    parser.lexer = lexer;\n    function Parser() {\n        this.yy = {};\n    }\n    Parser.prototype = parser;\n    parser.Parser = Parser;\n    return new Parser;\n})();\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\n    exports.parser = parser;\n    exports.Parser = parser.Parser;\n    exports.parse = function () { return parser.parse.apply(parser, arguments); };\n    exports.main = function () { };\n    if (typeof module !== 'undefined' && require.main === module) {\n        exports.main(process.argv.slice(1));\n    }\n}\n//# sourceMappingURL=parser.js.map","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar CHILDREN = {\n    ASSIGNMENT_EXPRESSION: [\n        { type: \"NODE\", key: \"right\" },\n    ],\n    SCRIPT: [{ type: \"ARRAY\", key: \"body\" }],\n    EXPRESSION_BLOCK: [{ type: \"ARRAY\", key: \"body\" }],\n    UNARY_EXPRESSION: [{ type: \"NODE\", key: \"value\" }],\n    NUMBER_LITERAL: [],\n    IDENTIFIER: [],\n    CALL_EXPRESSION: [\n        { type: \"ARRAY\", key: \"arguments\" },\n        { type: \"NODE\", key: \"callee\" },\n    ],\n    BINARY_EXPRESSION: [\n        { type: \"NODE\", key: \"left\" },\n        { type: \"NODE\", key: \"right\" },\n    ],\n    LOGICAL_EXPRESSION: [\n        { type: \"NODE\", key: \"left\" },\n        { type: \"NODE\", key: \"right\" },\n    ]\n};\nfunction mapAst(ast, cb) {\n    var children = CHILDREN[ast.type];\n    var newAst = ast;\n    if (children == null) {\n        throw new Error(\"Unknown children definition for \" + ast.type);\n    }\n    children.forEach(function (child) {\n        var _a, _b;\n        if (child.type === \"NODE\") {\n            var orignalChild = ast[child.key];\n            var newChild = mapAst(orignalChild, cb);\n            if (newChild !== orignalChild) {\n                newAst = __assign(__assign({}, newAst), (_a = {}, _a[child.key] = newChild, _a));\n            }\n        }\n        else if (child.type === \"ARRAY\") {\n            var orignalChildren = ast[child.key];\n            var newChildren_1 = orignalChildren.map(function (originalChild) {\n                return mapAst(originalChild, cb);\n            });\n            var childrenHaveChanged = orignalChildren.some(function (child, i) { return child !== newChildren_1[i]; });\n            if (childrenHaveChanged) {\n                newAst = __assign(__assign({}, newAst), (_b = {}, _b[child.key] = newChildren_1, _b));\n            }\n        }\n    });\n    return cb(newAst);\n}\nexports.mapAst = mapAst;\n//# sourceMappingURL=astUtils.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar encoding_1 = require(\"./encoding\");\nvar shims_1 = __importDefault(require(\"./shims\"));\nvar errorUtils_1 = require(\"./errorUtils\");\nvar wasmFunctions_1 = require(\"./wasmFunctions\");\nvar utils_1 = require(\"./utils\");\nvar constants_1 = require(\"./constants\");\nfunction emit(ast, context) {\n    switch (ast.type) {\n        case \"SCRIPT\": {\n            var body = ast.body.map(function (statement, i) {\n                return __spread(emit(statement, context), [encoding_1.op.drop]);\n            });\n            return utils_1.flatten(body);\n        }\n        case \"EXPRESSION_BLOCK\": {\n            return emitExpressionBlock(ast.body, context);\n        }\n        case \"BINARY_EXPRESSION\": {\n            var left = emit(ast.left, context);\n            var right = emit(ast.right, context);\n            var operatorToOps = {\n                \"+\": [encoding_1.op.f64_add],\n                \"-\": [encoding_1.op.f64_sub],\n                \"*\": [encoding_1.op.f64_mul],\n                \"/\": context.resolveFunc(\"div\"),\n                \"%\": context.resolveFunc(\"mod\"),\n                \"|\": context.resolveFunc(\"bitwiseOr\"),\n                \"&\": context.resolveFunc(\"bitwiseAnd\"),\n                \"^\": context.resolveFunc(\"pow\"),\n                // Comparison operators\n                \"==\": __spread([encoding_1.op.f64_sub], encoding_1.IS_ZEROISH, [encoding_1.op.f64_convert_i32_s]),\n                \"!=\": __spread([encoding_1.op.f64_sub], encoding_1.IS_NOT_ZEROISH, [encoding_1.op.f64_convert_i32_s]),\n                \"<\": [encoding_1.op.f64_lt, encoding_1.op.f64_convert_i32_s],\n                \">\": [encoding_1.op.f64_gt, encoding_1.op.f64_convert_i32_s],\n                \"<=\": [encoding_1.op.f64_le, encoding_1.op.f64_convert_i32_s],\n                \">=\": [encoding_1.op.f64_ge, encoding_1.op.f64_convert_i32_s]\n            };\n            var code = operatorToOps[ast.operator];\n            if (code == null) {\n                throw errorUtils_1.createCompilerError(\"Unknown binary expression operator \" + ast.operator, ast.loc, context.rawSource);\n            }\n            return __spread(left, right, code);\n        }\n        case \"CALL_EXPRESSION\": {\n            var functionName_1 = ast.callee.value;\n            // Destructure this so that TypeScript knows it won't get mutated.\n            var argList_1 = ast.arguments;\n            var assertArity = function (arity) {\n                if (argList_1.length < arity) {\n                    throw errorUtils_1.createUserError(\"Too few arguments passed to `\" + functionName_1 + \"()`. Expected \" + arity + \" but only got \" + argList_1.length + \".\", ast.loc, context.rawSource);\n                }\n                if (argList_1.length > arity) {\n                    throw errorUtils_1.createUserError(\"Too many arguments passed to `\" + functionName_1 + \"()`. Expected \" + arity + \" but got \" + argList_1.length + \".\", argList_1[arity].loc, context.rawSource);\n                }\n            };\n            // Some functions have special behavior\n            switch (functionName_1) {\n                case \"exec2\":\n                    assertArity(2);\n                    return emitExpressionBlock(ast.arguments, context);\n                case \"exec3\":\n                    assertArity(3);\n                    return emitExpressionBlock(ast.arguments, context);\n                case \"if\":\n                    assertArity(3);\n                    var _a = __read(ast.arguments, 3), test_1 = _a[0], consiquent = _a[1], alternate = _a[2];\n                    return emitConditional(test_1, consiquent, alternate, context);\n                case \"while\":\n                    assertArity(1);\n                    return emitWhile(ast.arguments[0], context);\n                case \"loop\":\n                    assertArity(2);\n                    return emitLoop(ast.arguments[0], ast.arguments[1], context);\n                case \"megabuf\":\n                case \"gmegabuf\":\n                    assertArity(1);\n                    var index = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n                    return __spread(emit(ast.arguments[0], context), context.resolveFunc(\"_getBufferIndex\"), encoding_1.op.local_tee(index), encoding_1.op.i32_const(-1), [\n                        encoding_1.op.i32_ne\n                    ], encoding_1.op[\"if\"](encoding_1.BLOCK.f64), encoding_1.op.local_get(index), encoding_1.op.f64_load(3, emitAddMemoryOffset(functionName_1)), [\n                        encoding_1.op[\"else\"]\n                    ], encoding_1.op.f64_const(0), [\n                        encoding_1.op.end,\n                    ]);\n                case \"assign\":\n                    assertArity(2);\n                    var variableIdentifier = ast.arguments[0];\n                    if (variableIdentifier.type != \"IDENTIFIER\") {\n                        throw errorUtils_1.createUserError(\"Expected the first argument of `assign()` to be an identifier.\", variableIdentifier.loc, context.rawSource);\n                    }\n                    var resolvedName = context.resolveVar(variableIdentifier.value);\n                    return __spread(emit(ast.arguments[1], context), encoding_1.op.global_set(resolvedName), encoding_1.op.global_get(resolvedName));\n            }\n            // Function calls which can be linlined\n            var args = utils_1.flatten(ast.arguments.map(function (node) { return emit(node, context); }));\n            // This is just a continuation of the above switch statement, but it's for functions which all parse their args the same.\n            switch (functionName_1) {\n                case \"abs\":\n                    assertArity(1);\n                    return __spread(args, [encoding_1.op.f64_abs]);\n                case \"sqrt\":\n                    assertArity(1);\n                    return __spread(args, [encoding_1.op.f64_abs, encoding_1.op.f64_sqrt]);\n                case \"int\":\n                    assertArity(1);\n                    return __spread(args, [encoding_1.op.f64_floor]);\n                case \"min\":\n                    assertArity(2);\n                    return __spread(args, [encoding_1.op.f64_min]);\n                case \"max\":\n                    assertArity(2);\n                    return __spread(args, [encoding_1.op.f64_max]);\n                case \"above\":\n                    assertArity(2);\n                    return __spread(args, [encoding_1.op.f64_gt, encoding_1.op.f64_convert_i32_s]);\n                case \"below\":\n                    assertArity(2);\n                    return __spread(args, [encoding_1.op.f64_lt, encoding_1.op.f64_convert_i32_s]);\n                case \"equal\":\n                    assertArity(2);\n                    return __spread(args, [encoding_1.op.f64_sub], encoding_1.IS_ZEROISH, [encoding_1.op.f64_convert_i32_s]);\n                case \"bnot\":\n                    assertArity(1);\n                    return __spread(args, encoding_1.IS_ZEROISH, [encoding_1.op.f64_convert_i32_s]);\n                case \"floor\":\n                    assertArity(1);\n                    return __spread(args, [encoding_1.op.f64_floor]);\n                case \"ceil\":\n                    assertArity(1);\n                    return __spread(args, [encoding_1.op.f64_ceil]);\n            }\n            var invocation = context.resolveFunc(functionName_1);\n            if (invocation == null ||\n                // Ensure this isn't a private function. This is a bit awkward becuase\n                // Eel does implement some _ functions but while they are _intended_ to be\n                // private, they accidentally expose them. We should find a cleaner way\n                // to defining user accessible functions vs utility functions used by\n                // the compiler.\n                functionName_1.startsWith(\"_\")) {\n                throw errorUtils_1.createUserError(\"\\\"\" + functionName_1 + \"\\\" is not defined.\", ast.callee.loc, context.rawSource);\n            }\n            if (shims_1[\"default\"][functionName_1] != null) {\n                assertArity(shims_1[\"default\"][functionName_1].length);\n            }\n            else if (wasmFunctions_1.localFuncMap[functionName_1] != null) {\n                assertArity(wasmFunctions_1.localFuncMap[functionName_1].args.length);\n            }\n            else {\n                throw errorUtils_1.createCompilerError(\"Missing arity information for the function `\" + functionName_1 + \"()`\", ast.callee.loc, context.rawSource);\n            }\n            return __spread(args, invocation);\n        }\n        case \"ASSIGNMENT_EXPRESSION\": {\n            var left = ast.left;\n            var rightCode = emit(ast.right, context);\n            var mutationCode = getAssignmentOperatorMutation(ast, context);\n            if (left.type === \"IDENTIFIER\") {\n                var resolvedName = context.resolveVar(left.value);\n                // TODO: In lots of cases we don't care about the return value. In those\n                // cases we should try to find a way to omit the `get/drop` combo.\n                // Peephole optimization seems to be the conventional way to do this.\n                // https://en.wikipedia.org/wiki/Peephole_optimization\n                var get = encoding_1.op.global_get(resolvedName);\n                var set = encoding_1.op.global_set(resolvedName);\n                // `=` is a special case in that it does not need the original value.\n                if (mutationCode === null) {\n                    return __spread(rightCode, set, get);\n                }\n                return __spread(get, rightCode, mutationCode, set, get);\n            }\n            if (left.type !== \"CALL_EXPRESSION\") {\n                throw errorUtils_1.createCompilerError(\n                // @ts-ignore This is a guard in case the parser has an error\n                \"Unexpected left hand side type for assignment: \" + left.type, ast.loc, context.rawSource);\n            }\n            // Special assignment case for `megabuf(n) = e` and `gmegabuf(n) = e`.\n            var localIndex = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n            if (left.arguments.length !== 1) {\n                throw errorUtils_1.createUserError(\"Expected 1 argument when assinging to a buffer but got \" + left.arguments.length + \".\", left.arguments.length === 0 ? left.loc : left.arguments[1].loc, context.rawSource);\n            }\n            var bufferName = left.callee.value;\n            if (bufferName !== \"gmegabuf\" && bufferName !== \"megabuf\") {\n                throw errorUtils_1.createUserError(\"The only function calls which may be assigned to are `gmegabuf()` and `megabuf()`.\", left.callee.loc, context.rawSource);\n            }\n            var addOffset = emitAddMemoryOffset(bufferName);\n            if (mutationCode === null) {\n                // TODO: Move this to wasmFunctions once we know how to call functions\n                // from within functions (need to get the offset).\n                var unnormalizedIndex = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n                var rightValue_1 = context.resolveLocal(encoding_1.VAL_TYPE.f64);\n                return __spread(rightCode, encoding_1.op.local_set(rightValue_1), emit(left.arguments[0], context), context.resolveFunc(\"_getBufferIndex\"), encoding_1.op.local_tee(unnormalizedIndex), encoding_1.op.i32_const(0), [\n                    encoding_1.op.i32_lt_s\n                ], encoding_1.op[\"if\"](encoding_1.BLOCK.f64), encoding_1.op.f64_const(0), [\n                    encoding_1.op[\"else\"]\n                ], encoding_1.op.local_get(unnormalizedIndex), encoding_1.op.local_tee(localIndex), encoding_1.op.local_get(rightValue_1), encoding_1.op.f64_store(3, addOffset), encoding_1.op.local_get(rightValue_1), [\n                    // STACK: [Right/Buffer value]\n                    encoding_1.op.end,\n                ]);\n            }\n            // TODO: Move this to wasmFunctions once we know how to call functions\n            // from within functions (need to get the offset).\n            var index = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n            var inBounds = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n            var rightValue = context.resolveLocal(encoding_1.VAL_TYPE.f64);\n            var result = context.resolveLocal(encoding_1.VAL_TYPE.f64);\n            return __spread(rightCode, encoding_1.op.local_set(rightValue), emit(left.arguments[0], context), context.resolveFunc(\"_getBufferIndex\"), encoding_1.op.local_tee(index), encoding_1.op.i32_const(-1), [\n                encoding_1.op.i32_ne\n            ], encoding_1.op.local_tee(inBounds), encoding_1.op[\"if\"](encoding_1.BLOCK.f64), encoding_1.op.local_get(index), encoding_1.op.f64_load(3, addOffset), [\n                encoding_1.op[\"else\"]\n            ], encoding_1.op.f64_const(0), [\n                encoding_1.op.end\n            ], encoding_1.op.local_get(rightValue), mutationCode, encoding_1.op.local_tee(result), encoding_1.op.local_get(inBounds), encoding_1.op[\"if\"](encoding_1.BLOCK[\"void\"]), encoding_1.op.local_get(index), encoding_1.op.local_get(result), encoding_1.op.f64_store(3, addOffset), [\n                encoding_1.op.end,\n            ]);\n        }\n        case \"LOGICAL_EXPRESSION\": {\n            var left = emit(ast.left, context);\n            var right = emit(ast.right, context);\n            var behaviorMap = {\n                \"&&\": {\n                    comparison: encoding_1.IS_ZEROISH,\n                    shortCircutValue: 0\n                },\n                \"||\": {\n                    comparison: encoding_1.IS_NOT_ZEROISH,\n                    shortCircutValue: 1\n                }\n            };\n            var behavior = behaviorMap[ast.operator];\n            if (behavior == null) {\n                throw errorUtils_1.createCompilerError(\"Unknown logical expression operator \" + ast.operator, ast.loc, context.rawSource);\n            }\n            var comparison = behavior.comparison, shortCircutValue = behavior.shortCircutValue;\n            return __spread(left, comparison, encoding_1.op[\"if\"](encoding_1.BLOCK.f64), encoding_1.op.f64_const(shortCircutValue), [\n                encoding_1.op[\"else\"]\n            ], right, encoding_1.IS_NOT_ZEROISH, [\n                encoding_1.op.f64_convert_i32_s,\n                encoding_1.op.end,\n            ]);\n        }\n        case \"UNARY_EXPRESSION\": {\n            var value = emit(ast.value, context);\n            var operatorToCode = {\n                \"-\": [encoding_1.op.f64_neg],\n                \"+\": [],\n                \"!\": __spread(encoding_1.IS_ZEROISH, [encoding_1.op.f64_convert_i32_s])\n            };\n            var code = operatorToCode[ast.operator];\n            if (code == null) {\n                throw errorUtils_1.createCompilerError(\"Unknown logical unary operator \" + ast.operator, ast.loc, context.rawSource);\n            }\n            return __spread(value, code);\n        }\n        case \"IDENTIFIER\":\n            var variableName = ast.value;\n            // TODO: It's a bit odd that not every IDENTIFIER node gets emitted. In\n            // function calls and assignments we just peek at the name and never emit\n            // it.\n            return encoding_1.op.global_get(context.resolveVar(variableName));\n        case \"NUMBER_LITERAL\":\n            return encoding_1.op.f64_const(ast.value);\n        default:\n            throw errorUtils_1.createCompilerError(\n            // @ts-ignore This runtime check is here because the caller may not be type-checked\n            \"Unknown AST node type \" + ast.type, \n            // @ts-ignore This runtime check is here because the caller may not be type-checked\n            ast.loc, context.rawSource);\n    }\n}\nexports.emit = emit;\nfunction emitExpressionBlock(body, context) {\n    var statements = body.map(function (statement, i) {\n        return emit(statement, context);\n    });\n    return utils_1.flatten(utils_1.arrayJoin(statements, [encoding_1.op.drop]));\n}\nfunction emitWhile(expression, context) {\n    var body = emit(expression, context);\n    var iterationCount = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n    return __spread(encoding_1.op.i32_const(0), encoding_1.op.local_set(iterationCount), encoding_1.op.loop(encoding_1.BLOCK[\"void\"]), encoding_1.op.local_get(iterationCount), encoding_1.op.i32_const(1), [\n        encoding_1.op.i32_add\n    ], encoding_1.op.local_tee(iterationCount), encoding_1.op.i32_const(constants_1.MAX_LOOP_COUNT), [\n        encoding_1.op.i32_lt_u\n    ], body, encoding_1.IS_NOT_ZEROISH, [\n        // STACK: [loop in range, body is truthy]\n        encoding_1.op.i32_and\n    ], encoding_1.op.br_if(0), [\n        encoding_1.op.end\n    ], encoding_1.op.f64_const(0));\n}\nfunction emitLoop(count, expression, context) {\n    var body = emit(expression, context);\n    var localIndex = context.resolveLocal(encoding_1.VAL_TYPE.i32);\n    return __spread(encoding_1.op.block(encoding_1.BLOCK[\"void\"]), emit(count, context), [\n        encoding_1.op.i32_trunc_f64_s\n    ], encoding_1.op.local_tee(localIndex), encoding_1.op.i32_const(0), [\n        encoding_1.op.i32_le_s\n    ], encoding_1.op.br_if(1), encoding_1.op.loop(encoding_1.BLOCK[\"void\"]), body, [\n        encoding_1.op.drop\n    ], encoding_1.op.local_get(localIndex), encoding_1.op.i32_const(1), [\n        encoding_1.op.i32_sub\n    ], encoding_1.op.local_tee(localIndex), encoding_1.op.i32_const(0), [\n        encoding_1.op.i32_ne\n    ], encoding_1.op.br_if(0), [\n        encoding_1.op.end,\n        encoding_1.op.end\n    ], encoding_1.op.f64_const(0));\n}\nfunction emitConditional(test, consiquent, alternate, context) {\n    // TODO: In some cases https://webassembly.studio/ compiles these to use `select`.\n    // Is that an optimization that we might want as well?\n    return __spread(emit(test, context), encoding_1.IS_NOT_ZEROISH, encoding_1.op[\"if\"](encoding_1.BLOCK.f64), emit(consiquent, context), [\n        encoding_1.op[\"else\"]\n    ], emit(alternate, context), [\n        encoding_1.op.end,\n    ]);\n}\n// There are two sections of memory. This function emits code to add the correct\n// offset to an i32 index already on the stack.\nfunction emitAddMemoryOffset(name) {\n    switch (name) {\n        case \"gmegabuf\":\n            return constants_1.BUFFER_SIZE * 8;\n        case \"megabuf\":\n            return 0;\n    }\n}\nfunction getAssignmentOperatorMutation(ast, context) {\n    var operatorToCode = {\n        \"+=\": [encoding_1.op.f64_add],\n        \"-=\": [encoding_1.op.f64_sub],\n        \"*=\": [encoding_1.op.f64_mul],\n        \"/=\": [encoding_1.op.f64_div],\n        \"%=\": context.resolveFunc(\"mod\"),\n        \"=\": null\n    };\n    var operatorCode = operatorToCode[ast.operator];\n    if (operatorCode === undefined) {\n        throw errorUtils_1.createCompilerError(\"Unknown assignment operator \\\"\" + ast.operator + \"\\\"\", ast.loc, context.rawSource);\n    }\n    return operatorCode;\n}\n//# sourceMappingURL=emitter.js.map","\"use strict\";\nexports.__esModule = true;\n// Copied from https://github.com/feross/ieee754/blob/master/index.js\nfunction write(buffer, value) {\n    // Originally these four were arguments, but we only ever use it like this.\n    var offset = 0;\n    var isLE = true;\n    var mLen = 52;\n    var nBytes = 8;\n    var e, m, c;\n    var eLen = nBytes * 8 - mLen - 1;\n    var eMax = (1 << eLen) - 1;\n    var eBias = eMax >> 1;\n    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n    var i = isLE ? 0 : nBytes - 1;\n    var d = isLE ? 1 : -1;\n    var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n    value = Math.abs(value);\n    if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n    }\n    else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n        if (value * (c = Math.pow(2, -e)) < 1) {\n            e--;\n            c *= 2;\n        }\n        if (e + eBias >= 1) {\n            value += rt / c;\n        }\n        else {\n            value += rt * Math.pow(2, 1 - eBias);\n        }\n        if (value * c >= 2) {\n            e++;\n            c /= 2;\n        }\n        if (e + eBias >= eMax) {\n            m = 0;\n            e = eMax;\n        }\n        else if (e + eBias >= 1) {\n            m = (value * c - 1) * Math.pow(2, mLen);\n            e = e + eBias;\n        }\n        else {\n            m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n            e = 0;\n        }\n    }\n    for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) { }\n    e = (e << mLen) | m;\n    eLen += mLen;\n    for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) { }\n    buffer[offset + i - d] |= s * 128;\n}\nexports.write = write;\n//# sourceMappingURL=ieee754.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar shims_1 = __importDefault(require(\"./shims\"));\nvar compiler_1 = require(\"./compiler\");\nfunction loadModule(_a) {\n    var pools = _a.pools, functions = _a.functions, _b = _a.eelVersion, eelVersion = _b === void 0 ? 2 : _b;\n    return __awaiter(this, void 0, void 0, function () {\n        var compilerPools, buffer, mod, importObject;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    compilerPools = {};\n                    Object.entries(pools).forEach(function (_a) {\n                        var _b = __read(_a, 2), key = _b[0], globals = _b[1];\n                        compilerPools[key] = new Set(Object.keys(globals));\n                    });\n                    buffer = compiler_1.compileModule({\n                        pools: compilerPools,\n                        functions: functions,\n                        eelVersion: eelVersion\n                    });\n                    return [4 /*yield*/, WebAssembly.compile(buffer)];\n                case 1:\n                    mod = _c.sent();\n                    importObject = __assign(__assign({}, pools), { shims: shims_1[\"default\"] });\n                    return [4 /*yield*/, WebAssembly.instantiate(mod, importObject)];\n                case 2: return [2 /*return*/, _c.sent()];\n            }\n        });\n    });\n}\nexports.loadModule = loadModule;\n//# sourceMappingURL=loader.js.map","// Runtime header offsets\nconst ID_OFFSET = -8;\nconst SIZE_OFFSET = -4;\n\n// Runtime ids\nconst ARRAYBUFFER_ID = 0;\nconst STRING_ID = 1;\n// const ARRAYBUFFERVIEW_ID = 2;\n\n// Runtime type information\nconst ARRAYBUFFERVIEW = 1 << 0;\nconst ARRAY = 1 << 1;\nconst STATICARRAY = 1 << 2;\n// const SET = 1 << 3;\n// const MAP = 1 << 4;\nconst VAL_ALIGN_OFFSET = 6;\n// const VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\nconst VAL_SIGNED = 1 << 11;\nconst VAL_FLOAT = 1 << 12;\n// const VAL_NULLABLE = 1 << 13;\nconst VAL_MANAGED = 1 << 14;\n// const KEY_ALIGN_OFFSET = 15;\n// const KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\n// const KEY_SIGNED = 1 << 20;\n// const KEY_FLOAT = 1 << 21;\n// const KEY_NULLABLE = 1 << 22;\n// const KEY_MANAGED = 1 << 23;\n\n// Array(BufferView) layout\nconst ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\nconst ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\nconst ARRAYBUFFERVIEW_DATALENGTH_OFFSET = 8;\nconst ARRAYBUFFERVIEW_SIZE = 12;\nconst ARRAY_LENGTH_OFFSET = 12;\nconst ARRAY_SIZE = 16;\n\nconst BIGINT = typeof BigUint64Array !== \"undefined\";\nconst THIS = Symbol();\n\nconst STRING_DECODE_THRESHOLD = 32;\nconst decoder = new TextDecoder(\"utf-16le\");\n\n/** Gets a string from an U32 and an U16 view on a memory. */\nfunction getStringImpl(buffer, ptr) {\n  const len = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2] >>> 1;\n  const arr = new Uint16Array(buffer, ptr, len);\n  if (len <= STRING_DECODE_THRESHOLD) {\n    return String.fromCharCode.apply(String, arr);\n  }\n  return decoder.decode(arr);\n}\n\n/** Prepares the base module prior to instantiation. */\nfunction preInstantiate(imports) {\n  const extendedExports = {};\n\n  function getString(memory, ptr) {\n    if (!memory) return \"<yet unknown>\";\n    return getStringImpl(memory.buffer, ptr);\n  }\n\n  // add common imports used by stdlib for convenience\n  const env = (imports.env = imports.env || {});\n  env.abort = env.abort || function abort(msg, file, line, colm) {\n    const memory = extendedExports.memory || env.memory; // prefer exported, otherwise try imported\n    throw Error(`abort: ${getString(memory, msg)} at ${getString(memory, file)}:${line}:${colm}`);\n  };\n  env.trace = env.trace || function trace(msg, n, ...args) {\n    const memory = extendedExports.memory || env.memory;\n    console.log(`trace: ${getString(memory, msg)}${n ? \" \" : \"\"}${args.slice(0, n).join(\", \")}`);\n  };\n  env.seed = env.seed || Date.now;\n  imports.Math = imports.Math || Math;\n  imports.Date = imports.Date || Date;\n\n  return extendedExports;\n}\n\n/** Prepares the final module once instantiation is complete. */\nfunction postInstantiate(extendedExports, instance) {\n  const exports = instance.exports;\n  const memory = exports.memory;\n  const table = exports.table;\n  const __new = exports[\"__new\"];\n  const __retain = exports[\"__retain\"];\n  const __rtti_base = exports[\"__rtti_base\"] || ~0; // oob if not present\n\n  /** Gets the runtime type info for the given id. */\n  function getInfo(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = U32[__rtti_base >>> 2];\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2];\n  }\n\n  /** Gets and validate runtime type info for the given id for array like objects */\n  function getArrayInfo(id) {\n    const info = getInfo(id);\n    if (!(info & (ARRAYBUFFERVIEW | ARRAY | STATICARRAY))) throw Error(`not an array: ${id}, flags=${info}`);\n    return info;\n  }\n\n  /** Gets the runtime base id for the given id. */\n  function getBase(id) {\n    const U32 = new Uint32Array(memory.buffer);\n    const count = U32[__rtti_base >>> 2];\n    if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\n    return U32[(__rtti_base + 4 >>> 2) + id * 2 + 1];\n  }\n\n  /** Gets the runtime alignment of a collection's values. */\n  function getValueAlign(info) {\n    return 31 - Math.clz32((info >>> VAL_ALIGN_OFFSET) & 31); // -1 if none\n  }\n\n  /** Gets the runtime alignment of a collection's keys. */\n  // function getKeyAlign(info) {\n  //   return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\n  // }\n\n  /** Allocates a new string in the module's memory and returns its retained pointer. */\n  function __newString(str) {\n    if (str == null) return 0;\n    const length = str.length;\n    const ptr = __new(length << 1, STRING_ID);\n    const U16 = new Uint16Array(memory.buffer);\n    for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\n    return ptr;\n  }\n\n  extendedExports.__newString = __newString;\n\n  /** Reads a string from the module's memory by its pointer. */\n  function __getString(ptr) {\n    if (!ptr) return null;\n    const buffer = memory.buffer;\n    const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\n    if (id !== STRING_ID) throw Error(`not a string: ${ptr}`);\n    return getStringImpl(buffer, ptr);\n  }\n\n  extendedExports.__getString = __getString;\n\n  /** Gets the view matching the specified alignment, signedness and floatness. */\n  function getView(alignLog2, signed, float) {\n    const buffer = memory.buffer;\n    if (float) {\n      switch (alignLog2) {\n        case 2: return new Float32Array(buffer);\n        case 3: return new Float64Array(buffer);\n      }\n    } else {\n      switch (alignLog2) {\n        case 0: return new (signed ? Int8Array : Uint8Array)(buffer);\n        case 1: return new (signed ? Int16Array : Uint16Array)(buffer);\n        case 2: return new (signed ? Int32Array : Uint32Array)(buffer);\n        case 3: return new (signed ? BigInt64Array : BigUint64Array)(buffer);\n      }\n    }\n    throw Error(`unsupported align: ${alignLog2}`);\n  }\n\n  /** Allocates a new array in the module's memory and returns its retained pointer. */\n  function __newArray(id, values) {\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    const length = values.length;\n    const buf = __new(length << align, info & STATICARRAY ? id : ARRAYBUFFER_ID);\n    let result;\n    if (info & STATICARRAY) {\n      result = buf;\n    } else {\n      const arr = __new(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\n      const U32 = new Uint32Array(memory.buffer);\n      U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = __retain(buf);\n      U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\n      U32[arr + ARRAYBUFFERVIEW_DATALENGTH_OFFSET >>> 2] = length << align;\n      if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\n      result = arr;\n    }\n    const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\n    if (info & VAL_MANAGED) {\n      for (let i = 0; i < length; ++i) view[(buf >>> align) + i] = __retain(values[i]);\n    } else {\n      view.set(values, buf >>> align);\n    }\n    return result;\n  }\n\n  extendedExports.__newArray = __newArray;\n\n  /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\n  function __getArrayView(arr) {\n    const U32 = new Uint32Array(memory.buffer);\n    const id = U32[arr + ID_OFFSET >>> 2];\n    const info = getArrayInfo(id);\n    const align = getValueAlign(info);\n    let buf = info & STATICARRAY\n      ? arr\n      : U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    const length = info & ARRAY\n      ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2]\n      : U32[buf + SIZE_OFFSET >>> 2] >>> align;\n    return getView(align, info & VAL_SIGNED, info & VAL_FLOAT).subarray(buf >>>= align, buf + length);\n  }\n\n  extendedExports.__getArrayView = __getArrayView;\n\n  /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\n  function __getArray(arr) {\n    const input = __getArrayView(arr);\n    const len = input.length;\n    const out = new Array(len);\n    for (let i = 0; i < len; i++) out[i] = input[i];\n    return out;\n  }\n\n  extendedExports.__getArray = __getArray;\n\n  /** Copies an ArrayBuffer's value from the module's memory. */\n  function __getArrayBuffer(ptr) {\n    const buffer = memory.buffer;\n    const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\n    return buffer.slice(ptr, ptr + length);\n  }\n\n  extendedExports.__getArrayBuffer = __getArrayBuffer;\n\n  /** Copies a typed array's values from the module's memory. */\n  function getTypedArray(Type, alignLog2, ptr) {\n    return new Type(getTypedArrayView(Type, alignLog2, ptr));\n  }\n\n  /** Gets a live view on a typed array's values in the module's memory. */\n  function getTypedArrayView(Type, alignLog2, ptr) {\n    const buffer = memory.buffer;\n    const U32 = new Uint32Array(buffer);\n    const bufPtr = U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\n    return new Type(buffer, bufPtr, U32[bufPtr + SIZE_OFFSET >>> 2] >>> alignLog2);\n  }\n\n  /** Attach a set of get TypedArray and View functions to the exports. */\n  function attachTypedArrayFunctions(ctor, name, align) {\n    extendedExports[`__get${name}`] = getTypedArray.bind(null, ctor, align);\n    extendedExports[`__get${name}View`] = getTypedArrayView.bind(null, ctor, align);\n  }\n\n  [\n    Int8Array,\n    Uint8Array,\n    Uint8ClampedArray,\n    Int16Array,\n    Uint16Array,\n    Int32Array,\n    Uint32Array,\n    Float32Array,\n    Float64Array\n  ].forEach(ctor => {\n    attachTypedArrayFunctions(ctor, ctor.name, 31 - Math.clz32(ctor.BYTES_PER_ELEMENT));\n  });\n\n  if (BIGINT) {\n    [BigUint64Array, BigInt64Array].forEach(ctor => {\n      attachTypedArrayFunctions(ctor, ctor.name.slice(3), 3);\n    });\n  }\n\n  /** Tests whether an object is an instance of the class represented by the specified base id. */\n  function __instanceof(ptr, baseId) {\n    const U32 = new Uint32Array(memory.buffer);\n    let id = U32[ptr + ID_OFFSET >>> 2];\n    if (id <= U32[__rtti_base >>> 2]) {\n      do {\n        if (id == baseId) return true;\n        id = getBase(id);\n      } while (id);\n    }\n    return false;\n  }\n\n  extendedExports.__instanceof = __instanceof;\n\n  // Pull basic exports to extendedExports so code in preInstantiate can use them\n  extendedExports.memory = extendedExports.memory || memory;\n  extendedExports.table  = extendedExports.table  || table;\n\n  // Demangle exports and provide the usual utility on the prototype\n  return demangle(exports, extendedExports);\n}\n\nfunction isResponse(src) {\n  return typeof Response !== \"undefined\" && src instanceof Response;\n}\n\nfunction isModule(src) {\n  return src instanceof WebAssembly.Module;\n}\n\n/** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\nexport async function instantiate(source, imports = {}) {\n  if (isResponse(source = await source)) return instantiateStreaming(source, imports);\n  const module = isModule(source) ? source : await WebAssembly.compile(source);\n  const extended = preInstantiate(imports);\n  const instance = await WebAssembly.instantiate(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\nexport function instantiateSync(source, imports = {}) {\n  const module = isModule(source) ? source : new WebAssembly.Module(source);\n  const extended = preInstantiate(imports);\n  const instance = new WebAssembly.Instance(module, imports);\n  const exports = postInstantiate(extended, instance);\n  return { module, instance, exports };\n}\n\n/** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\nexport async function instantiateStreaming(source, imports = {}) {\n  if (!WebAssembly.instantiateStreaming) {\n    return instantiate(\n      isResponse(source = await source)\n        ? source.arrayBuffer()\n        : source,\n      imports\n    );\n  }\n  const extended = preInstantiate(imports);\n  const result = await WebAssembly.instantiateStreaming(source, imports);\n  const exports = postInstantiate(extended, result.instance);\n  return { ...result, exports };\n}\n\n/** Demangles an AssemblyScript module's exports to a friendly object structure. */\nexport function demangle(exports, extendedExports = {}) {\n  const setArgumentsLength = exports[\"__argumentsLength\"]\n    ? length => { exports[\"__argumentsLength\"].value = length; }\n    : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || (() => { /* nop */ });\n  for (let internalName in exports) {\n    if (!Object.prototype.hasOwnProperty.call(exports, internalName)) continue;\n    const elem = exports[internalName];\n    let parts = internalName.split(\".\");\n    let curr = extendedExports;\n    while (parts.length > 1) {\n      let part = parts.shift();\n      if (!Object.prototype.hasOwnProperty.call(curr, part)) curr[part] = {};\n      curr = curr[part];\n    }\n    let name = parts[0];\n    let hash = name.indexOf(\"#\");\n    if (hash >= 0) {\n      const className = name.substring(0, hash);\n      const classElem = curr[className];\n      if (typeof classElem === \"undefined\" || !classElem.prototype) {\n        const ctor = function(...args) {\n          return ctor.wrap(ctor.prototype.constructor(0, ...args));\n        };\n        ctor.prototype = {\n          valueOf() { return this[THIS]; }\n        };\n        ctor.wrap = function(thisValue) {\n          return Object.create(ctor.prototype, { [THIS]: { value: thisValue, writable: false } });\n        };\n        if (classElem) Object.getOwnPropertyNames(classElem).forEach(name =>\n          Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name))\n        );\n        curr[className] = ctor;\n      }\n      name = name.substring(hash + 1);\n      curr = curr[className].prototype;\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          let getter = exports[internalName.replace(\"set:\", \"get:\")];\n          let setter = exports[internalName.replace(\"get:\", \"set:\")];\n          Object.defineProperty(curr, name, {\n            get() { return getter(this[THIS]); },\n            set(value) { setter(this[THIS], value); },\n            enumerable: true\n          });\n        }\n      } else {\n        if (name === 'constructor') {\n          (curr[name] = (...args) => {\n            setArgumentsLength(args.length);\n            return elem(...args);\n          }).original = elem;\n        } else { // instance method\n          (curr[name] = function(...args) { // !\n            setArgumentsLength(args.length);\n            return elem(this[THIS], ...args);\n          }).original = elem;\n        }\n      }\n    } else {\n      if (/^(get|set):/.test(name)) {\n        if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\n          Object.defineProperty(curr, name, {\n            get: exports[internalName.replace(\"set:\", \"get:\")],\n            set: exports[internalName.replace(\"get:\", \"set:\")],\n            enumerable: true\n          });\n        }\n      } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\n        (curr[name] = (...args) => {\n          setArgumentsLength(args.length);\n          return elem(...args);\n        }).original = elem;\n      } else {\n        curr[name] = elem;\n      }\n    }\n  }\n  return extendedExports;\n}\n\nexport default {\n  instantiate,\n  instantiateSync,\n  instantiateStreaming,\n  demangle\n};\n","export default class FFT {\r\n  constructor(samplesIn, samplesOut, equalize = false) {\r\n    this.samplesIn = samplesIn;\r\n    this.samplesOut = samplesOut;\r\n    this.equalize = equalize;\r\n    this.NFREQ = samplesOut * 2;\r\n\r\n    if (this.equalize) {\r\n      this.initEqualizeTable();\r\n    }\r\n    this.initBitRevTable();\r\n    this.initCosSinTable();\r\n  }\r\n\r\n  initEqualizeTable() {\r\n    this.equalizeArr = new Float32Array(this.samplesOut);\r\n    const invHalfNFREQ = 1.0 / this.samplesOut;\r\n    for (let i = 0; i < this.samplesOut; i++) {\r\n      this.equalizeArr[i] =\r\n        -0.02 * Math.log((this.samplesOut - i) * invHalfNFREQ);\r\n    }\r\n  }\r\n\r\n  /* eslint-disable no-bitwise */\r\n  initBitRevTable() {\r\n    this.bitrevtable = new Uint16Array(this.NFREQ);\r\n\r\n    for (let i = 0; i < this.NFREQ; i++) {\r\n      this.bitrevtable[i] = i;\r\n    }\r\n\r\n    let j = 0;\r\n    for (let i = 0; i < this.NFREQ; i++) {\r\n      if (j > i) {\r\n        const temp = this.bitrevtable[i];\r\n        this.bitrevtable[i] = this.bitrevtable[j];\r\n        this.bitrevtable[j] = temp;\r\n      }\r\n\r\n      let m = this.NFREQ >> 1;\r\n\r\n      while (m >= 1 && j >= m) {\r\n        j -= m;\r\n        m >>= 1;\r\n      }\r\n\r\n      j += m;\r\n    }\r\n  }\r\n\r\n  initCosSinTable() {\r\n    let dftsize = 2;\r\n    let tabsize = 0;\r\n    while (dftsize <= this.NFREQ) {\r\n      tabsize += 1;\r\n      dftsize <<= 1;\r\n    }\r\n\r\n    this.cossintable = [new Float32Array(tabsize), new Float32Array(tabsize)];\r\n\r\n    dftsize = 2;\r\n    let i = 0;\r\n    while (dftsize <= this.NFREQ) {\r\n      const theta = (-2.0 * Math.PI) / dftsize;\r\n      this.cossintable[0][i] = Math.cos(theta);\r\n      this.cossintable[1][i] = Math.sin(theta);\r\n      i += 1;\r\n      dftsize <<= 1;\r\n    }\r\n  }\r\n\r\n  timeToFrequencyDomain(waveDataIn) {\r\n    const real = new Float32Array(this.NFREQ);\r\n    const imag = new Float32Array(this.NFREQ);\r\n\r\n    for (let i = 0; i < this.NFREQ; i++) {\r\n      const idx = this.bitrevtable[i];\r\n      if (idx < this.samplesIn) {\r\n        real[i] = waveDataIn[idx];\r\n      } else {\r\n        real[i] = 0;\r\n      }\r\n      imag[i] = 0;\r\n    }\r\n\r\n    let dftsize = 2;\r\n    let t = 0;\r\n    while (dftsize <= this.NFREQ) {\r\n      const wpr = this.cossintable[0][t];\r\n      const wpi = this.cossintable[1][t];\r\n      let wr = 1.0;\r\n      let wi = 0.0;\r\n      const hdftsize = dftsize >> 1;\r\n\r\n      for (let m = 0; m < hdftsize; m++) {\r\n        for (let i = m; i < this.NFREQ; i += dftsize) {\r\n          const j = i + hdftsize;\r\n          const tempr = wr * real[j] - wi * imag[j];\r\n          const tempi = wr * imag[j] + wi * real[j];\r\n          real[j] = real[i] - tempr;\r\n          imag[j] = imag[i] - tempi;\r\n          real[i] += tempr;\r\n          imag[i] += tempi;\r\n        }\r\n\r\n        const wtemp = wr;\r\n        wr = wtemp * wpr - wi * wpi;\r\n        wi = wi * wpr + wtemp * wpi;\r\n      }\r\n\r\n      dftsize <<= 1;\r\n      t += 1;\r\n    }\r\n\r\n    const spectralDataOut = new Float32Array(this.samplesOut);\r\n    if (this.equalize) {\r\n      for (let i = 0; i < this.samplesOut; i++) {\r\n        spectralDataOut[i] =\r\n          this.equalizeArr[i] *\r\n          Math.sqrt(real[i] * real[i] + imag[i] * imag[i]);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < this.samplesOut; i++) {\r\n        spectralDataOut[i] = Math.sqrt(real[i] * real[i] + imag[i] * imag[i]);\r\n      }\r\n    }\r\n\r\n    return spectralDataOut;\r\n  }\r\n  /* eslint-enable no-bitwise */\r\n}\r\n","import FFT from \"./fft\";\r\n\r\nexport default class AudioProcessor {\r\n  constructor(context) {\r\n    this.numSamps = 512;\r\n    this.fftSize = this.numSamps * 2;\r\n\r\n    this.fft = new FFT(this.fftSize, 512, true);\r\n\r\n    if (context) {\r\n      this.audioContext = context;\r\n      this.audible = context.createDelay();\r\n\r\n      this.analyser = context.createAnalyser();\r\n      this.analyser.smoothingTimeConstant = 0.0;\r\n      this.analyser.fftSize = this.fftSize;\r\n\r\n      this.audible.connect(this.analyser);\r\n\r\n      // Split channels\r\n      this.analyserL = context.createAnalyser();\r\n      this.analyserL.smoothingTimeConstant = 0.0;\r\n      this.analyserL.fftSize = this.fftSize;\r\n\r\n      this.analyserR = context.createAnalyser();\r\n      this.analyserR.smoothingTimeConstant = 0.0;\r\n      this.analyserR.fftSize = this.fftSize;\r\n\r\n      this.splitter = context.createChannelSplitter(2);\r\n\r\n      this.audible.connect(this.splitter);\r\n      this.splitter.connect(this.analyserL, 0);\r\n      this.splitter.connect(this.analyserR, 1);\r\n    }\r\n\r\n    // Initialised once as typed arrays\r\n    // Used for webaudio API raw (time domain) samples. 0 -> 255\r\n    this.timeByteArray = new Uint8Array(this.fftSize);\r\n    this.timeByteArrayL = new Uint8Array(this.fftSize);\r\n    this.timeByteArrayR = new Uint8Array(this.fftSize);\r\n\r\n    // Signed raw samples shifted to -128 -> 127\r\n    this.timeArray = new Int8Array(this.fftSize);\r\n    this.timeByteArraySignedL = new Int8Array(this.fftSize);\r\n    this.timeByteArraySignedR = new Int8Array(this.fftSize);\r\n\r\n    // Temporary array for smoothing\r\n    this.tempTimeArrayL = new Int8Array(this.fftSize);\r\n    this.tempTimeArrayR = new Int8Array(this.fftSize);\r\n\r\n    // Undersampled from this.fftSize to this.numSamps\r\n    this.timeArrayL = new Int8Array(this.numSamps);\r\n    this.timeArrayR = new Int8Array(this.numSamps);\r\n  }\r\n\r\n  sampleAudio() {\r\n    this.analyser.getByteTimeDomainData(this.timeByteArray);\r\n    this.analyserL.getByteTimeDomainData(this.timeByteArrayL);\r\n    this.analyserR.getByteTimeDomainData(this.timeByteArrayR);\r\n    this.processAudio();\r\n  }\r\n  updateAudio(timeByteArray, timeByteArrayL, timeByteArrayR) {\r\n    this.timeByteArray.set(timeByteArray);\r\n    this.timeByteArrayL.set(timeByteArrayL);\r\n    this.timeByteArrayR.set(timeByteArrayR);\r\n    this.processAudio();\r\n  }\r\n  /* eslint-disable no-bitwise */\r\n  processAudio() {\r\n    for (let i = 0, j = 0, lastIdx = 0; i < this.fftSize; i++) {\r\n      // Shift Unsigned to Signed about 0\r\n      this.timeArray[i] = this.timeByteArray[i] - 128;\r\n      this.timeByteArraySignedL[i] = this.timeByteArrayL[i] - 128;\r\n      this.timeByteArraySignedR[i] = this.timeByteArrayR[i] - 128;\r\n\r\n      this.tempTimeArrayL[i] =\r\n        0.5 *\r\n        (this.timeByteArraySignedL[i] + this.timeByteArraySignedL[lastIdx]);\r\n      this.tempTimeArrayR[i] =\r\n        0.5 *\r\n        (this.timeByteArraySignedR[i] + this.timeByteArraySignedR[lastIdx]);\r\n\r\n      // Undersampled\r\n      if (i % 2 === 0) {\r\n        this.timeArrayL[j] = this.tempTimeArrayL[i];\r\n        this.timeArrayR[j] = this.tempTimeArrayR[i];\r\n        j += 1;\r\n      }\r\n\r\n      lastIdx = i;\r\n    }\r\n\r\n    // Use full width samples for the FFT\r\n    this.freqArray = this.fft.timeToFrequencyDomain(this.timeArray);\r\n    this.freqArrayL = this.fft.timeToFrequencyDomain(this.timeByteArraySignedL);\r\n    this.freqArrayR = this.fft.timeToFrequencyDomain(this.timeByteArraySignedR);\r\n  }\r\n\r\n  connectAudio(audionode) {\r\n    audionode.connect(this.audible);\r\n  }\r\n\r\n  disconnectAudio(audionode) {\r\n    audionode.disconnect(this.audible);\r\n  }\r\n  /* eslint-enable no-bitwise */\r\n}\r\n","export default class AudioLevels {\r\n  constructor(audio) {\r\n    this.audio = audio;\r\n\r\n    let sampleRate;\r\n    if (this.audio.audioContext) {\r\n      sampleRate = this.audio.audioContext.sampleRate;\r\n    } else {\r\n      sampleRate = 44100;\r\n    }\r\n\r\n    const bucketHz = sampleRate / this.audio.fftSize;\r\n\r\n    const bassLow = Math.clamp(\r\n      Math.round(20 / bucketHz) - 1,\r\n      0,\r\n      this.audio.numSamps - 1\r\n    );\r\n    const bassHigh = Math.clamp(\r\n      Math.round(320 / bucketHz) - 1,\r\n      0,\r\n      this.audio.numSamps - 1\r\n    );\r\n    const midHigh = Math.clamp(\r\n      Math.round(2800 / bucketHz) - 1,\r\n      0,\r\n      this.audio.numSamps - 1\r\n    );\r\n    const trebHigh = Math.clamp(\r\n      Math.round(11025 / bucketHz) - 1,\r\n      0,\r\n      this.audio.numSamps - 1\r\n    );\r\n\r\n    this.starts = [bassLow, bassHigh, midHigh];\r\n    this.stops = [bassHigh, midHigh, trebHigh];\r\n\r\n    this.val = new Float32Array(3);\r\n    this.imm = new Float32Array(3);\r\n    this.att = new Float32Array(3);\r\n    this.avg = new Float32Array(3);\r\n    this.longAvg = new Float32Array(3);\r\n\r\n    this.att.fill(1);\r\n    this.avg.fill(1);\r\n    this.longAvg.fill(1);\r\n  }\r\n\r\n  /* eslint-disable camelcase */\r\n  get bass() {\r\n    return this.val[0];\r\n  }\r\n\r\n  get bass_att() {\r\n    return this.att[0];\r\n  }\r\n\r\n  get mid() {\r\n    return this.val[1];\r\n  }\r\n\r\n  get mid_att() {\r\n    return this.att[1];\r\n  }\r\n\r\n  get treb() {\r\n    return this.val[2];\r\n  }\r\n\r\n  get treb_att() {\r\n    return this.att[2];\r\n  }\r\n  /* eslint-enable camelcase */\r\n\r\n  static isFiniteNumber(num) {\r\n    return Number.isFinite(num) && !Number.isNaN(num);\r\n  }\r\n\r\n  static adjustRateToFPS(rate, baseFPS, FPS) {\r\n    return rate ** (baseFPS / FPS);\r\n  }\r\n\r\n  updateAudioLevels(fps, frame) {\r\n    if (this.audio.freqArray.length > 0) {\r\n      let effectiveFPS = fps;\r\n      if (!AudioLevels.isFiniteNumber(effectiveFPS) || effectiveFPS < 15) {\r\n        effectiveFPS = 15;\r\n      } else if (effectiveFPS > 144) {\r\n        effectiveFPS = 144;\r\n      }\r\n\r\n      // Clear for next loop\r\n      this.imm.fill(0);\r\n      for (let i = 0; i < 3; i++) {\r\n        for (let j = this.starts[i]; j < this.stops[i]; j++) {\r\n          this.imm[i] += this.audio.freqArray[j];\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < 3; i++) {\r\n        let rate;\r\n        if (this.imm[i] > this.avg[i]) {\r\n          rate = 0.2;\r\n        } else {\r\n          rate = 0.5;\r\n        }\r\n        rate = AudioLevels.adjustRateToFPS(rate, 30.0, effectiveFPS);\r\n        this.avg[i] = this.avg[i] * rate + this.imm[i] * (1 - rate);\r\n\r\n        if (frame < 50) {\r\n          rate = 0.9;\r\n        } else {\r\n          rate = 0.992;\r\n        }\r\n        rate = AudioLevels.adjustRateToFPS(rate, 30.0, effectiveFPS);\r\n        this.longAvg[i] = this.longAvg[i] * rate + this.imm[i] * (1 - rate);\r\n\r\n        if (this.longAvg[i] < 0.001) {\r\n          this.val[i] = 1.0;\r\n          this.att[i] = 1.0;\r\n        } else {\r\n          this.val[i] = this.imm[i] / this.longAvg[i];\r\n          this.att[i] = this.avg[i] / this.longAvg[i];\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","export default class Utils {\r\n  static atan2(x, y) {\r\n    let a = Math.atan2(x, y);\r\n    if (a < 0) {\r\n      a += 2 * Math.PI;\r\n    }\r\n    return a;\r\n  }\r\n\r\n  static cloneVars(vars) {\r\n    return Object.assign({}, vars);\r\n  }\r\n\r\n  static range(start, end) {\r\n    if (end === undefined) {\r\n      return [...Array(start).keys()];\r\n    }\r\n\r\n    return Array.from({ length: end - start }, (_, i) => i + start);\r\n  }\r\n\r\n  static pick(obj, keys) {\r\n    const newObj = {};\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      newObj[key] = obj[key] || 0;\r\n    }\r\n    return newObj;\r\n  }\r\n\r\n  static omit(obj, keys) {\r\n    const newObj = Object.assign({}, obj);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      delete newObj[key];\r\n    }\r\n    return newObj;\r\n  }\r\n\r\n  static setWasm(wasmGlobals, obj, keys) {\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      // eslint-disable-next-line no-param-reassign\r\n      wasmGlobals[key].value = obj[key];\r\n    }\r\n  }\r\n\r\n  static pickWasm(wasmGlobals, keys) {\r\n    const newObj = {};\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      newObj[key] = wasmGlobals[key].value;\r\n    }\r\n    return newObj;\r\n  }\r\n}\r\n","import Utils from \"../utils\";\r\n\r\nexport default class PresetEquationRunner {\r\n  constructor(preset, globalVars, opts) {\r\n    this.preset = preset;\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\r\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\r\n    this.regs = Utils.range(100).map((x) => {\r\n      if (x < 10) {\r\n        return `reg0${x}`;\r\n      }\r\n      return `reg${x}`;\r\n    });\r\n\r\n    this.initializeEquations(globalVars);\r\n  }\r\n\r\n  initializeEquations(globalVars) {\r\n    this.runVertEQs = this.preset.pixel_eqs !== \"\";\r\n\r\n    this.mdVSQInit = null;\r\n    this.mdVSRegs = null;\r\n    this.mdVSFrame = null;\r\n    this.mdVSUserKeys = null;\r\n    this.mdVSFrameMap = null;\r\n\r\n    this.mdVSShapes = null;\r\n    this.mdVSUserKeysShapes = null;\r\n    this.mdVSFrameMapShapes = null;\r\n\r\n    this.mdVSWaves = null;\r\n    this.mdVSUserKeysWaves = null;\r\n    this.mdVSFrameMapWaves = null;\r\n\r\n    this.mdVSQAfterFrame = null;\r\n\r\n    this.gmegabuf = new Array(1048576).fill(0);\r\n\r\n    const mdVSBase = {\r\n      frame: globalVars.frame,\r\n      time: globalVars.time,\r\n      fps: globalVars.fps,\r\n      bass: globalVars.bass,\r\n      bass_att: globalVars.bass_att,\r\n      mid: globalVars.mid,\r\n      mid_att: globalVars.mid_att,\r\n      treb: globalVars.treb,\r\n      treb_att: globalVars.treb_att,\r\n      meshx: this.mesh_width,\r\n      meshy: this.mesh_height,\r\n      aspectx: this.invAspectx,\r\n      aspecty: this.invAspecty,\r\n      pixelsx: this.texsizeX,\r\n      pixelsy: this.texsizeY,\r\n      gmegabuf: this.gmegabuf,\r\n    };\r\n\r\n    this.mdVS = Object.assign({}, this.preset.baseVals, mdVSBase);\r\n\r\n    this.mdVS.megabuf = new Array(1048576).fill(0);\r\n    this.mdVS.rand_start = new Float32Array([\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n    ]);\r\n    this.mdVS.rand_preset = new Float32Array([\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n    ]);\r\n\r\n    const nonUserKeys = this.qs.concat(this.regs, Object.keys(this.mdVS));\r\n\r\n    const mdVSAfterInit = this.preset.init_eqs(Utils.cloneVars(this.mdVS));\r\n\r\n    // qs need to be initialized to there init values every frame\r\n    this.mdVSQInit = Utils.pick(mdVSAfterInit, this.qs);\r\n    this.mdVSRegs = Utils.pick(mdVSAfterInit, this.regs);\r\n    const initUserVars = Utils.pick(\r\n      mdVSAfterInit,\r\n      Object.keys(Utils.omit(mdVSAfterInit, nonUserKeys))\r\n    );\r\n    initUserVars.megabuf = mdVSAfterInit.megabuf;\r\n    initUserVars.gmegabuf = mdVSAfterInit.gmegabuf;\r\n\r\n    this.mdVSFrame = this.preset.frame_eqs(\r\n      Object.assign({}, this.mdVS, this.mdVSQInit, this.mdVSRegs, initUserVars)\r\n    );\r\n\r\n    // user vars need to be copied between frames\r\n    this.mdVSUserKeys = Object.keys(Utils.omit(this.mdVSFrame, nonUserKeys));\r\n\r\n    // Determine vars to carry over between frames\r\n    this.mdVSFrameMap = Utils.pick(this.mdVSFrame, this.mdVSUserKeys);\r\n\r\n    // qs for shapes\r\n    this.mdVSQAfterFrame = Utils.pick(this.mdVSFrame, this.qs);\r\n    this.mdVSRegs = Utils.pick(this.mdVSFrame, this.regs);\r\n\r\n    this.mdVSWaves = [];\r\n    this.mdVSTWaveInits = [];\r\n    this.mdVSUserKeysWaves = [];\r\n    this.mdVSFrameMapWaves = [];\r\n    if (this.preset.waves && this.preset.waves.length > 0) {\r\n      for (let i = 0; i < this.preset.waves.length; i++) {\r\n        const wave = this.preset.waves[i];\r\n        const baseVals = wave.baseVals;\r\n        if (baseVals.enabled !== 0) {\r\n          let mdVSWave = Object.assign({}, baseVals, mdVSBase);\r\n\r\n          const nonUserWaveKeys = this.qs.concat(\r\n            this.ts,\r\n            this.regs,\r\n            Object.keys(mdVSWave)\r\n          );\r\n\r\n          Object.assign(mdVSWave, this.mdVSQAfterFrame, this.mdVSRegs);\r\n          mdVSWave.megabuf = new Array(1048576).fill(0);\r\n\r\n          if (wave.init_eqs) {\r\n            mdVSWave = wave.init_eqs(mdVSWave);\r\n\r\n            this.mdVSRegs = Utils.pick(mdVSWave, this.regs);\r\n\r\n            // base vals need to be reset\r\n            Object.assign(mdVSWave, baseVals);\r\n          }\r\n          this.mdVSWaves.push(mdVSWave);\r\n          this.mdVSTWaveInits.push(Utils.pick(mdVSWave, this.ts));\r\n\r\n          this.mdVSUserKeysWaves.push(\r\n            Object.keys(Utils.omit(mdVSWave, nonUserWaveKeys))\r\n          );\r\n          this.mdVSFrameMapWaves.push(\r\n            Utils.pick(mdVSWave, this.mdVSUserKeysWaves[i])\r\n          );\r\n        } else {\r\n          this.mdVSWaves.push({});\r\n          this.mdVSTWaveInits.push({});\r\n\r\n          this.mdVSUserKeysWaves.push([]);\r\n          this.mdVSFrameMapWaves.push({});\r\n        }\r\n      }\r\n    }\r\n\r\n    this.mdVSShapes = [];\r\n    this.mdVSTShapeInits = [];\r\n    this.mdVSUserKeysShapes = [];\r\n    this.mdVSFrameMapShapes = [];\r\n    if (this.preset.shapes && this.preset.shapes.length > 0) {\r\n      for (let i = 0; i < this.preset.shapes.length; i++) {\r\n        const shape = this.preset.shapes[i];\r\n        const baseVals = shape.baseVals;\r\n        if (baseVals.enabled !== 0) {\r\n          let mdVSShape = Object.assign({}, baseVals, mdVSBase);\r\n\r\n          const nonUserShapeKeys = this.qs.concat(\r\n            this.ts,\r\n            this.regs,\r\n            Object.keys(mdVSShape)\r\n          );\r\n\r\n          Object.assign(mdVSShape, this.mdVSQAfterFrame, this.mdVSRegs);\r\n          mdVSShape.megabuf = new Array(1048576).fill(0);\r\n\r\n          if (shape.init_eqs) {\r\n            mdVSShape = shape.init_eqs(mdVSShape);\r\n\r\n            this.mdVSRegs = Utils.pick(mdVSShape, this.regs);\r\n\r\n            // base vals need to be reset\r\n            Object.assign(mdVSShape, baseVals);\r\n          }\r\n          this.mdVSShapes.push(mdVSShape);\r\n          this.mdVSTShapeInits.push(Utils.pick(mdVSShape, this.ts));\r\n\r\n          this.mdVSUserKeysShapes.push(\r\n            Object.keys(Utils.omit(mdVSShape, nonUserShapeKeys))\r\n          );\r\n          this.mdVSFrameMapShapes.push(\r\n            Utils.pick(mdVSShape, this.mdVSUserKeysShapes[i])\r\n          );\r\n        } else {\r\n          this.mdVSShapes.push({});\r\n          this.mdVSTShapeInits.push({});\r\n\r\n          this.mdVSUserKeysShapes.push([]);\r\n          this.mdVSFrameMapShapes.push({});\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updatePreset(preset, globalVars) {\r\n    this.preset = preset;\r\n    this.initializeEquations(globalVars);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  runFrameEquations(globalVars) {\r\n    this.mdVSFrame = Object.assign(\r\n      {},\r\n      this.mdVS,\r\n      this.mdVSQInit,\r\n      this.mdVSFrameMap,\r\n      globalVars\r\n    );\r\n\r\n    this.mdVSFrame = this.preset.frame_eqs(this.mdVSFrame);\r\n\r\n    this.mdVSFrameMap = Utils.pick(this.mdVSFrame, this.mdVSUserKeys);\r\n    this.mdVSQAfterFrame = Utils.pick(this.mdVSFrame, this.qs);\r\n\r\n    return this.mdVSFrame;\r\n  }\r\n\r\n  runPixelEquations(mdVSVertex) {\r\n    return this.preset.pixel_eqs(mdVSVertex);\r\n  }\r\n\r\n  runShapeFrameEquations(shapeIdx, mdVSShape) {\r\n    return this.preset.shapes[shapeIdx].frame_eqs(mdVSShape);\r\n  }\r\n\r\n  runWaveFrameEquations(waveIdx, mdVSWave) {\r\n    return this.preset.waves[waveIdx].frame_eqs(mdVSWave);\r\n  }\r\n\r\n  runWavePointEquations(waveIdx, mdVSWaveFrame) {\r\n    return this.preset.waves[waveIdx].point_eqs(mdVSWaveFrame);\r\n  }\r\n}\r\n","import Utils from \"../utils\";\r\n\r\nexport default class PresetEquationRunnerWASM {\r\n  constructor(preset, globalVars, opts) {\r\n    this.preset = preset;\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\r\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\r\n    this.regs = Utils.range(100).map((x) => {\r\n      if (x < 10) {\r\n        return `reg0${x}`;\r\n      }\r\n      return `reg${x}`;\r\n    });\r\n\r\n    this.globalKeys = [\r\n      \"frame\",\r\n      \"time\",\r\n      \"fps\",\r\n      \"bass\",\r\n      \"bass_att\",\r\n      \"mid\",\r\n      \"mid_att\",\r\n      \"treb\",\r\n      \"treb_att\",\r\n      \"meshx\",\r\n      \"meshy\",\r\n      \"aspectx\",\r\n      \"aspecty\",\r\n      \"pixelsx\",\r\n      \"pixelsy\",\r\n    ];\r\n\r\n    this.frameKeys = [\r\n      \"decay\",\r\n      \"wave_a\",\r\n      \"wave_r\",\r\n      \"wave_g\",\r\n      \"wave_b\",\r\n      \"wave_x\",\r\n      \"wave_y\",\r\n      \"wave_scale\",\r\n      \"wave_smoothing\",\r\n      \"wave_mode\",\r\n      \"old_wave_mode\",\r\n      \"wave_mystery\",\r\n      \"ob_size\",\r\n      \"ob_r\",\r\n      \"ob_g\",\r\n      \"ob_b\",\r\n      \"ob_a\",\r\n      \"ib_size\",\r\n      \"ib_r\",\r\n      \"ib_g\",\r\n      \"ib_b\",\r\n      \"ib_a\",\r\n      \"mv_x\",\r\n      \"mv_y\",\r\n      \"mv_dx\",\r\n      \"mv_dy\",\r\n      \"mv_l\",\r\n      \"mv_r\",\r\n      \"mv_g\",\r\n      \"mv_b\",\r\n      \"mv_a\",\r\n      \"echo_zoom\",\r\n      \"echo_alpha\",\r\n      \"echo_orient\",\r\n      \"wave_dots\",\r\n      \"wave_thick\",\r\n      \"additivewave\",\r\n      \"wave_brighten\",\r\n      \"modwavealphabyvolume\",\r\n      \"modwavealphastart\",\r\n      \"modwavealphaend\",\r\n      \"darken_center\",\r\n      \"gammaadj\",\r\n      \"warp\",\r\n      \"warpanimspeed\",\r\n      \"warpscale\",\r\n      \"zoom\",\r\n      \"zoomexp\",\r\n      \"rot\",\r\n      \"cx\",\r\n      \"cy\",\r\n      \"dx\",\r\n      \"dy\",\r\n      \"sx\",\r\n      \"sy\",\r\n      \"fshader\",\r\n      \"wrap\",\r\n      \"invert\",\r\n      \"brighten\",\r\n      \"darken\",\r\n      \"solarize\",\r\n      \"bmotionvectorson\",\r\n      \"b1n\",\r\n      \"b2n\",\r\n      \"b3n\",\r\n      \"b1x\",\r\n      \"b2x\",\r\n      \"b3x\",\r\n      \"b1ed\",\r\n    ];\r\n\r\n    this.waveFrameKeys = [\r\n      \"samples\",\r\n      \"sep\",\r\n      \"scaling\",\r\n      \"spectrum\",\r\n      \"smoothing\",\r\n      \"r\",\r\n      \"g\",\r\n      \"b\",\r\n      \"a\",\r\n    ];\r\n\r\n    this.waveFrameInputKeys = [\"samples\", \"r\", \"g\", \"b\", \"a\"];\r\n\r\n    this.initializeEquations(globalVars);\r\n  }\r\n\r\n  getQVars(pool) {\r\n    return Utils.pickWasm(this.preset.globalPools[pool], this.qs);\r\n  }\r\n\r\n  getTVars(pool) {\r\n    return Utils.pickWasm(this.preset.globalPools[pool], this.ts);\r\n  }\r\n\r\n  initializeEquations(globalVars) {\r\n    this.runVertEQs = !!this.preset.pixel_eqs;\r\n\r\n    this.mdVSQInit = null;\r\n    this.mdVSQAfterFrame = null;\r\n\r\n    const mdVSBase = {\r\n      frame: globalVars.frame,\r\n      time: globalVars.time,\r\n      fps: globalVars.fps,\r\n      bass: globalVars.bass,\r\n      bass_att: globalVars.bass_att,\r\n      mid: globalVars.mid,\r\n      mid_att: globalVars.mid_att,\r\n      treb: globalVars.treb,\r\n      treb_att: globalVars.treb_att,\r\n      meshx: this.mesh_width,\r\n      meshy: this.mesh_height,\r\n      aspectx: this.invAspectx,\r\n      aspecty: this.invAspecty,\r\n      pixelsx: this.texsizeX,\r\n      pixelsy: this.texsizeY,\r\n    };\r\n\r\n    this.mdVS = Object.assign({}, this.preset.baseVals, mdVSBase);\r\n\r\n    // eslint-disable-next-line max-len\r\n    Utils.setWasm(\r\n      this.preset.globalPools.perFrame,\r\n      this.mdVS,\r\n      Object.keys(this.mdVS)\r\n    );\r\n\r\n    this.rand_start = new Float32Array([\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n    ]);\r\n    this.rand_preset = new Float32Array([\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n      Math.random(),\r\n    ]);\r\n\r\n    this.preset.init_eqs();\r\n\r\n    // qs need to be initialized to there init values every frame\r\n    this.mdVSQInit = this.getQVars(\"perFrame\");\r\n\r\n    this.preset.frame_eqs();\r\n\r\n    this.mdVSQAfterFrame = this.getQVars(\"perFrame\");\r\n\r\n    this.mdVSTWaveInits = [];\r\n    if (this.preset.waves && this.preset.waves.length > 0) {\r\n      for (let i = 0; i < this.preset.waves.length; i++) {\r\n        const wave = this.preset.waves[i];\r\n        const baseVals = wave.baseVals;\r\n        if (baseVals.enabled !== 0) {\r\n          // eslint-disable-next-line max-len\r\n          Utils.setWasm(\r\n            this.preset.globalPools[`wavePerFrame${i}`],\r\n            baseVals,\r\n            Object.keys(baseVals)\r\n          );\r\n          if (wave.init_eqs) {\r\n            wave.init_eqs();\r\n\r\n            // base vals need to be reset\r\n            // eslint-disable-next-line max-len\r\n            Utils.setWasm(\r\n              this.preset.globalPools[`wavePerFrame${i}`],\r\n              baseVals,\r\n              Object.keys(baseVals)\r\n            );\r\n          }\r\n          this.mdVSTWaveInits.push(this.getTVars(`wavePerFrame${i}`));\r\n        } else {\r\n          this.mdVSTWaveInits.push({});\r\n        }\r\n      }\r\n    }\r\n\r\n    this.mdVSTShapeInits = [];\r\n    if (this.preset.shapes && this.preset.shapes.length > 0) {\r\n      for (let i = 0; i < this.preset.shapes.length; i++) {\r\n        const shape = this.preset.shapes[i];\r\n        const baseVals = shape.baseVals;\r\n        if (baseVals.enabled !== 0) {\r\n          // eslint-disable-next-line max-len\r\n          Utils.setWasm(\r\n            this.preset.globalPools[`shapePerFrame${i}`],\r\n            baseVals,\r\n            Object.keys(baseVals)\r\n          );\r\n          if (shape.init_eqs) {\r\n            shape.init_eqs();\r\n\r\n            // base vals need to be reset\r\n            // eslint-disable-next-line max-len\r\n            Utils.setWasm(\r\n              this.preset.globalPools[`shapePerFrame${i}`],\r\n              baseVals,\r\n              Object.keys(baseVals)\r\n            );\r\n          }\r\n          this.mdVSTShapeInits.push(this.getTVars(`shapePerFrame${i}`));\r\n        } else {\r\n          this.mdVSTShapeInits.push({});\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updatePreset(preset, globalVars) {\r\n    this.preset = preset;\r\n    this.initializeEquations(globalVars);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  runFrameEquations(globalVars) {\r\n    Utils.setWasm(this.preset.globalPools.perFrame, this.mdVS, this.frameKeys);\r\n    Utils.setWasm(this.preset.globalPools.perFrame, this.mdVSQInit, this.qs);\r\n    Utils.setWasm(\r\n      this.preset.globalPools.perFrame,\r\n      globalVars,\r\n      this.globalKeys\r\n    );\r\n\r\n    this.preset.frame_eqs();\r\n    this.preset.save_qs();\r\n\r\n    this.mdVSQAfterFrame = this.getQVars(\"perFrame\");\r\n\r\n    // eslint-disable-next-line max-len\r\n    const mdVSFrame = Utils.pickWasm(this.preset.globalPools.perFrame, [\r\n      ...this.frameKeys,\r\n      ...this.globalKeys,\r\n    ]);\r\n    mdVSFrame.rand_preset = this.rand_preset;\r\n    mdVSFrame.rand_start = this.rand_start;\r\n\r\n    return mdVSFrame;\r\n  }\r\n\r\n  /* eslint-disable max-len */\r\n  runWaveFrameEquations(waveIdx, globalVars) {\r\n    const baseVals = this.preset.waves[waveIdx].baseVals;\r\n    Utils.setWasm(\r\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\r\n      baseVals,\r\n      this.waveFrameInputKeys\r\n    );\r\n    Utils.setWasm(\r\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\r\n      this.mdVSQAfterFrame,\r\n      this.qs\r\n    );\r\n    Utils.setWasm(\r\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\r\n      this.mdVSTWaveInits[waveIdx],\r\n      this.ts\r\n    );\r\n    Utils.setWasm(\r\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\r\n      globalVars,\r\n      this.globalKeys\r\n    );\r\n    this.preset.waves[waveIdx].frame_eqs();\r\n    return Utils.pickWasm(\r\n      this.preset.globalPools[`wavePerFrame${waveIdx}`],\r\n      this.waveFrameKeys\r\n    );\r\n  }\r\n  /* eslint-enable max-len */\r\n}\r\n","const lineMatcher = /uniform sampler2D sampler_(?:.+?);/g;\r\nconst samplerMatcher = /uniform sampler2D sampler_(.+?);/;\r\n\r\nexport default class ShaderUtils {\r\n  static getShaderParts(t) {\r\n    const sbIndex = t.indexOf(\"shader_body\");\r\n    if (t && sbIndex > -1) {\r\n      const beforeShaderBody = t.substring(0, sbIndex);\r\n      const afterShaderBody = t.substring(sbIndex);\r\n      const firstCurly = afterShaderBody.indexOf(\"{\");\r\n      const lastCurly = afterShaderBody.lastIndexOf(\"}\");\r\n      const shaderBody = afterShaderBody.substring(firstCurly + 1, lastCurly);\r\n      return [beforeShaderBody, shaderBody];\r\n    }\r\n\r\n    return [\"\", t];\r\n  }\r\n\r\n  static getFragmentFloatPrecision(gl) {\r\n    if (\r\n      gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision >\r\n      0\r\n    ) {\r\n      return \"highp\";\r\n    } else if (\r\n      gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT)\r\n        .precision > 0\r\n    ) {\r\n      return \"mediump\";\r\n    }\r\n    return \"lowp\";\r\n  }\r\n\r\n  static getUserSamplers(text) {\r\n    const samplers = [];\r\n    const lineMatches = text.match(lineMatcher);\r\n    if (lineMatches && lineMatches.length > 0) {\r\n      for (let i = 0; i < lineMatches.length; i++) {\r\n        const samplerMatches = lineMatches[i].match(samplerMatcher);\r\n        if (samplerMatches && samplerMatches.length > 0) {\r\n          const sampler = samplerMatches[1];\r\n          samplers.push({ sampler });\r\n        }\r\n      }\r\n    }\r\n    return samplers;\r\n  }\r\n}\r\n","export default class WaveUtils {\r\n  /* eslint-disable no-param-reassign */\r\n  static smoothWave(positions, positionsSmoothed, nVertsIn, zCoord = false) {\r\n    const c1 = -0.15;\r\n    const c2 = 1.15;\r\n    const c3 = 1.15;\r\n    const c4 = -0.15;\r\n    const invSum = 1.0 / (c1 + c2 + c3 + c4);\r\n\r\n    let j = 0;\r\n\r\n    let iBelow = 0;\r\n    let iAbove;\r\n    let iAbove2 = 1;\r\n    for (let i = 0; i < nVertsIn - 1; i++) {\r\n      iAbove = iAbove2;\r\n      iAbove2 = Math.min(nVertsIn - 1, i + 2);\r\n\r\n      for (let k = 0; k < 3; k++) {\r\n        positionsSmoothed[j * 3 + k] = positions[i * 3 + k];\r\n      }\r\n\r\n      if (zCoord) {\r\n        for (let k = 0; k < 3; k++) {\r\n          positionsSmoothed[(j + 1) * 3 + k] =\r\n            (c1 * positions[iBelow * 3 + k] +\r\n              c2 * positions[i * 3 + k] +\r\n              c3 * positions[iAbove * 3 + k] +\r\n              c4 * positions[iAbove2 * 3 + k]) *\r\n            invSum;\r\n        }\r\n      } else {\r\n        for (let k = 0; k < 2; k++) {\r\n          positionsSmoothed[(j + 1) * 3 + k] =\r\n            (c1 * positions[iBelow * 3 + k] +\r\n              c2 * positions[i * 3 + k] +\r\n              c3 * positions[iAbove * 3 + k] +\r\n              c4 * positions[iAbove2 * 3 + k]) *\r\n            invSum;\r\n        }\r\n        positionsSmoothed[(j + 1) * 3 + 2] = 0;\r\n      }\r\n\r\n      iBelow = i;\r\n      j += 2;\r\n    }\r\n\r\n    for (let k = 0; k < 3; k++) {\r\n      positionsSmoothed[j * 3 + k] = positions[(nVertsIn - 1) * 3 + k];\r\n    }\r\n  }\r\n\r\n  static smoothWaveAndColor(\r\n    positions,\r\n    colors,\r\n    positionsSmoothed,\r\n    colorsSmoothed,\r\n    nVertsIn,\r\n    zCoord = false\r\n  ) {\r\n    const c1 = -0.15;\r\n    const c2 = 1.15;\r\n    const c3 = 1.15;\r\n    const c4 = -0.15;\r\n    const invSum = 1.0 / (c1 + c2 + c3 + c4);\r\n\r\n    let j = 0;\r\n\r\n    let iBelow = 0;\r\n    let iAbove;\r\n    let iAbove2 = 1;\r\n    for (let i = 0; i < nVertsIn - 1; i++) {\r\n      iAbove = iAbove2;\r\n      iAbove2 = Math.min(nVertsIn - 1, i + 2);\r\n\r\n      for (let k = 0; k < 3; k++) {\r\n        positionsSmoothed[j * 3 + k] = positions[i * 3 + k];\r\n      }\r\n\r\n      if (zCoord) {\r\n        for (let k = 0; k < 3; k++) {\r\n          positionsSmoothed[(j + 1) * 3 + k] =\r\n            (c1 * positions[iBelow * 3 + k] +\r\n              c2 * positions[i * 3 + k] +\r\n              c3 * positions[iAbove * 3 + k] +\r\n              c4 * positions[iAbove2 * 3 + k]) *\r\n            invSum;\r\n        }\r\n      } else {\r\n        for (let k = 0; k < 2; k++) {\r\n          positionsSmoothed[(j + 1) * 3 + k] =\r\n            (c1 * positions[iBelow * 3 + k] +\r\n              c2 * positions[i * 3 + k] +\r\n              c3 * positions[iAbove * 3 + k] +\r\n              c4 * positions[iAbove2 * 3 + k]) *\r\n            invSum;\r\n        }\r\n        positionsSmoothed[(j + 1) * 3 + 2] = 0;\r\n      }\r\n\r\n      for (let k = 0; k < 4; k++) {\r\n        colorsSmoothed[j * 4 + k] = colors[i * 4 + k];\r\n        colorsSmoothed[(j + 1) * 4 + k] = colors[i * 4 + k];\r\n      }\r\n\r\n      iBelow = i;\r\n      j += 2;\r\n    }\r\n\r\n    for (let k = 0; k < 3; k++) {\r\n      positionsSmoothed[j * 3 + k] = positions[(nVertsIn - 1) * 3 + k];\r\n    }\r\n\r\n    for (let k = 0; k < 4; k++) {\r\n      colorsSmoothed[j * 4 + k] = colors[(nVertsIn - 1) * 4 + k];\r\n    }\r\n  }\r\n\r\n  /* eslint-enable no-param-reassign */\r\n}\r\n","import ShaderUtils from \"../shaders/shaderUtils\";\r\nimport WaveUtils from \"./waveUtils\";\r\n\r\nexport default class BasicWaveform {\r\n  constructor(gl, opts = {}) {\r\n    this.gl = gl;\r\n\r\n    const numAudioSamples = 512;\r\n    this.positions = new Float32Array(numAudioSamples * 3);\r\n    this.positions2 = new Float32Array(numAudioSamples * 3);\r\n    this.oldPositions = new Float32Array(numAudioSamples * 3);\r\n    this.oldPositions2 = new Float32Array(numAudioSamples * 3);\r\n    this.smoothedPositions = new Float32Array((numAudioSamples * 2 - 1) * 3);\r\n    this.smoothedPositions2 = new Float32Array((numAudioSamples * 2 - 1) * 3);\r\n    this.color = [0, 0, 0, 1];\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n\r\n    this.vertexBuf = this.gl.createBuffer();\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      in vec3 aPos;\r\n      uniform vec2 thickOffset;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      out vec4 fragColor;\r\n      uniform vec4 u_color;\r\n      void main(void) {\r\n        fragColor = u_color;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.aPosLoc = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\r\n\r\n    this.colorLoc = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n    this.thickOffsetLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"thickOffset\"\r\n    );\r\n  }\r\n\r\n  static processWaveform(timeArray, mdVSFrame) {\r\n    const waveform = [];\r\n\r\n    const scale = mdVSFrame.wave_scale / 128.0;\r\n    const smooth = mdVSFrame.wave_smoothing;\r\n    const smooth2 = scale * (1.0 - smooth);\r\n\r\n    waveform.push(timeArray[0] * scale);\r\n    for (let i = 1; i < timeArray.length; i++) {\r\n      waveform.push(timeArray[i] * smooth2 + waveform[i - 1] * smooth);\r\n    }\r\n\r\n    return waveform;\r\n  }\r\n\r\n  generateWaveform(blending, blendProgress, timeArrayL, timeArrayR, mdVSFrame) {\r\n    let alpha = mdVSFrame.wave_a;\r\n    const vol = (mdVSFrame.bass + mdVSFrame.mid + mdVSFrame.treb) / 3.0;\r\n\r\n    if (vol > -0.01 && alpha > 0.001 && timeArrayL.length > 0) {\r\n      const waveL = BasicWaveform.processWaveform(timeArrayL, mdVSFrame);\r\n      const waveR = BasicWaveform.processWaveform(timeArrayR, mdVSFrame);\r\n\r\n      const newWaveMode = Math.floor(mdVSFrame.wave_mode) % 8;\r\n      const oldWaveMode = Math.floor(mdVSFrame.old_wave_mode) % 8;\r\n\r\n      const wavePosX = mdVSFrame.wave_x * 2.0 - 1.0;\r\n      const wavePosY = mdVSFrame.wave_y * 2.0 - 1.0;\r\n\r\n      this.numVert = 0;\r\n      this.oldNumVert = 0;\r\n\r\n      const its = blending && newWaveMode !== oldWaveMode ? 2 : 1;\r\n      for (let it = 0; it < its; it++) {\r\n        const waveMode = it === 0 ? newWaveMode : oldWaveMode;\r\n\r\n        let fWaveParam2 = mdVSFrame.wave_mystery;\r\n        if (\r\n          (waveMode === 0 || waveMode === 1 || waveMode === 4) &&\r\n          (fWaveParam2 < -1 || fWaveParam2 > 1)\r\n        ) {\r\n          fWaveParam2 = fWaveParam2 * 0.5 + 0.5;\r\n          fWaveParam2 -= Math.floor(fWaveParam2);\r\n          fWaveParam2 = Math.abs(fWaveParam2);\r\n          fWaveParam2 = fWaveParam2 * 2 - 1;\r\n        }\r\n\r\n        let numVert;\r\n        let positions;\r\n        let positions2;\r\n        if (it === 0) {\r\n          positions = this.positions;\r\n          positions2 = this.positions2;\r\n        } else {\r\n          positions = this.oldPositions;\r\n          positions2 = this.oldPositions2;\r\n        }\r\n\r\n        alpha = mdVSFrame.wave_a;\r\n        if (waveMode === 0) {\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          numVert = Math.floor(waveL.length / 2) + 1;\r\n          const numVertInv = 1.0 / (numVert - 1);\r\n          const sampleOffset = Math.floor((waveL.length - numVert) / 2);\r\n          for (let i = 0; i < numVert - 1; i++) {\r\n            let rad = 0.5 + 0.4 * waveR[i + sampleOffset] + fWaveParam2;\r\n            const ang = i * numVertInv * 2 * Math.PI + mdVSFrame.time * 0.2;\r\n\r\n            if (i < numVert / 10) {\r\n              let mix = i / (numVert * 0.1);\r\n              mix = 0.5 - 0.5 * Math.cos(mix * Math.PI);\r\n              const rad2 =\r\n                0.5 + 0.4 * waveR[i + numVert + sampleOffset] + fWaveParam2;\r\n              rad = (1.0 - mix) * rad2 + rad * mix;\r\n            }\r\n\r\n            positions[i * 3 + 0] =\r\n              rad * Math.cos(ang) * this.aspecty + wavePosX;\r\n            positions[i * 3 + 1] =\r\n              rad * Math.sin(ang) * this.aspectx + wavePosY;\r\n            positions[i * 3 + 2] = 0;\r\n          }\r\n\r\n          // connect the loop\r\n          positions[(numVert - 1) * 3 + 0] = positions[0];\r\n          positions[(numVert - 1) * 3 + 1] = positions[1];\r\n          positions[(numVert - 1) * 3 + 2] = 0;\r\n        } else if (waveMode === 1) {\r\n          alpha *= 1.25;\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          numVert = Math.floor(waveL.length / 2);\r\n          for (let i = 0; i < numVert; i++) {\r\n            const rad = 0.53 + 0.43 * waveR[i] + fWaveParam2;\r\n            const ang = waveL[i + 32] * 0.5 * Math.PI + mdVSFrame.time * 2.3;\r\n\r\n            positions[i * 3 + 0] =\r\n              rad * Math.cos(ang) * this.aspecty + wavePosX;\r\n            positions[i * 3 + 1] =\r\n              rad * Math.sin(ang) * this.aspectx + wavePosY;\r\n            positions[i * 3 + 2] = 0;\r\n          }\r\n        } else if (waveMode === 2) {\r\n          if (this.texsizeX < 1024) {\r\n            alpha *= 0.09;\r\n          } else if (this.texsizeX >= 1024 && this.texsizeX < 2048) {\r\n            alpha *= 0.11;\r\n          } else {\r\n            alpha *= 0.13;\r\n          }\r\n\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          numVert = waveL.length;\r\n          for (let i = 0; i < waveL.length; i++) {\r\n            positions[i * 3 + 0] = waveR[i] * this.aspecty + wavePosX;\r\n            positions[i * 3 + 1] =\r\n              waveL[(i + 32) % waveL.length] * this.aspectx + wavePosY;\r\n            positions[i * 3 + 2] = 0;\r\n          }\r\n        } else if (waveMode === 3) {\r\n          if (this.texsizeX < 1024) {\r\n            alpha *= 0.15;\r\n          } else if (this.texsizeX >= 1024 && this.texsizeX < 2048) {\r\n            alpha *= 0.22;\r\n          } else {\r\n            alpha *= 0.33;\r\n          }\r\n\r\n          alpha *= 1.3;\r\n          alpha *= mdVSFrame.treb * mdVSFrame.treb; // should be treb_imm\r\n\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          numVert = waveL.length;\r\n          for (let i = 0; i < waveL.length; i++) {\r\n            positions[i * 3 + 0] = waveR[i] * this.aspecty + wavePosX;\r\n            positions[i * 3 + 1] =\r\n              waveL[(i + 32) % waveL.length] * this.aspectx + wavePosY;\r\n            positions[i * 3 + 2] = 0;\r\n          }\r\n        } else if (waveMode === 4) {\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          numVert = waveL.length;\r\n          if (numVert > this.texsizeX / 3) {\r\n            numVert = Math.floor(this.texsizeX / 3);\r\n          }\r\n          const numVertInv = 1.0 / numVert;\r\n          const sampleOffset = Math.floor((waveL.length - numVert) / 2);\r\n\r\n          const w1 = 0.45 + 0.5 * (fWaveParam2 * 0.5 + 0.5);\r\n          const w2 = 1.0 - w1;\r\n          for (let i = 0; i < numVert; i++) {\r\n            let x =\r\n              2.0 * i * numVertInv +\r\n              (wavePosX - 1) +\r\n              waveR[(i + 25 + sampleOffset) % waveL.length] * 0.44;\r\n            let y = waveL[i + sampleOffset] * 0.47 + wavePosY;\r\n\r\n            // momentum\r\n            if (i > 1) {\r\n              x =\r\n                x * w2 +\r\n                w1 *\r\n                  (positions[(i - 1) * 3 + 0] * 2.0 -\r\n                    positions[(i - 2) * 3 + 0]);\r\n              y =\r\n                y * w2 +\r\n                w1 *\r\n                  (positions[(i - 1) * 3 + 1] * 2.0 -\r\n                    positions[(i - 2) * 3 + 1]);\r\n            }\r\n\r\n            positions[i * 3 + 0] = x;\r\n            positions[i * 3 + 1] = y;\r\n            positions[i * 3 + 2] = 0;\r\n          }\r\n        } else if (waveMode === 5) {\r\n          if (this.texsizeX < 1024) {\r\n            alpha *= 0.09;\r\n          } else if (this.texsizeX >= 1024 && this.texsizeX < 2048) {\r\n            alpha *= 0.11;\r\n          } else {\r\n            alpha *= 0.13;\r\n          }\r\n\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          const cosRot = Math.cos(mdVSFrame.time * 0.3);\r\n          const sinRot = Math.sin(mdVSFrame.time * 0.3);\r\n\r\n          numVert = waveL.length;\r\n          for (let i = 0; i < waveL.length; i++) {\r\n            const ioff = (i + 32) % waveL.length;\r\n            const x0 = waveR[i] * waveL[ioff] + waveL[i] * waveR[ioff];\r\n            const y0 = waveR[i] * waveR[i] - waveL[ioff] * waveL[ioff];\r\n\r\n            positions[i * 3 + 0] =\r\n              (x0 * cosRot - y0 * sinRot) * (this.aspecty + wavePosX);\r\n            positions[i * 3 + 1] =\r\n              (x0 * sinRot + y0 * cosRot) * (this.aspectx + wavePosY);\r\n            positions[i * 3 + 2] = 0;\r\n          }\r\n        } else if (waveMode === 6 || waveMode === 7) {\r\n          if (mdVSFrame.modwavealphabyvolume > 0) {\r\n            const alphaDiff =\r\n              mdVSFrame.modwavealphaend - mdVSFrame.modwavealphastart;\r\n            alpha *= (vol - mdVSFrame.modwavealphastart) / alphaDiff;\r\n          }\r\n          alpha = Math.clamp(alpha, 0, 1);\r\n\r\n          numVert = Math.floor(waveL.length / 2);\r\n          if (numVert > this.texsizeX / 3) {\r\n            numVert = Math.floor(this.texsizeX / 3);\r\n          }\r\n          const sampleOffset = Math.floor((waveL.length - numVert) / 2);\r\n\r\n          const ang = Math.PI * 0.5 * fWaveParam2;\r\n          let dx = Math.cos(ang);\r\n          let dy = Math.sin(ang);\r\n\r\n          const edgex = [\r\n            wavePosX * Math.cos(ang + Math.PI * 0.5) - dx * 3.0,\r\n            wavePosX * Math.cos(ang + Math.PI * 0.5) + dx * 3.0,\r\n          ];\r\n          const edgey = [\r\n            wavePosX * Math.sin(ang + Math.PI * 0.5) - dy * 3.0,\r\n            wavePosX * Math.sin(ang + Math.PI * 0.5) + dy * 3.0,\r\n          ];\r\n\r\n          for (let i = 0; i < 2; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n              let t;\r\n              let bClip = false;\r\n\r\n              switch (j) {\r\n                case 0:\r\n                  if (edgex[i] > 1.1) {\r\n                    t = (1.1 - edgex[1 - i]) / (edgex[i] - edgex[1 - i]);\r\n                    bClip = true;\r\n                  }\r\n                  break;\r\n                case 1:\r\n                  if (edgex[i] < -1.1) {\r\n                    t = (-1.1 - edgex[1 - i]) / (edgex[i] - edgex[1 - i]);\r\n                    bClip = true;\r\n                  }\r\n                  break;\r\n                case 2:\r\n                  if (edgey[i] > 1.1) {\r\n                    t = (1.1 - edgey[1 - i]) / (edgey[i] - edgey[1 - i]);\r\n                    bClip = true;\r\n                  }\r\n                  break;\r\n                case 3:\r\n                  if (edgey[i] < -1.1) {\r\n                    t = (-1.1 - edgey[1 - i]) / (edgey[i] - edgey[1 - i]);\r\n                    bClip = true;\r\n                  }\r\n                  break;\r\n                default:\r\n              }\r\n\r\n              if (bClip) {\r\n                const dxi = edgex[i] - edgex[1 - i];\r\n                const dyi = edgey[i] - edgey[1 - i];\r\n                edgex[i] = edgex[1 - i] + dxi * t;\r\n                edgey[i] = edgey[1 - i] + dyi * t;\r\n              }\r\n            }\r\n          }\r\n\r\n          dx = (edgex[1] - edgex[0]) / numVert;\r\n          dy = (edgey[1] - edgey[0]) / numVert;\r\n\r\n          const ang2 = Math.atan2(dy, dx);\r\n          const perpDx = Math.cos(ang2 + Math.PI * 0.5);\r\n          const perpDy = Math.sin(ang2 + Math.PI * 0.5);\r\n\r\n          if (waveMode === 6) {\r\n            for (let i = 0; i < numVert; i++) {\r\n              const sample = waveL[i + sampleOffset];\r\n              positions[i * 3 + 0] = edgex[0] + dx * i + perpDx * 0.25 * sample;\r\n              positions[i * 3 + 1] = edgey[0] + dy * i + perpDy * 0.25 * sample;\r\n              positions[i * 3 + 2] = 0;\r\n            }\r\n          } else if (waveMode === 7) {\r\n            const sep = (wavePosY * 0.5 + 0.5) ** 2;\r\n            for (let i = 0; i < numVert; i++) {\r\n              const sample = waveL[i + sampleOffset];\r\n              positions[i * 3 + 0] =\r\n                edgex[0] + dx * i + perpDx * (0.25 * sample + sep);\r\n              positions[i * 3 + 1] =\r\n                edgey[0] + dy * i + perpDy * (0.25 * sample + sep);\r\n              positions[i * 3 + 2] = 0;\r\n            }\r\n\r\n            for (let i = 0; i < numVert; i++) {\r\n              const sample = waveR[i + sampleOffset];\r\n              positions2[i * 3 + 0] =\r\n                edgex[0] + dx * i + perpDx * (0.25 * sample - sep);\r\n              positions2[i * 3 + 1] =\r\n                edgey[0] + dy * i + perpDy * (0.25 * sample - sep);\r\n              positions2[i * 3 + 2] = 0;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (it === 0) {\r\n          this.positions = positions;\r\n          this.positions2 = positions2;\r\n          this.numVert = numVert;\r\n          this.alpha = alpha;\r\n        } else {\r\n          this.oldPositions = positions;\r\n          this.oldPositions2 = positions2;\r\n          this.oldNumVert = numVert;\r\n          this.oldAlpha = alpha;\r\n        }\r\n      }\r\n\r\n      const mix = 0.5 - 0.5 * Math.cos(blendProgress * Math.PI);\r\n      const mix2 = 1 - mix;\r\n\r\n      if (this.oldNumVert > 0) {\r\n        alpha = mix * this.alpha + mix2 * this.oldAlpha;\r\n      }\r\n\r\n      let r = Math.clamp(mdVSFrame.wave_r, 0, 1);\r\n      let g = Math.clamp(mdVSFrame.wave_g, 0, 1);\r\n      let b = Math.clamp(mdVSFrame.wave_b, 0, 1);\r\n\r\n      if (mdVSFrame.wave_brighten !== 0) {\r\n        const maxc = Math.max(r, g, b);\r\n        if (maxc > 0.01) {\r\n          r /= maxc;\r\n          g /= maxc;\r\n          b /= maxc;\r\n        }\r\n      }\r\n\r\n      this.color = [r, g, b, alpha];\r\n\r\n      if (this.oldNumVert > 0) {\r\n        if (newWaveMode === 7) {\r\n          const m = (this.oldNumVert - 1) / (this.numVert * 2);\r\n          for (let i = 0; i < this.numVert; i++) {\r\n            const fIdx = i * m;\r\n            const nIdx = Math.floor(fIdx);\r\n            const t = fIdx - nIdx;\r\n\r\n            const x =\r\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\r\n            const y =\r\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\r\n\r\n            this.positions[i * 3 + 0] =\r\n              this.positions[i * 3 + 0] * mix + x * mix2;\r\n            this.positions[i * 3 + 1] =\r\n              this.positions[i * 3 + 1] * mix + y * mix2;\r\n            this.positions[i * 3 + 2] = 0;\r\n          }\r\n\r\n          for (let i = 0; i < this.numVert; i++) {\r\n            const fIdx = (i + this.numVert) * m;\r\n            const nIdx = Math.floor(fIdx);\r\n            const t = fIdx - nIdx;\r\n\r\n            const x =\r\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\r\n            const y =\r\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\r\n\r\n            this.positions2[i * 3 + 0] =\r\n              this.positions2[i * 3 + 0] * mix + x * mix2;\r\n            this.positions2[i * 3 + 1] =\r\n              this.positions2[i * 3 + 1] * mix + y * mix2;\r\n            this.positions2[i * 3 + 2] = 0;\r\n          }\r\n        } else if (oldWaveMode === 7) {\r\n          const halfNumVert = this.numVert / 2;\r\n          const m = (this.oldNumVert - 1) / halfNumVert;\r\n          for (let i = 0; i < halfNumVert; i++) {\r\n            const fIdx = i * m;\r\n            const nIdx = Math.floor(fIdx);\r\n            const t = fIdx - nIdx;\r\n\r\n            const x =\r\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\r\n            const y =\r\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\r\n\r\n            this.positions[i * 3 + 0] =\r\n              this.positions[i * 3 + 0] * mix + x * mix2;\r\n            this.positions[i * 3 + 1] =\r\n              this.positions[i * 3 + 1] * mix + y * mix2;\r\n            this.positions[i * 3 + 2] = 0;\r\n          }\r\n\r\n          for (let i = 0; i < halfNumVert; i++) {\r\n            const fIdx = i * m;\r\n            const nIdx = Math.floor(fIdx);\r\n            const t = fIdx - nIdx;\r\n\r\n            const x =\r\n              this.oldPositions2[nIdx * 3 + 0] * (1 - t) +\r\n              this.oldPositions2[(nIdx + 1) * 3 + 0] * t;\r\n            const y =\r\n              this.oldPositions2[nIdx * 3 + 1] * (1 - t) +\r\n              this.oldPositions2[(nIdx + 1) * 3 + 1] * t;\r\n\r\n            this.positions2[i * 3 + 0] =\r\n              this.positions[(i + halfNumVert) * 3 + 0] * mix + x * mix2;\r\n            this.positions2[i * 3 + 1] =\r\n              this.positions[(i + halfNumVert) * 3 + 1] * mix + y * mix2;\r\n            this.positions2[i * 3 + 2] = 0;\r\n          }\r\n        } else {\r\n          const m = (this.oldNumVert - 1) / this.numVert;\r\n          for (let i = 0; i < this.numVert; i++) {\r\n            const fIdx = i * m;\r\n            const nIdx = Math.floor(fIdx);\r\n            const t = fIdx - nIdx;\r\n\r\n            const x =\r\n              this.oldPositions[nIdx * 3 + 0] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 0] * t;\r\n            const y =\r\n              this.oldPositions[nIdx * 3 + 1] * (1 - t) +\r\n              this.oldPositions[(nIdx + 1) * 3 + 1] * t;\r\n\r\n            this.positions[i * 3 + 0] =\r\n              this.positions[i * 3 + 0] * mix + x * mix2;\r\n            this.positions[i * 3 + 1] =\r\n              this.positions[i * 3 + 1] * mix + y * mix2;\r\n            this.positions[i * 3 + 2] = 0;\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < this.numVert; i++) {\r\n        this.positions[i * 3 + 1] = -this.positions[i * 3 + 1];\r\n      }\r\n\r\n      this.smoothedNumVert = this.numVert * 2 - 1;\r\n      WaveUtils.smoothWave(\r\n        this.positions,\r\n        this.smoothedPositions,\r\n        this.numVert\r\n      );\r\n\r\n      if (newWaveMode === 7 || oldWaveMode === 7) {\r\n        for (let i = 0; i < this.numVert; i++) {\r\n          this.positions2[i * 3 + 1] = -this.positions2[i * 3 + 1];\r\n        }\r\n\r\n        WaveUtils.smoothWave(\r\n          this.positions2,\r\n          this.smoothedPositions2,\r\n          this.numVert\r\n        );\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  drawBasicWaveform(\r\n    blending,\r\n    blendProgress,\r\n    timeArrayL,\r\n    timeArrayR,\r\n    mdVSFrame\r\n  ) {\r\n    if (\r\n      this.generateWaveform(\r\n        blending,\r\n        blendProgress,\r\n        timeArrayL,\r\n        timeArrayR,\r\n        mdVSFrame\r\n      )\r\n    ) {\r\n      this.gl.useProgram(this.shaderProgram);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        this.smoothedPositions,\r\n        this.gl.STATIC_DRAW\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(this.aPosLoc, 3, this.gl.FLOAT, false, 0, 0);\r\n      this.gl.enableVertexAttribArray(this.aPosLoc);\r\n\r\n      this.gl.uniform4fv(this.colorLoc, this.color);\r\n\r\n      let instances = 1;\r\n      if (mdVSFrame.wave_thick !== 0 || mdVSFrame.wave_dots !== 0) {\r\n        instances = 4;\r\n      }\r\n\r\n      if (mdVSFrame.additivewave !== 0) {\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\r\n      } else {\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n      }\r\n\r\n      const drawMode =\r\n        mdVSFrame.wave_dots !== 0 ? this.gl.POINTS : this.gl.LINE_STRIP;\r\n\r\n      // TODO: use drawArraysInstanced\r\n      for (let i = 0; i < instances; i++) {\r\n        const offset = 2;\r\n        if (i === 0) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\r\n        } else if (i === 1) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [offset / this.texsizeX, 0]);\r\n        } else if (i === 2) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, offset / this.texsizeY]);\r\n        } else if (i === 3) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [\r\n            offset / this.texsizeX,\r\n            offset / this.texsizeY,\r\n          ]);\r\n        }\r\n\r\n        this.gl.drawArrays(drawMode, 0, this.smoothedNumVert);\r\n      }\r\n\r\n      const waveMode = Math.floor(mdVSFrame.wave_mode) % 8;\r\n      if (waveMode === 7) {\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n        this.gl.bufferData(\r\n          this.gl.ARRAY_BUFFER,\r\n          this.smoothedPositions2,\r\n          this.gl.STATIC_DRAW\r\n        );\r\n\r\n        this.gl.vertexAttribPointer(\r\n          this.aPosLoc,\r\n          3,\r\n          this.gl.FLOAT,\r\n          false,\r\n          0,\r\n          0\r\n        );\r\n        this.gl.enableVertexAttribArray(this.aPosLoc);\r\n\r\n        for (let i = 0; i < instances; i++) {\r\n          const offset = 2;\r\n          if (i === 0) {\r\n            this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\r\n          } else if (i === 1) {\r\n            this.gl.uniform2fv(this.thickOffsetLoc, [\r\n              offset / this.texsizeX,\r\n              0,\r\n            ]);\r\n          } else if (i === 2) {\r\n            this.gl.uniform2fv(this.thickOffsetLoc, [\r\n              0,\r\n              offset / this.texsizeY,\r\n            ]);\r\n          } else if (i === 3) {\r\n            this.gl.uniform2fv(this.thickOffsetLoc, [\r\n              offset / this.texsizeX,\r\n              offset / this.texsizeY,\r\n            ]);\r\n          }\r\n\r\n          this.gl.drawArrays(drawMode, 0, this.smoothedNumVert);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Utils from \"../../utils\";\r\nimport ShaderUtils from \"../shaders/shaderUtils\";\r\nimport WaveUtils from \"./waveUtils\";\r\n\r\nexport default class CustomWaveform {\r\n  constructor(index, gl, opts) {\r\n    this.index = index;\r\n    this.gl = gl;\r\n\r\n    const maxSamples = 512;\r\n    this.pointsData = [\r\n      new Float32Array(maxSamples),\r\n      new Float32Array(maxSamples),\r\n    ];\r\n    this.positions = new Float32Array(maxSamples * 3);\r\n    this.colors = new Float32Array(maxSamples * 4);\r\n    this.smoothedPositions = new Float32Array((maxSamples * 2 - 1) * 3);\r\n    this.smoothedColors = new Float32Array((maxSamples * 2 - 1) * 4);\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n    this.colorVertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      uniform float uSize;\r\n      uniform vec2 thickOffset;\r\n      in vec3 aPos;\r\n      in vec4 aColor;\r\n      out vec4 vColor;\r\n      void main(void) {\r\n        vColor = aColor;\r\n        gl_PointSize = uSize;\r\n        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      in vec4 vColor;\r\n      out vec4 fragColor;\r\n      void main(void) {\r\n        fragColor = vColor;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.aPosLocation = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\r\n    this.aColorLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aColor\"\r\n    );\r\n\r\n    this.sizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"uSize\");\r\n    this.thickOffsetLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"thickOffset\"\r\n    );\r\n  }\r\n\r\n  generateWaveform(\r\n    timeArrayL,\r\n    timeArrayR,\r\n    freqArrayL,\r\n    freqArrayR,\r\n    globalVars,\r\n    presetEquationRunner,\r\n    waveEqs,\r\n    alphaMult\r\n  ) {\r\n    if (waveEqs.baseVals.enabled !== 0 && timeArrayL.length > 0) {\r\n      let mdVSWaveFrame;\r\n      if (presetEquationRunner.preset.useWASM) {\r\n        mdVSWaveFrame = presetEquationRunner.runWaveFrameEquations(\r\n          this.index,\r\n          globalVars\r\n        );\r\n      } else {\r\n        const mdVSWave = Object.assign(\r\n          {},\r\n          presetEquationRunner.mdVSWaves[this.index],\r\n          presetEquationRunner.mdVSFrameMapWaves[this.index],\r\n          presetEquationRunner.mdVSQAfterFrame,\r\n          presetEquationRunner.mdVSTWaveInits[this.index],\r\n          globalVars\r\n        );\r\n\r\n        mdVSWaveFrame = presetEquationRunner.runWaveFrameEquations(\r\n          this.index,\r\n          mdVSWave\r\n        );\r\n      }\r\n\r\n      const maxSamples = 512;\r\n      if (Object.prototype.hasOwnProperty.call(mdVSWaveFrame, \"samples\")) {\r\n        this.samples = mdVSWaveFrame.samples;\r\n      } else {\r\n        this.samples = maxSamples;\r\n      }\r\n\r\n      if (this.samples > maxSamples) {\r\n        this.samples = maxSamples;\r\n      }\r\n      this.samples = Math.floor(this.samples);\r\n\r\n      const baseVals = presetEquationRunner.preset.waves[this.index].baseVals;\r\n\r\n      const sep = Math.floor(mdVSWaveFrame.sep);\r\n      const scaling = mdVSWaveFrame.scaling;\r\n      const spectrum = mdVSWaveFrame.spectrum;\r\n      const smoothing = mdVSWaveFrame.smoothing;\r\n      const usedots = baseVals.usedots;\r\n\r\n      const frameR = mdVSWaveFrame.r;\r\n      const frameG = mdVSWaveFrame.g;\r\n      const frameB = mdVSWaveFrame.b;\r\n      const frameA = mdVSWaveFrame.a;\r\n\r\n      const waveScale = presetEquationRunner.preset.baseVals.wave_scale;\r\n\r\n      this.samples -= sep;\r\n\r\n      if (this.samples >= 2 || (usedots !== 0 && this.samples >= 1)) {\r\n        const useSpectrum = spectrum !== 0;\r\n        const scale = (useSpectrum ? 0.15 : 0.004) * scaling * waveScale;\r\n        const pointsLeft = useSpectrum ? freqArrayL : timeArrayL;\r\n        const pointsRight = useSpectrum ? freqArrayR : timeArrayR;\r\n\r\n        const j0 = useSpectrum\r\n          ? 0\r\n          : Math.floor((maxSamples - this.samples) / 2 - sep / 2);\r\n        const j1 = useSpectrum\r\n          ? 0\r\n          : Math.floor((maxSamples - this.samples) / 2 + sep / 2);\r\n        const t = useSpectrum ? (maxSamples - sep) / this.samples : 1;\r\n        const mix1 = (smoothing * 0.98) ** 0.5;\r\n        const mix2 = 1 - mix1;\r\n\r\n        // Milkdrop smooths waveform forward, backward and then scales\r\n        this.pointsData[0][0] = pointsLeft[j0];\r\n        this.pointsData[1][0] = pointsRight[j1];\r\n        for (let j = 1; j < this.samples; j++) {\r\n          const left = pointsLeft[Math.floor(j * t + j0)];\r\n          const right = pointsRight[Math.floor(j * t + j1)];\r\n          this.pointsData[0][j] =\r\n            left * mix2 + this.pointsData[0][j - 1] * mix1;\r\n          this.pointsData[1][j] =\r\n            right * mix2 + this.pointsData[1][j - 1] * mix1;\r\n        }\r\n        for (let j = this.samples - 2; j >= 0; j--) {\r\n          this.pointsData[0][j] =\r\n            this.pointsData[0][j] * mix2 + this.pointsData[0][j + 1] * mix1;\r\n          this.pointsData[1][j] =\r\n            this.pointsData[1][j] * mix2 + this.pointsData[1][j + 1] * mix1;\r\n        }\r\n        for (let j = 0; j < this.samples; j++) {\r\n          this.pointsData[0][j] *= scale;\r\n          this.pointsData[1][j] *= scale;\r\n        }\r\n\r\n        if (!presetEquationRunner.preset.useWASM) {\r\n          for (let j = 0; j < this.samples; j++) {\r\n            const value1 = this.pointsData[0][j];\r\n            const value2 = this.pointsData[1][j];\r\n\r\n            mdVSWaveFrame.sample = j / (this.samples - 1);\r\n            mdVSWaveFrame.value1 = value1;\r\n            mdVSWaveFrame.value2 = value2;\r\n            mdVSWaveFrame.x = 0.5 + value1;\r\n            mdVSWaveFrame.y = 0.5 + value2;\r\n            mdVSWaveFrame.r = frameR;\r\n            mdVSWaveFrame.g = frameG;\r\n            mdVSWaveFrame.b = frameB;\r\n            mdVSWaveFrame.a = frameA;\r\n\r\n            if (waveEqs.point_eqs !== \"\") {\r\n              mdVSWaveFrame = presetEquationRunner.runWavePointEquations(\r\n                this.index,\r\n                mdVSWaveFrame\r\n              );\r\n            }\r\n\r\n            const x = (mdVSWaveFrame.x * 2 - 1) * this.invAspectx;\r\n            const y = (mdVSWaveFrame.y * -2 + 1) * this.invAspecty;\r\n            const r = mdVSWaveFrame.r;\r\n            const g = mdVSWaveFrame.g;\r\n            const b = mdVSWaveFrame.b;\r\n            const a = mdVSWaveFrame.a;\r\n\r\n            this.positions[j * 3 + 0] = x;\r\n            this.positions[j * 3 + 1] = y;\r\n            this.positions[j * 3 + 2] = 0;\r\n\r\n            this.colors[j * 4 + 0] = r;\r\n            this.colors[j * 4 + 1] = g;\r\n            this.colors[j * 4 + 2] = b;\r\n            this.colors[j * 4 + 3] = a * alphaMult;\r\n          }\r\n        } else {\r\n          const varPool =\r\n            presetEquationRunner.preset.globalPools[\r\n              `wavePerFrame${this.index}`\r\n            ];\r\n          for (let j = 0; j < this.samples; j++) {\r\n            const value1 = this.pointsData[0][j];\r\n            const value2 = this.pointsData[1][j];\r\n\r\n            varPool.sample.value = j / (this.samples - 1);\r\n            varPool.value1.value = value1;\r\n            varPool.value2.value = value2;\r\n            varPool.x.value = 0.5 + value1;\r\n            varPool.y.value = 0.5 + value2;\r\n            varPool.r.value = frameR;\r\n            varPool.g.value = frameG;\r\n            varPool.b.value = frameB;\r\n            varPool.a.value = frameA;\r\n\r\n            if (waveEqs.point_eqs) {\r\n              presetEquationRunner.preset.waves[this.index].point_eqs();\r\n            }\r\n\r\n            const x = (varPool.x.value * 2 - 1) * this.invAspectx;\r\n            const y = (varPool.y.value * -2 + 1) * this.invAspecty;\r\n            const r = varPool.r.value;\r\n            const g = varPool.g.value;\r\n            const b = varPool.b.value;\r\n            const a = varPool.a.value;\r\n\r\n            this.positions[j * 3 + 0] = x;\r\n            this.positions[j * 3 + 1] = y;\r\n            this.positions[j * 3 + 2] = 0;\r\n\r\n            this.colors[j * 4 + 0] = r;\r\n            this.colors[j * 4 + 1] = g;\r\n            this.colors[j * 4 + 2] = b;\r\n            this.colors[j * 4 + 3] = a * alphaMult;\r\n          }\r\n        }\r\n\r\n        // this needs to be after per point (check fishbrain - witchcraft)\r\n        if (!presetEquationRunner.preset.useWASM) {\r\n          const mdvsUserKeysWave =\r\n            presetEquationRunner.mdVSUserKeysWaves[this.index];\r\n          const mdVSNewFrameMapWave = Utils.pick(\r\n            mdVSWaveFrame,\r\n            mdvsUserKeysWave\r\n          );\r\n\r\n          // eslint-disable-next-line no-param-reassign\r\n          presetEquationRunner.mdVSFrameMapWaves[\r\n            this.index\r\n          ] = mdVSNewFrameMapWave;\r\n        } else {\r\n          mdVSWaveFrame.usedots = usedots;\r\n          mdVSWaveFrame.thick = baseVals.thick;\r\n          mdVSWaveFrame.additive = baseVals.additive;\r\n        }\r\n\r\n        this.mdVSWaveFrame = mdVSWaveFrame;\r\n\r\n        if (usedots === 0) {\r\n          WaveUtils.smoothWaveAndColor(\r\n            this.positions,\r\n            this.colors,\r\n            this.smoothedPositions,\r\n            this.smoothedColors,\r\n            this.samples\r\n          );\r\n        }\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  drawCustomWaveform(\r\n    blendProgress,\r\n    timeArrayL,\r\n    timeArrayR,\r\n    freqArrayL,\r\n    freqArrayR,\r\n    globalVars,\r\n    presetEquationRunner,\r\n    waveEqs\r\n  ) {\r\n    if (\r\n      waveEqs &&\r\n      this.generateWaveform(\r\n        timeArrayL,\r\n        timeArrayR,\r\n        freqArrayL,\r\n        freqArrayR,\r\n        globalVars,\r\n        presetEquationRunner,\r\n        waveEqs,\r\n        blendProgress\r\n      )\r\n    ) {\r\n      this.gl.useProgram(this.shaderProgram);\r\n\r\n      const waveUseDots = this.mdVSWaveFrame.usedots !== 0;\r\n      const waveThick = this.mdVSWaveFrame.thick !== 0;\r\n      const waveAdditive = this.mdVSWaveFrame.additive !== 0;\r\n\r\n      let positions;\r\n      let colors;\r\n      let numVerts;\r\n      if (!waveUseDots) {\r\n        positions = this.smoothedPositions;\r\n        colors = this.smoothedColors;\r\n        numVerts = this.samples * 2 - 1;\r\n      } else {\r\n        positions = this.positions;\r\n        colors = this.colors;\r\n        numVerts = this.samples;\r\n      }\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, positions, this.gl.STATIC_DRAW);\r\n\r\n      this.gl.vertexAttribPointer(\r\n        this.aPosLocation,\r\n        3,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n      this.gl.enableVertexAttribArray(this.aPosLocation);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, colors, this.gl.STATIC_DRAW);\r\n\r\n      this.gl.vertexAttribPointer(\r\n        this.aColorLocation,\r\n        4,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n      this.gl.enableVertexAttribArray(this.aColorLocation);\r\n\r\n      let instances = 1;\r\n      if (waveUseDots) {\r\n        if (waveThick) {\r\n          this.gl.uniform1f(this.sizeLoc, 2 + (this.texsizeX >= 1024 ? 1 : 0));\r\n        } else {\r\n          this.gl.uniform1f(this.sizeLoc, 1 + (this.texsizeX >= 1024 ? 1 : 0));\r\n        }\r\n      } else {\r\n        this.gl.uniform1f(this.sizeLoc, 1);\r\n        if (waveThick) {\r\n          instances = 4;\r\n        }\r\n      }\r\n\r\n      if (waveAdditive) {\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\r\n      } else {\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n      }\r\n\r\n      const drawMode = waveUseDots ? this.gl.POINTS : this.gl.LINE_STRIP;\r\n\r\n      // TODO: use drawArraysInstanced\r\n      for (let i = 0; i < instances; i++) {\r\n        const offset = 2;\r\n        if (i === 0) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\r\n        } else if (i === 1) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [offset / this.texsizeX, 0]);\r\n        } else if (i === 2) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, offset / this.texsizeY]);\r\n        } else if (i === 3) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [\r\n            offset / this.texsizeX,\r\n            offset / this.texsizeY,\r\n          ]);\r\n        }\r\n\r\n        this.gl.drawArrays(drawMode, 0, numVerts);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Utils from \"../../utils\";\r\nimport ShaderUtils from \"../shaders/shaderUtils\";\r\n\r\nexport default class CustomShape {\r\n  constructor(index, gl, opts) {\r\n    this.index = index;\r\n    this.gl = gl;\r\n\r\n    const maxSides = 101;\r\n    this.positions = new Float32Array((maxSides + 2) * 3);\r\n    this.colors = new Float32Array((maxSides + 2) * 4);\r\n    this.uvs = new Float32Array((maxSides + 2) * 2);\r\n    this.borderPositions = new Float32Array((maxSides + 1) * 3);\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n    this.colorVertexBuf = this.gl.createBuffer();\r\n    this.uvVertexBuf = this.gl.createBuffer();\r\n    this.borderPositionVertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n    this.createBorderShader();\r\n\r\n    this.mainSampler = this.gl.createSampler();\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSampler,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      in vec3 aPos;\r\n      in vec4 aColor;\r\n      in vec2 aUv;\r\n      out vec4 vColor;\r\n      out vec2 vUv;\r\n      void main(void) {\r\n        vColor = aColor;\r\n        vUv = aUv;\r\n        gl_Position = vec4(aPos, 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      uniform sampler2D uTexture;\r\n      uniform float uTextured;\r\n      in vec4 vColor;\r\n      in vec2 vUv;\r\n      out vec4 fragColor;\r\n      void main(void) {\r\n        if (uTextured != 0.0) {\r\n          fragColor = texture(uTexture, vUv) * vColor;\r\n        } else {\r\n          fragColor = vColor;\r\n        }\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.aPosLocation = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\r\n    this.aColorLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aColor\"\r\n    );\r\n    this.aUvLocation = this.gl.getAttribLocation(this.shaderProgram, \"aUv\");\r\n\r\n    this.texturedLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTextured\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n  }\r\n\r\n  createBorderShader() {\r\n    this.borderShaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      in vec3 aBorderPos;\r\n      uniform vec2 thickOffset;\r\n      void main(void) {\r\n        gl_Position = vec4(aBorderPos +\r\n                            vec3(thickOffset, 0.0), 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      out vec4 fragColor;\r\n      uniform vec4 uBorderColor;\r\n      void main(void) {\r\n        fragColor = uBorderColor;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.borderShaderProgram, vertShader);\r\n    this.gl.attachShader(this.borderShaderProgram, fragShader);\r\n    this.gl.linkProgram(this.borderShaderProgram);\r\n\r\n    this.aBorderPosLoc = this.gl.getAttribLocation(\r\n      this.borderShaderProgram,\r\n      \"aBorderPos\"\r\n    );\r\n\r\n    this.uBorderColorLoc = this.gl.getUniformLocation(\r\n      this.borderShaderProgram,\r\n      \"uBorderColor\"\r\n    );\r\n    this.thickOffsetLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"thickOffset\"\r\n    );\r\n  }\r\n\r\n  drawCustomShape(\r\n    blendProgress,\r\n    globalVars,\r\n    presetEquationRunner,\r\n    shapeEqs,\r\n    prevTexture\r\n  ) {\r\n    if (shapeEqs.baseVals.enabled !== 0) {\r\n      if (!presetEquationRunner.preset.useWASM) {\r\n        this.setupShapeBuffers(presetEquationRunner.mdVSFrame.wrap);\r\n\r\n        let mdVSShape = Object.assign(\r\n          {},\r\n          presetEquationRunner.mdVSShapes[this.index],\r\n          presetEquationRunner.mdVSFrameMapShapes[this.index],\r\n          globalVars\r\n        );\r\n\r\n        // If we aren't setting these every instance, set them initially\r\n        if (\r\n          presetEquationRunner.preset.shapes[this.index].frame_eqs_str === \"\"\r\n        ) {\r\n          mdVSShape = Object.assign(\r\n            mdVSShape,\r\n            presetEquationRunner.mdVSQAfterFrame,\r\n            presetEquationRunner.mdVSTShapeInits[this.index]\r\n          );\r\n        }\r\n\r\n        const baseVals =\r\n          presetEquationRunner.preset.shapes[this.index].baseVals;\r\n\r\n        const numInst = Math.clamp(baseVals.num_inst, 1, 1024);\r\n        for (let j = 0; j < numInst; j++) {\r\n          mdVSShape.instance = j;\r\n          mdVSShape.x = baseVals.x;\r\n          mdVSShape.y = baseVals.y;\r\n          mdVSShape.rad = baseVals.rad;\r\n          mdVSShape.ang = baseVals.ang;\r\n          mdVSShape.r = baseVals.r;\r\n          mdVSShape.g = baseVals.g;\r\n          mdVSShape.b = baseVals.b;\r\n          mdVSShape.a = baseVals.a;\r\n          mdVSShape.r2 = baseVals.r2;\r\n          mdVSShape.g2 = baseVals.g2;\r\n          mdVSShape.b2 = baseVals.b2;\r\n          mdVSShape.a2 = baseVals.a2;\r\n          mdVSShape.border_r = baseVals.border_r;\r\n          mdVSShape.border_g = baseVals.border_g;\r\n          mdVSShape.border_b = baseVals.border_b;\r\n          mdVSShape.border_a = baseVals.border_a;\r\n          mdVSShape.thickoutline = baseVals.thickoutline;\r\n          mdVSShape.textured = baseVals.textured;\r\n          mdVSShape.tex_zoom = baseVals.tex_zoom;\r\n          mdVSShape.tex_ang = baseVals.tex_ang;\r\n          mdVSShape.additive = baseVals.additive;\r\n\r\n          let mdVSShapeFrame;\r\n          if (\r\n            presetEquationRunner.preset.shapes[this.index].frame_eqs_str !== \"\"\r\n          ) {\r\n            mdVSShape = Object.assign(\r\n              mdVSShape,\r\n              presetEquationRunner.mdVSQAfterFrame,\r\n              presetEquationRunner.mdVSTShapeInits[this.index]\r\n            );\r\n\r\n            mdVSShapeFrame = presetEquationRunner.runShapeFrameEquations(\r\n              this.index,\r\n              mdVSShape\r\n            );\r\n          } else {\r\n            mdVSShapeFrame = mdVSShape;\r\n          }\r\n\r\n          let sides = mdVSShapeFrame.sides;\r\n          sides = Math.clamp(sides, 3, 100);\r\n          sides = Math.floor(sides);\r\n\r\n          const rad = mdVSShapeFrame.rad;\r\n          const ang = mdVSShapeFrame.ang;\r\n\r\n          const x = mdVSShapeFrame.x * 2 - 1;\r\n          const y = mdVSShapeFrame.y * -2 + 1;\r\n\r\n          const r = mdVSShapeFrame.r;\r\n          const g = mdVSShapeFrame.g;\r\n          const b = mdVSShapeFrame.b;\r\n          const a = mdVSShapeFrame.a;\r\n          const r2 = mdVSShapeFrame.r2;\r\n          const g2 = mdVSShapeFrame.g2;\r\n          const b2 = mdVSShapeFrame.b2;\r\n          const a2 = mdVSShapeFrame.a2;\r\n\r\n          const borderR = mdVSShapeFrame.border_r;\r\n          const borderG = mdVSShapeFrame.border_g;\r\n          const borderB = mdVSShapeFrame.border_b;\r\n          const borderA = mdVSShapeFrame.border_a;\r\n          this.borderColor = [\r\n            borderR,\r\n            borderG,\r\n            borderB,\r\n            borderA * blendProgress,\r\n          ];\r\n\r\n          const thickoutline = mdVSShapeFrame.thickoutline;\r\n\r\n          const textured = mdVSShapeFrame.textured;\r\n          const texZoom = mdVSShapeFrame.tex_zoom;\r\n          const texAng = mdVSShapeFrame.tex_ang;\r\n\r\n          const additive = mdVSShapeFrame.additive;\r\n\r\n          const hasBorder = this.borderColor[3] > 0;\r\n          const isTextured = Math.abs(textured) >= 1;\r\n          const isBorderThick = Math.abs(thickoutline) >= 1;\r\n          const isAdditive = Math.abs(additive) >= 1;\r\n\r\n          this.positions[0] = x;\r\n          this.positions[1] = y;\r\n          this.positions[2] = 0;\r\n\r\n          this.colors[0] = r;\r\n          this.colors[1] = g;\r\n          this.colors[2] = b;\r\n          this.colors[3] = a * blendProgress;\r\n\r\n          if (isTextured) {\r\n            this.uvs[0] = 0.5;\r\n            this.uvs[1] = 0.5;\r\n          }\r\n\r\n          const quarterPi = Math.PI * 0.25;\r\n          for (let k = 1; k <= sides + 1; k++) {\r\n            const p = (k - 1) / sides;\r\n            const pTwoPi = p * 2 * Math.PI;\r\n\r\n            const angSum = pTwoPi + ang + quarterPi;\r\n            this.positions[k * 3 + 0] =\r\n              x + rad * Math.cos(angSum) * this.aspecty;\r\n            this.positions[k * 3 + 1] = y + rad * Math.sin(angSum);\r\n            this.positions[k * 3 + 2] = 0;\r\n\r\n            this.colors[k * 4 + 0] = r2;\r\n            this.colors[k * 4 + 1] = g2;\r\n            this.colors[k * 4 + 2] = b2;\r\n            this.colors[k * 4 + 3] = a2 * blendProgress;\r\n\r\n            if (isTextured) {\r\n              const texAngSum = pTwoPi + texAng + quarterPi;\r\n              this.uvs[k * 2 + 0] =\r\n                0.5 + ((0.5 * Math.cos(texAngSum)) / texZoom) * this.aspecty;\r\n              this.uvs[k * 2 + 1] = 0.5 + (0.5 * Math.sin(texAngSum)) / texZoom;\r\n            }\r\n\r\n            if (hasBorder) {\r\n              this.borderPositions[(k - 1) * 3 + 0] = this.positions[k * 3 + 0];\r\n              this.borderPositions[(k - 1) * 3 + 1] = this.positions[k * 3 + 1];\r\n              this.borderPositions[(k - 1) * 3 + 2] = this.positions[k * 3 + 2];\r\n            }\r\n          }\r\n\r\n          this.mdVSShapeFrame = mdVSShapeFrame;\r\n\r\n          this.drawCustomShapeInstance(\r\n            prevTexture,\r\n            sides,\r\n            isTextured,\r\n            hasBorder,\r\n            isBorderThick,\r\n            isAdditive\r\n          );\r\n        }\r\n\r\n        const mdVSUserKeysShape =\r\n          presetEquationRunner.mdVSUserKeysShapes[this.index];\r\n        const mdVSNewFrameMapShape = Utils.pick(\r\n          this.mdVSShapeFrame,\r\n          mdVSUserKeysShape\r\n        );\r\n\r\n        // eslint-disable-next-line no-param-reassign\r\n        presetEquationRunner.mdVSFrameMapShapes[\r\n          this.index\r\n        ] = mdVSNewFrameMapShape;\r\n      } else {\r\n        // eslint-disable-next-line max-len\r\n        this.setupShapeBuffers(\r\n          presetEquationRunner.preset.globalPools.perFrame.wrap.value\r\n        );\r\n\r\n        const baseVals =\r\n          presetEquationRunner.preset.shapes[this.index].baseVals;\r\n        const varPool =\r\n          presetEquationRunner.preset.globalPools[`shapePerFrame${this.index}`];\r\n        Utils.setWasm(varPool, globalVars, presetEquationRunner.globalKeys);\r\n\r\n        // If we aren't setting these every instance, set them initially\r\n        if (!presetEquationRunner.preset.shapes[this.index].frame_eqs) {\r\n          presetEquationRunner.preset.restore_qs();\r\n        }\r\n\r\n        Utils.setWasm(\r\n          varPool,\r\n          presetEquationRunner.mdVSTShapeInits[this.index],\r\n          presetEquationRunner.ts\r\n        );\r\n        presetEquationRunner.preset.save_ts();\r\n\r\n        varPool.x.value = baseVals.x;\r\n        varPool.y.value = baseVals.y;\r\n        varPool.rad.value = baseVals.rad;\r\n        varPool.ang.value = baseVals.ang;\r\n        varPool.r.value = baseVals.r;\r\n        varPool.g.value = baseVals.g;\r\n        varPool.b.value = baseVals.b;\r\n        varPool.a.value = baseVals.a;\r\n        varPool.r2.value = baseVals.r2;\r\n        varPool.g2.value = baseVals.g2;\r\n        varPool.b2.value = baseVals.b2;\r\n        varPool.a2.value = baseVals.a2;\r\n        varPool.border_r.value = baseVals.border_r;\r\n        varPool.border_g.value = baseVals.border_g;\r\n        varPool.border_b.value = baseVals.border_b;\r\n        varPool.border_a.value = baseVals.border_a;\r\n        varPool.thickoutline.value = baseVals.thickoutline;\r\n        varPool.textured.value = baseVals.textured;\r\n        varPool.tex_zoom.value = baseVals.tex_zoom;\r\n        varPool.tex_ang.value = baseVals.tex_ang;\r\n        varPool.additive.value = baseVals.additive;\r\n        presetEquationRunner.preset.shapes[this.index].frame_eqs_save();\r\n\r\n        const numInst = Math.clamp(baseVals.num_inst, 1, 1024);\r\n        for (let j = 0; j < numInst; j++) {\r\n          varPool.instance.value = j;\r\n\r\n          // this condition should check the JS equations because of comments\r\n          if (presetEquationRunner.preset.shapes[this.index].frame_eqs) {\r\n            presetEquationRunner.preset.shapes[this.index].frame_eqs_restore();\r\n            presetEquationRunner.preset.restore_qs();\r\n            presetEquationRunner.preset.restore_ts();\r\n            presetEquationRunner.preset.shapes[this.index].frame_eqs();\r\n          }\r\n\r\n          let sides = varPool.sides.value;\r\n          sides = Math.clamp(sides, 3, 100);\r\n          sides = Math.floor(sides);\r\n\r\n          const rad = varPool.rad.value;\r\n          const ang = varPool.ang.value;\r\n\r\n          const x = varPool.x.value * 2 - 1;\r\n          const y = varPool.y.value * -2 + 1;\r\n\r\n          const r = varPool.r.value;\r\n          const g = varPool.g.value;\r\n          const b = varPool.b.value;\r\n          const a = varPool.a.value;\r\n          const r2 = varPool.r2.value;\r\n          const g2 = varPool.g2.value;\r\n          const b2 = varPool.b2.value;\r\n          const a2 = varPool.a2.value;\r\n\r\n          const borderR = varPool.border_r.value;\r\n          const borderG = varPool.border_g.value;\r\n          const borderB = varPool.border_b.value;\r\n          const borderA = varPool.border_a.value;\r\n          this.borderColor = [\r\n            borderR,\r\n            borderG,\r\n            borderB,\r\n            borderA * blendProgress,\r\n          ];\r\n\r\n          const thickoutline = varPool.thickoutline.value;\r\n\r\n          const textured = varPool.textured.value;\r\n          const texZoom = varPool.tex_zoom.value;\r\n          const texAng = varPool.tex_ang.value;\r\n\r\n          const additive = varPool.additive.value;\r\n\r\n          const hasBorder = this.borderColor[3] > 0;\r\n          const isTextured = Math.abs(textured) >= 1;\r\n          const isBorderThick = Math.abs(thickoutline) >= 1;\r\n          const isAdditive = Math.abs(additive) >= 1;\r\n\r\n          this.positions[0] = x;\r\n          this.positions[1] = y;\r\n          this.positions[2] = 0;\r\n\r\n          this.colors[0] = r;\r\n          this.colors[1] = g;\r\n          this.colors[2] = b;\r\n          this.colors[3] = a * blendProgress;\r\n\r\n          if (isTextured) {\r\n            this.uvs[0] = 0.5;\r\n            this.uvs[1] = 0.5;\r\n          }\r\n\r\n          const quarterPi = Math.PI * 0.25;\r\n          for (let k = 1; k <= sides + 1; k++) {\r\n            const p = (k - 1) / sides;\r\n            const pTwoPi = p * 2 * Math.PI;\r\n\r\n            const angSum = pTwoPi + ang + quarterPi;\r\n            this.positions[k * 3 + 0] =\r\n              x + rad * Math.cos(angSum) * this.aspecty;\r\n            this.positions[k * 3 + 1] = y + rad * Math.sin(angSum);\r\n            this.positions[k * 3 + 2] = 0;\r\n\r\n            this.colors[k * 4 + 0] = r2;\r\n            this.colors[k * 4 + 1] = g2;\r\n            this.colors[k * 4 + 2] = b2;\r\n            this.colors[k * 4 + 3] = a2 * blendProgress;\r\n\r\n            if (isTextured) {\r\n              const texAngSum = pTwoPi + texAng + quarterPi;\r\n              this.uvs[k * 2 + 0] =\r\n                0.5 + ((0.5 * Math.cos(texAngSum)) / texZoom) * this.aspecty;\r\n              this.uvs[k * 2 + 1] = 0.5 + (0.5 * Math.sin(texAngSum)) / texZoom;\r\n            }\r\n\r\n            if (hasBorder) {\r\n              this.borderPositions[(k - 1) * 3 + 0] = this.positions[k * 3 + 0];\r\n              this.borderPositions[(k - 1) * 3 + 1] = this.positions[k * 3 + 1];\r\n              this.borderPositions[(k - 1) * 3 + 2] = this.positions[k * 3 + 2];\r\n            }\r\n          }\r\n\r\n          this.drawCustomShapeInstance(\r\n            prevTexture,\r\n            sides,\r\n            isTextured,\r\n            hasBorder,\r\n            isBorderThick,\r\n            isAdditive\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setupShapeBuffers(wrap) {\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.positions,\r\n      this.gl.DYNAMIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.aPosLocation,\r\n      3,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.aPosLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, this.colors, this.gl.DYNAMIC_DRAW);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.aColorLocation,\r\n      4,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.aColorLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.uvVertexBuf);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, this.uvs, this.gl.DYNAMIC_DRAW);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.aUvLocation,\r\n      2,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.aUvLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.borderPositionVertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.borderPositions,\r\n      this.gl.DYNAMIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.aBorderPosLoc,\r\n      3,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.aBorderPosLoc);\r\n\r\n    const wrapping = wrap !== 0 ? this.gl.REPEAT : this.gl.CLAMP_TO_EDGE;\r\n    this.gl.samplerParameteri(\r\n      this.mainSampler,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      wrapping\r\n    );\r\n    this.gl.samplerParameteri(\r\n      this.mainSampler,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      wrapping\r\n    );\r\n  }\r\n\r\n  drawCustomShapeInstance(\r\n    prevTexture,\r\n    sides,\r\n    isTextured,\r\n    hasBorder,\r\n    isBorderThick,\r\n    isAdditive\r\n  ) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n    this.gl.bufferSubData(\r\n      this.gl.ARRAY_BUFFER,\r\n      0,\r\n      this.positions,\r\n      0,\r\n      (sides + 2) * 3\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.aPosLocation,\r\n      3,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.aPosLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\r\n    this.gl.bufferSubData(\r\n      this.gl.ARRAY_BUFFER,\r\n      0,\r\n      this.colors,\r\n      0,\r\n      (sides + 2) * 4\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.aColorLocation,\r\n      4,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.aColorLocation);\r\n\r\n    if (isTextured) {\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.uvVertexBuf);\r\n      this.gl.bufferSubData(\r\n        this.gl.ARRAY_BUFFER,\r\n        0,\r\n        this.uvs,\r\n        0,\r\n        (sides + 2) * 2\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(\r\n        this.aUvLocation,\r\n        2,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n      this.gl.enableVertexAttribArray(this.aUvLocation);\r\n    }\r\n\r\n    this.gl.uniform1f(this.texturedLoc, isTextured ? 1 : 0);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, prevTexture);\r\n    this.gl.bindSampler(0, this.mainSampler);\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    if (isAdditive) {\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\r\n    } else {\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n    }\r\n\r\n    this.gl.drawArrays(this.gl.TRIANGLE_FAN, 0, sides + 2);\r\n\r\n    if (hasBorder) {\r\n      this.gl.useProgram(this.borderShaderProgram);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.borderPositionVertexBuf);\r\n      this.gl.bufferSubData(\r\n        this.gl.ARRAY_BUFFER,\r\n        0,\r\n        this.borderPositions,\r\n        0,\r\n        (sides + 1) * 3\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(\r\n        this.aBorderPosLoc,\r\n        3,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n      this.gl.enableVertexAttribArray(this.aBorderPosLoc);\r\n\r\n      this.gl.uniform4fv(this.uBorderColorLoc, this.borderColor);\r\n\r\n      // TODO: use drawArraysInstanced\r\n      const instances = isBorderThick ? 4 : 1;\r\n      for (let i = 0; i < instances; i++) {\r\n        const offset = 2;\r\n        if (i === 0) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, 0]);\r\n        } else if (i === 1) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [offset / this.texsizeX, 0]);\r\n        } else if (i === 2) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [0, offset / this.texsizeY]);\r\n        } else if (i === 3) {\r\n          this.gl.uniform2fv(this.thickOffsetLoc, [\r\n            offset / this.texsizeX,\r\n            offset / this.texsizeY,\r\n          ]);\r\n        }\r\n\r\n        this.gl.drawArrays(this.gl.LINE_STRIP, 0, sides + 1);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import ShaderUtils from \"../shaders/shaderUtils\";\r\n\r\nexport default class Border {\r\n  constructor(gl, opts = {}) {\r\n    this.gl = gl;\r\n\r\n    this.positions = new Float32Array(72);\r\n\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n\r\n    this.vertexBuf = this.gl.createBuffer();\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      in vec3 aPos;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos, 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      out vec4 fragColor;\r\n      uniform vec4 u_color;\r\n      void main(void) {\r\n        fragColor = u_color;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.aPosLoc = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\r\n\r\n    this.colorLoc = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n  }\r\n\r\n  addTriangle(offset, point1, point2, point3) {\r\n    this.positions[offset + 0] = point1[0];\r\n    this.positions[offset + 1] = point1[1];\r\n    this.positions[offset + 2] = point1[2];\r\n\r\n    this.positions[offset + 3] = point2[0];\r\n    this.positions[offset + 4] = point2[1];\r\n    this.positions[offset + 5] = point2[2];\r\n\r\n    this.positions[offset + 6] = point3[0];\r\n    this.positions[offset + 7] = point3[1];\r\n    this.positions[offset + 8] = point3[2];\r\n  }\r\n\r\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\r\n  generateBorder(borderColor, borderSize, prevBorderSize) {\r\n    if (borderSize > 0 && borderColor[3] > 0) {\r\n      const width = 2;\r\n      const height = 2;\r\n\r\n      const widthHalf = width / 2;\r\n      const heightHalf = height / 2;\r\n\r\n      const prevBorderWidth = prevBorderSize / 2;\r\n      const borderWidth = borderSize / 2 + prevBorderWidth;\r\n\r\n      const prevBorderWidthWidth = prevBorderWidth * width;\r\n      const prevBorderWidthHeight = prevBorderWidth * height;\r\n      const borderWidthWidth = borderWidth * width;\r\n      const borderWidthHeight = borderWidth * height;\r\n\r\n      // 1st side\r\n      let point1 = [\r\n        -widthHalf + prevBorderWidthWidth,\r\n        -heightHalf + borderWidthHeight,\r\n        0,\r\n      ];\r\n      let point2 = [\r\n        -widthHalf + prevBorderWidthWidth,\r\n        heightHalf - borderWidthHeight,\r\n        0,\r\n      ];\r\n      let point3 = [\r\n        -widthHalf + borderWidthWidth,\r\n        heightHalf - borderWidthHeight,\r\n        0,\r\n      ];\r\n      let point4 = [\r\n        -widthHalf + borderWidthWidth,\r\n        -heightHalf + borderWidthHeight,\r\n        0,\r\n      ];\r\n\r\n      this.addTriangle(0, point4, point2, point1);\r\n      this.addTriangle(9, point4, point3, point2);\r\n\r\n      // 2nd side\r\n      point1 = [\r\n        widthHalf - prevBorderWidthWidth,\r\n        -heightHalf + borderWidthHeight,\r\n        0,\r\n      ];\r\n      point2 = [\r\n        widthHalf - prevBorderWidthWidth,\r\n        heightHalf - borderWidthHeight,\r\n        0,\r\n      ];\r\n      point3 = [\r\n        widthHalf - borderWidthWidth,\r\n        heightHalf - borderWidthHeight,\r\n        0,\r\n      ];\r\n      point4 = [\r\n        widthHalf - borderWidthWidth,\r\n        -heightHalf + borderWidthHeight,\r\n        0,\r\n      ];\r\n\r\n      this.addTriangle(18, point1, point2, point4);\r\n      this.addTriangle(27, point2, point3, point4);\r\n\r\n      // Top\r\n      point1 = [\r\n        -widthHalf + prevBorderWidthWidth,\r\n        -heightHalf + prevBorderWidthHeight,\r\n        0,\r\n      ];\r\n      point2 = [\r\n        -widthHalf + prevBorderWidthWidth,\r\n        borderWidthHeight - heightHalf,\r\n        0,\r\n      ];\r\n      point3 = [\r\n        widthHalf - prevBorderWidthWidth,\r\n        borderWidthHeight - heightHalf,\r\n        0,\r\n      ];\r\n      point4 = [\r\n        widthHalf - prevBorderWidthWidth,\r\n        -heightHalf + prevBorderWidthHeight,\r\n        0,\r\n      ];\r\n\r\n      this.addTriangle(36, point4, point2, point1);\r\n      this.addTriangle(45, point4, point3, point2);\r\n\r\n      // Bottom\r\n      point1 = [\r\n        -widthHalf + prevBorderWidthWidth,\r\n        heightHalf - prevBorderWidthHeight,\r\n        0,\r\n      ];\r\n      point2 = [\r\n        -widthHalf + prevBorderWidthWidth,\r\n        heightHalf - borderWidthHeight,\r\n        0,\r\n      ];\r\n      point3 = [\r\n        widthHalf - prevBorderWidthWidth,\r\n        heightHalf - borderWidthHeight,\r\n        0,\r\n      ];\r\n      point4 = [\r\n        widthHalf - prevBorderWidthWidth,\r\n        heightHalf - prevBorderWidthHeight,\r\n        0,\r\n      ];\r\n\r\n      this.addTriangle(54, point1, point2, point4);\r\n      this.addTriangle(63, point2, point3, point4);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  drawBorder(borderColor, borderSize, prevBorderSize) {\r\n    if (this.generateBorder(borderColor, borderSize, prevBorderSize)) {\r\n      this.gl.useProgram(this.shaderProgram);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        this.positions,\r\n        this.gl.STATIC_DRAW\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(this.aPosLoc, 3, this.gl.FLOAT, false, 0, 0);\r\n      this.gl.enableVertexAttribArray(this.aPosLoc);\r\n\r\n      this.gl.uniform4fv(this.colorLoc, borderColor);\r\n\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, this.positions.length / 3);\r\n    }\r\n  }\r\n}\r\n","import ShaderUtils from \"../shaders/shaderUtils\";\r\n\r\nexport default class CustomShape {\r\n  constructor(gl, opts) {\r\n    this.gl = gl;\r\n\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.generatePositions();\r\n\r\n    this.colors = new Float32Array([\r\n      0,\r\n      0,\r\n      0,\r\n      3 / 32,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n    ]);\r\n\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n    this.colorVertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.generatePositions();\r\n  }\r\n\r\n  generatePositions() {\r\n    const halfSize = 0.05;\r\n    this.positions = new Float32Array([\r\n      0,\r\n      0,\r\n      0,\r\n      -halfSize * this.aspecty,\r\n      0,\r\n      0,\r\n      0,\r\n      -halfSize,\r\n      0,\r\n      halfSize * this.aspecty,\r\n      0,\r\n      0,\r\n      0,\r\n      halfSize,\r\n      0,\r\n      -halfSize * this.aspecty,\r\n      0,\r\n      0,\r\n    ]);\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      in vec3 aPos;\r\n      in vec4 aColor;\r\n      out vec4 vColor;\r\n      void main(void) {\r\n        vColor = aColor;\r\n        gl_Position = vec4(aPos, 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      in vec4 vColor;\r\n      out vec4 fragColor;\r\n      void main(void) {\r\n        fragColor = vColor;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.aPosLocation = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\r\n    this.aColorLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aColor\"\r\n    );\r\n  }\r\n\r\n  drawDarkenCenter(mdVSFrame) {\r\n    if (mdVSFrame.darken_center !== 0) {\r\n      this.gl.useProgram(this.shaderProgram);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        this.positions,\r\n        this.gl.STATIC_DRAW\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(\r\n        this.aPosLocation,\r\n        3,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n      this.gl.enableVertexAttribArray(this.aPosLocation);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorVertexBuf);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        this.colors,\r\n        this.gl.STATIC_DRAW\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(\r\n        this.aColorLocation,\r\n        4,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n      this.gl.enableVertexAttribArray(this.aColorLocation);\r\n\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      this.gl.drawArrays(this.gl.TRIANGLE_FAN, 0, this.positions.length / 3);\r\n    }\r\n  }\r\n}\r\n","import ShaderUtils from \"../shaders/shaderUtils\";\r\n\r\nexport default class MotionVectors {\r\n  constructor(gl, opts) {\r\n    this.gl = gl;\r\n\r\n    this.maxX = 64;\r\n    this.maxY = 48;\r\n    this.positions = new Float32Array(this.maxX * this.maxY * 2 * 3);\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      in vec3 aPos;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos, 1.0);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      out vec4 fragColor;\r\n      uniform vec4 u_color;\r\n      void main(void) {\r\n        fragColor = u_color;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.aPosLoc = this.gl.getAttribLocation(this.shaderProgram, \"aPos\");\r\n\r\n    this.colorLoc = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n  }\r\n\r\n  getMotionDir(warpUVs, fx, fy) {\r\n    const y0 = Math.floor(fy * this.mesh_height);\r\n    const dy = fy * this.mesh_height - y0;\r\n\r\n    const x0 = Math.floor(fx * this.mesh_width);\r\n    const dx = fx * this.mesh_width - x0;\r\n\r\n    const x1 = x0 + 1;\r\n    const y1 = y0 + 1;\r\n\r\n    const gridX1 = this.mesh_width + 1;\r\n\r\n    let fx2;\r\n    let fy2;\r\n    fx2 = warpUVs[(y0 * gridX1 + x0) * 2 + 0] * (1 - dx) * (1 - dy);\r\n    fy2 = warpUVs[(y0 * gridX1 + x0) * 2 + 1] * (1 - dx) * (1 - dy);\r\n    fx2 += warpUVs[(y0 * gridX1 + x1) * 2 + 0] * dx * (1 - dy);\r\n    fy2 += warpUVs[(y0 * gridX1 + x1) * 2 + 1] * dx * (1 - dy);\r\n    fx2 += warpUVs[(y1 * gridX1 + x0) * 2 + 0] * (1 - dx) * dy;\r\n    fy2 += warpUVs[(y1 * gridX1 + x0) * 2 + 1] * (1 - dx) * dy;\r\n    fx2 += warpUVs[(y1 * gridX1 + x1) * 2 + 0] * dx * dy;\r\n    fy2 += warpUVs[(y1 * gridX1 + x1) * 2 + 1] * dx * dy;\r\n\r\n    return [fx2, 1.0 - fy2];\r\n  }\r\n\r\n  generateMotionVectors(mdVSFrame, warpUVs) {\r\n    const mvOn = mdVSFrame.bmotionvectorson;\r\n    const mvA = mvOn === 0 ? 0 : mdVSFrame.mv_a;\r\n    let nX = Math.floor(mdVSFrame.mv_x);\r\n    let nY = Math.floor(mdVSFrame.mv_y);\r\n\r\n    if (mvA > 0.001 && nX > 0 && nY > 0) {\r\n      let dx = mdVSFrame.mv_x - nX;\r\n      let dy = mdVSFrame.mv_y - nY;\r\n\r\n      if (nX > this.maxX) {\r\n        nX = this.maxX;\r\n        dx = 0;\r\n      }\r\n\r\n      if (nY > this.maxY) {\r\n        nY = this.maxY;\r\n        dy = 0;\r\n      }\r\n\r\n      const dx2 = mdVSFrame.mv_dx;\r\n      const dy2 = mdVSFrame.mv_dy;\r\n\r\n      const lenMult = mdVSFrame.mv_l;\r\n      const minLen = 1.0 / this.texsizeX;\r\n\r\n      this.numVecVerts = 0;\r\n      for (let j = 0; j < nY; j++) {\r\n        let fy = (j + 0.25) / (nY + dy + 0.25 - 1.0);\r\n        fy -= dy2;\r\n\r\n        if (fy > 0.0001 && fy < 0.9999) {\r\n          for (let i = 0; i < nX; i++) {\r\n            let fx = (i + 0.25) / (nX + dx + 0.25 - 1.0);\r\n            fx += dx2;\r\n\r\n            if (fx > 0.0001 && fx < 0.9999) {\r\n              const fx2arr = this.getMotionDir(warpUVs, fx, fy);\r\n              let fx2 = fx2arr[0];\r\n              let fy2 = fx2arr[1];\r\n\r\n              let dxi = fx2 - fx;\r\n              let dyi = fy2 - fy;\r\n              dxi *= lenMult;\r\n              dyi *= lenMult;\r\n\r\n              let fdist = Math.sqrt(dxi * dxi + dyi * dyi);\r\n\r\n              if (fdist < minLen && fdist > 0.00000001) {\r\n                fdist = minLen / fdist;\r\n                dxi *= fdist;\r\n                dyi *= fdist;\r\n              } else {\r\n                dxi = minLen;\r\n                dxi = minLen;\r\n              }\r\n\r\n              fx2 = fx + dxi;\r\n              fy2 = fy + dyi;\r\n\r\n              const vx1 = 2.0 * fx - 1.0;\r\n              const vy1 = 2.0 * fy - 1.0;\r\n              const vx2 = 2.0 * fx2 - 1.0;\r\n              const vy2 = 2.0 * fy2 - 1.0;\r\n\r\n              this.positions[this.numVecVerts * 3 + 0] = vx1;\r\n              this.positions[this.numVecVerts * 3 + 1] = vy1;\r\n              this.positions[this.numVecVerts * 3 + 2] = 0;\r\n\r\n              this.positions[(this.numVecVerts + 1) * 3 + 0] = vx2;\r\n              this.positions[(this.numVecVerts + 1) * 3 + 1] = vy2;\r\n              this.positions[(this.numVecVerts + 1) * 3 + 2] = 0;\r\n\r\n              this.numVecVerts += 2;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (this.numVecVerts > 0) {\r\n        this.color = [mdVSFrame.mv_r, mdVSFrame.mv_g, mdVSFrame.mv_b, mvA];\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  drawMotionVectors(mdVSFrame, warpUVs) {\r\n    if (this.generateMotionVectors(mdVSFrame, warpUVs)) {\r\n      this.gl.useProgram(this.shaderProgram);\r\n\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        this.positions,\r\n        this.gl.STATIC_DRAW\r\n      );\r\n\r\n      this.gl.vertexAttribPointer(this.aPosLoc, 3, this.gl.FLOAT, false, 0, 0);\r\n      this.gl.enableVertexAttribArray(this.aPosLoc);\r\n\r\n      this.gl.uniform4fv(this.colorLoc, this.color);\r\n\r\n      this.gl.lineWidth(1);\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      this.gl.drawArrays(this.gl.LINES, 0, this.numVecVerts);\r\n    }\r\n  }\r\n}\r\n","import ShaderUtils from \"./shaderUtils\";\r\n\r\nexport default class WarpShader {\r\n  constructor(gl, noise, image, opts = {}) {\r\n    this.gl = gl;\r\n    this.noise = noise;\r\n    this.image = image;\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.buildPositions();\r\n\r\n    this.indexBuf = gl.createBuffer();\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n    this.warpUvVertexBuf = this.gl.createBuffer();\r\n    this.warpColorVertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n\r\n    this.mainSampler = this.gl.createSampler();\r\n    this.mainSamplerFW = this.gl.createSampler();\r\n    this.mainSamplerFC = this.gl.createSampler();\r\n    this.mainSamplerPW = this.gl.createSampler();\r\n    this.mainSamplerPC = this.gl.createSampler();\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSampler,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFW,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFC,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerFC, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFC,\r\n      gl.TEXTURE_WRAP_S,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFC,\r\n      gl.TEXTURE_WRAP_T,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPW,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.NEAREST_MIPMAP_NEAREST\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPC,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.NEAREST_MIPMAP_NEAREST\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerPC, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPC,\r\n      gl.TEXTURE_WRAP_S,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPC,\r\n      gl.TEXTURE_WRAP_T,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n  }\r\n\r\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\r\n  buildPositions() {\r\n    const width = 2;\r\n    const height = 2;\r\n\r\n    const widthHalf = width / 2;\r\n    const heightHalf = height / 2;\r\n\r\n    const gridX = this.mesh_width;\r\n    const gridY = this.mesh_height;\r\n\r\n    const gridX1 = gridX + 1;\r\n    const gridY1 = gridY + 1;\r\n\r\n    const segmentWidth = width / gridX;\r\n    const segmentHeight = height / gridY;\r\n\r\n    const vertices = [];\r\n    for (let iy = 0; iy < gridY1; iy++) {\r\n      const y = iy * segmentHeight - heightHalf;\r\n      for (let ix = 0; ix < gridX1; ix++) {\r\n        const x = ix * segmentWidth - widthHalf;\r\n        vertices.push(x, -y, 0);\r\n      }\r\n    }\r\n\r\n    const indices = [];\r\n    for (let iy = 0; iy < gridY; iy++) {\r\n      for (let ix = 0; ix < gridX; ix++) {\r\n        const a = ix + gridX1 * iy;\r\n        const b = ix + gridX1 * (iy + 1);\r\n        const c = ix + 1 + gridX1 * (iy + 1);\r\n        const d = ix + 1 + gridX1 * iy;\r\n\r\n        indices.push(a, b, d);\r\n        indices.push(b, c, d);\r\n      }\r\n    }\r\n\r\n    this.vertices = new Float32Array(vertices);\r\n    this.indices = new Uint16Array(indices);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.buildPositions();\r\n  }\r\n\r\n  createShader(shaderText = \"\") {\r\n    let fragShaderText;\r\n    let fragShaderHeaderText;\r\n    if (shaderText.length === 0) {\r\n      fragShaderText = \"ret = texture(sampler_main, uv).rgb * decay;\";\r\n      fragShaderHeaderText = \"\";\r\n    } else {\r\n      const shaderParts = ShaderUtils.getShaderParts(shaderText);\r\n      fragShaderHeaderText = shaderParts[0];\r\n      fragShaderText = shaderParts[1];\r\n    }\r\n\r\n    fragShaderText = fragShaderText.replace(/texture2D/g, \"texture\");\r\n    fragShaderText = fragShaderText.replace(/texture3D/g, \"texture\");\r\n\r\n    this.userTextures = ShaderUtils.getUserSamplers(fragShaderHeaderText);\r\n\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      const vec2 halfmad = vec2(0.5);\r\n      in vec2 aPos;\r\n      in vec2 aWarpUv;\r\n      in vec4 aWarpColor;\r\n      out vec2 uv;\r\n      out vec2 uv_orig;\r\n      out vec4 vColor;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos, 0.0, 1.0);\r\n        uv_orig = aPos * halfmad + halfmad;\r\n        uv = aWarpUv;\r\n        vColor = aWarpColor;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      precision mediump sampler3D;\r\n\r\n      in vec2 uv;\r\n      in vec2 uv_orig;\r\n      in vec4 vColor;\r\n      out vec4 fragColor;\r\n      uniform sampler2D sampler_main;\r\n      uniform sampler2D sampler_fw_main;\r\n      uniform sampler2D sampler_fc_main;\r\n      uniform sampler2D sampler_pw_main;\r\n      uniform sampler2D sampler_pc_main;\r\n      uniform sampler2D sampler_blur1;\r\n      uniform sampler2D sampler_blur2;\r\n      uniform sampler2D sampler_blur3;\r\n      uniform sampler2D sampler_noise_lq;\r\n      uniform sampler2D sampler_noise_lq_lite;\r\n      uniform sampler2D sampler_noise_mq;\r\n      uniform sampler2D sampler_noise_hq;\r\n      uniform sampler2D sampler_pw_noise_lq;\r\n      uniform sampler3D sampler_noisevol_lq;\r\n      uniform sampler3D sampler_noisevol_hq;\r\n      uniform float time;\r\n      uniform float decay;\r\n      uniform vec2 resolution;\r\n      uniform vec4 aspect;\r\n      uniform vec4 texsize;\r\n      uniform vec4 texsize_noise_lq;\r\n      uniform vec4 texsize_noise_mq;\r\n      uniform vec4 texsize_noise_hq;\r\n      uniform vec4 texsize_noise_lq_lite;\r\n      uniform vec4 texsize_noisevol_lq;\r\n      uniform vec4 texsize_noisevol_hq;\r\n\r\n      uniform float bass;\r\n      uniform float mid;\r\n      uniform float treb;\r\n      uniform float vol;\r\n      uniform float bass_att;\r\n      uniform float mid_att;\r\n      uniform float treb_att;\r\n      uniform float vol_att;\r\n\r\n      uniform float frame;\r\n      uniform float fps;\r\n\r\n      uniform vec4 _qa;\r\n      uniform vec4 _qb;\r\n      uniform vec4 _qc;\r\n      uniform vec4 _qd;\r\n      uniform vec4 _qe;\r\n      uniform vec4 _qf;\r\n      uniform vec4 _qg;\r\n      uniform vec4 _qh;\r\n\r\n      #define q1 _qa.x\r\n      #define q2 _qa.y\r\n      #define q3 _qa.z\r\n      #define q4 _qa.w\r\n      #define q5 _qb.x\r\n      #define q6 _qb.y\r\n      #define q7 _qb.z\r\n      #define q8 _qb.w\r\n      #define q9 _qc.x\r\n      #define q10 _qc.y\r\n      #define q11 _qc.z\r\n      #define q12 _qc.w\r\n      #define q13 _qd.x\r\n      #define q14 _qd.y\r\n      #define q15 _qd.z\r\n      #define q16 _qd.w\r\n      #define q17 _qe.x\r\n      #define q18 _qe.y\r\n      #define q19 _qe.z\r\n      #define q20 _qe.w\r\n      #define q21 _qf.x\r\n      #define q22 _qf.y\r\n      #define q23 _qf.z\r\n      #define q24 _qf.w\r\n      #define q25 _qg.x\r\n      #define q26 _qg.y\r\n      #define q27 _qg.z\r\n      #define q28 _qg.w\r\n      #define q29 _qh.x\r\n      #define q30 _qh.y\r\n      #define q31 _qh.z\r\n      #define q32 _qh.w\r\n\r\n      uniform vec4 slow_roam_cos;\r\n      uniform vec4 roam_cos;\r\n      uniform vec4 slow_roam_sin;\r\n      uniform vec4 roam_sin;\r\n\r\n      uniform float blur1_min;\r\n      uniform float blur1_max;\r\n      uniform float blur2_min;\r\n      uniform float blur2_max;\r\n      uniform float blur3_min;\r\n      uniform float blur3_max;\r\n\r\n      uniform float scale1;\r\n      uniform float scale2;\r\n      uniform float scale3;\r\n      uniform float bias1;\r\n      uniform float bias2;\r\n      uniform float bias3;\r\n\r\n      uniform vec4 rand_frame;\r\n      uniform vec4 rand_preset;\r\n\r\n      float PI = ${Math.PI};\r\n\r\n      ${fragShaderHeaderText}\r\n\r\n      void main(void) {\r\n        vec3 ret;\r\n        float rad = length(uv_orig - 0.5);\r\n        float ang = atan(uv_orig.x - 0.5, uv_orig.y - 0.5);\r\n\r\n        ${fragShaderText}\r\n\r\n        fragColor = vec4(ret, 1.0) * vColor;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.warpUvLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aWarpUv\"\r\n    );\r\n    this.warpColorLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aWarpColor\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_main\"\r\n    );\r\n    this.textureFWLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_fw_main\"\r\n    );\r\n    this.textureFCLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_fc_main\"\r\n    );\r\n    this.texturePWLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_pw_main\"\r\n    );\r\n    this.texturePCLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_pc_main\"\r\n    );\r\n    this.blurTexture1Loc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_blur1\"\r\n    );\r\n    this.blurTexture2Loc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_blur2\"\r\n    );\r\n    this.blurTexture3Loc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_blur3\"\r\n    );\r\n    this.noiseLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_lq\"\r\n    );\r\n    this.noiseMQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_mq\"\r\n    );\r\n    this.noiseHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_hq\"\r\n    );\r\n    this.noiseLQLiteLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_lq_lite\"\r\n    );\r\n    this.noisePointLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_pw_noise_lq\"\r\n    );\r\n    this.noiseVolLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noisevol_lq\"\r\n    );\r\n    this.noiseVolHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noisevol_hq\"\r\n    );\r\n    this.decayLoc = this.gl.getUniformLocation(this.shaderProgram, \"decay\");\r\n    this.texsizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"texsize\");\r\n    this.texsizeNoiseLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_lq\"\r\n    );\r\n    this.texsizeNoiseMQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_mq\"\r\n    );\r\n    this.texsizeNoiseHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_hq\"\r\n    );\r\n    this.texsizeNoiseLQLiteLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_lq_lite\"\r\n    );\r\n    this.texsizeNoiseVolLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noisevol_lq\"\r\n    );\r\n    this.texsizeNoiseVolHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noisevol_hq\"\r\n    );\r\n    this.resolutionLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"resolution\"\r\n    );\r\n    this.aspectLoc = this.gl.getUniformLocation(this.shaderProgram, \"aspect\");\r\n    this.bassLoc = this.gl.getUniformLocation(this.shaderProgram, \"bass\");\r\n    this.midLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid\");\r\n    this.trebLoc = this.gl.getUniformLocation(this.shaderProgram, \"treb\");\r\n    this.volLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol\");\r\n    this.bassAttLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"bass_att\"\r\n    );\r\n    this.midAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid_att\");\r\n    this.trebAttLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"treb_att\"\r\n    );\r\n    this.volAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol_att\");\r\n    this.timeLoc = this.gl.getUniformLocation(this.shaderProgram, \"time\");\r\n    this.frameLoc = this.gl.getUniformLocation(this.shaderProgram, \"frame\");\r\n    this.fpsLoc = this.gl.getUniformLocation(this.shaderProgram, \"fps\");\r\n    this.blur1MinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur1_min\"\r\n    );\r\n    this.blur1MaxLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur1_max\"\r\n    );\r\n    this.blur2MinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur2_min\"\r\n    );\r\n    this.blur2MaxLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur2_max\"\r\n    );\r\n    this.blur3MinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur3_min\"\r\n    );\r\n    this.blur3MaxLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur3_max\"\r\n    );\r\n    this.scale1Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale1\");\r\n    this.scale2Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale2\");\r\n    this.scale3Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale3\");\r\n    this.bias1Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias1\");\r\n    this.bias2Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias2\");\r\n    this.bias3Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias3\");\r\n    this.randPresetLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"rand_preset\"\r\n    );\r\n    this.randFrameLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"rand_frame\"\r\n    );\r\n\r\n    this.qaLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qa\");\r\n    this.qbLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qb\");\r\n    this.qcLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qc\");\r\n    this.qdLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qd\");\r\n    this.qeLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qe\");\r\n    this.qfLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qf\");\r\n    this.qgLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qg\");\r\n    this.qhLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qh\");\r\n\r\n    this.slowRoamCosLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"slow_roam_cos\"\r\n    );\r\n    this.roamCosLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"roam_cos\"\r\n    );\r\n    this.slowRoamSinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"slow_roam_sin\"\r\n    );\r\n    this.roamSinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"roam_sin\"\r\n    );\r\n\r\n    for (let i = 0; i < this.userTextures.length; i++) {\r\n      const userTexture = this.userTextures[i];\r\n      userTexture.textureLoc = this.gl.getUniformLocation(\r\n        this.shaderProgram,\r\n        `sampler_${userTexture.sampler}`\r\n      );\r\n    }\r\n  }\r\n\r\n  updateShader(shaderText) {\r\n    this.createShader(shaderText);\r\n  }\r\n\r\n  bindBlurVals(blurMins, blurMaxs) {\r\n    const blurMin1 = blurMins[0];\r\n    const blurMin2 = blurMins[1];\r\n    const blurMin3 = blurMins[2];\r\n    const blurMax1 = blurMaxs[0];\r\n    const blurMax2 = blurMaxs[1];\r\n    const blurMax3 = blurMaxs[2];\r\n\r\n    const scale1 = blurMax1 - blurMin1;\r\n    const bias1 = blurMin1;\r\n\r\n    const scale2 = blurMax2 - blurMin2;\r\n    const bias2 = blurMin2;\r\n\r\n    const scale3 = blurMax3 - blurMin3;\r\n    const bias3 = blurMin3;\r\n\r\n    this.gl.uniform1f(this.blur1MinLoc, blurMin1);\r\n    this.gl.uniform1f(this.blur1MaxLoc, blurMax1);\r\n    this.gl.uniform1f(this.blur2MinLoc, blurMin2);\r\n    this.gl.uniform1f(this.blur2MaxLoc, blurMax2);\r\n    this.gl.uniform1f(this.blur3MinLoc, blurMin3);\r\n    this.gl.uniform1f(this.blur3MaxLoc, blurMax3);\r\n    this.gl.uniform1f(this.scale1Loc, scale1);\r\n    this.gl.uniform1f(this.scale2Loc, scale2);\r\n    this.gl.uniform1f(this.scale3Loc, scale3);\r\n    this.gl.uniform1f(this.bias1Loc, bias1);\r\n    this.gl.uniform1f(this.bias2Loc, bias2);\r\n    this.gl.uniform1f(this.bias3Loc, bias3);\r\n  }\r\n\r\n  renderQuadTexture(\r\n    blending,\r\n    texture,\r\n    blurTexture1,\r\n    blurTexture2,\r\n    blurTexture3,\r\n    blurMins,\r\n    blurMaxs,\r\n    mdVSFrame,\r\n    mdVSQs,\r\n    warpUVs,\r\n    warpColor\r\n  ) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ELEMENT_ARRAY_BUFFER,\r\n      this.indices,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.vertices,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      3,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.warpUvVertexBuf);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, warpUVs, this.gl.STATIC_DRAW);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.warpUvLocation,\r\n      2,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.warpUvLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.warpColorVertexBuf);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, warpColor, this.gl.STATIC_DRAW);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.warpColorLocation,\r\n      4,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.warpColorLocation);\r\n\r\n    const wrapping =\r\n      mdVSFrame.wrap !== 0 ? this.gl.REPEAT : this.gl.CLAMP_TO_EDGE;\r\n    this.gl.samplerParameteri(\r\n      this.mainSampler,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      wrapping\r\n    );\r\n    this.gl.samplerParameteri(\r\n      this.mainSampler,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      wrapping\r\n    );\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(0, this.mainSampler);\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE1);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(1, this.mainSamplerFW);\r\n    this.gl.uniform1i(this.textureFWLoc, 1);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE2);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(2, this.mainSamplerFC);\r\n    this.gl.uniform1i(this.textureFCLoc, 2);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE3);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(3, this.mainSamplerPW);\r\n    this.gl.uniform1i(this.texturePWLoc, 3);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE4);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(4, this.mainSamplerPC);\r\n    this.gl.uniform1i(this.texturePCLoc, 4);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE5);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture1);\r\n    this.gl.uniform1i(this.blurTexture1Loc, 5);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE6);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture2);\r\n    this.gl.uniform1i(this.blurTexture2Loc, 6);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE7);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture3);\r\n    this.gl.uniform1i(this.blurTexture3Loc, 7);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE8);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\r\n    this.gl.uniform1i(this.noiseLQLoc, 8);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE9);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexMQ);\r\n    this.gl.uniform1i(this.noiseMQLoc, 9);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE10);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexHQ);\r\n    this.gl.uniform1i(this.noiseHQLoc, 10);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE11);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQLite);\r\n    this.gl.uniform1i(this.noiseLQLiteLoc, 11);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE12);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\r\n    this.gl.bindSampler(12, this.noise.noiseTexPointLQ);\r\n    this.gl.uniform1i(this.noisePointLQLoc, 12);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE13);\r\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolLQ);\r\n    this.gl.uniform1i(this.noiseVolLQLoc, 13);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE14);\r\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolHQ);\r\n    this.gl.uniform1i(this.noiseVolHQLoc, 14);\r\n\r\n    for (let i = 0; i < this.userTextures.length; i++) {\r\n      const userTexture = this.userTextures[i];\r\n      this.gl.activeTexture(this.gl.TEXTURE15 + i);\r\n      this.gl.bindTexture(\r\n        this.gl.TEXTURE_2D,\r\n        this.image.getTexture(userTexture.sampler)\r\n      );\r\n      this.gl.uniform1i(userTexture.textureLoc, 15 + i);\r\n    }\r\n\r\n    this.gl.uniform1f(this.decayLoc, mdVSFrame.decay);\r\n    this.gl.uniform2fv(this.resolutionLoc, [this.texsizeX, this.texsizeY]);\r\n    this.gl.uniform4fv(this.aspectLoc, [\r\n      this.aspectx,\r\n      this.aspecty,\r\n      this.invAspectx,\r\n      this.invAspecty,\r\n    ]);\r\n    this.gl.uniform4fv(this.texsizeLoc, [\r\n      this.texsizeX,\r\n      this.texsizeY,\r\n      1.0 / this.texsizeX,\r\n      1.0 / this.texsizeY,\r\n    ]);\r\n    this.gl.uniform4fv(this.texsizeNoiseLQLoc, [256, 256, 1 / 256, 1 / 256]);\r\n    this.gl.uniform4fv(this.texsizeNoiseMQLoc, [256, 256, 1 / 256, 1 / 256]);\r\n    this.gl.uniform4fv(this.texsizeNoiseHQLoc, [256, 256, 1 / 256, 1 / 256]);\r\n    this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc, [32, 32, 1 / 32, 1 / 32]);\r\n    this.gl.uniform4fv(this.texsizeNoiseVolLQLoc, [32, 32, 1 / 32, 1 / 32]);\r\n    this.gl.uniform4fv(this.texsizeNoiseVolHQLoc, [32, 32, 1 / 32, 1 / 32]);\r\n\r\n    this.gl.uniform1f(this.bassLoc, mdVSFrame.bass);\r\n    this.gl.uniform1f(this.midLoc, mdVSFrame.mid);\r\n    this.gl.uniform1f(this.trebLoc, mdVSFrame.treb);\r\n    this.gl.uniform1f(\r\n      this.volLoc,\r\n      (mdVSFrame.bass + mdVSFrame.mid + mdVSFrame.treb) / 3\r\n    );\r\n    this.gl.uniform1f(this.bassAttLoc, mdVSFrame.bass_att);\r\n    this.gl.uniform1f(this.midAttLoc, mdVSFrame.mid_att);\r\n    this.gl.uniform1f(this.trebAttLoc, mdVSFrame.treb_att);\r\n    this.gl.uniform1f(\r\n      this.volAttLoc,\r\n      (mdVSFrame.bass_att + mdVSFrame.mid_att + mdVSFrame.treb_att) / 3\r\n    );\r\n    this.gl.uniform1f(this.timeLoc, mdVSFrame.time);\r\n    this.gl.uniform1f(this.frameLoc, mdVSFrame.frame);\r\n    this.gl.uniform1f(this.fpsLoc, mdVSFrame.fps);\r\n    this.gl.uniform4fv(this.randPresetLoc, mdVSFrame.rand_preset);\r\n    this.gl.uniform4fv(\r\n      this.randFrameLoc,\r\n      new Float32Array([\r\n        Math.random(),\r\n        Math.random(),\r\n        Math.random(),\r\n        Math.random(),\r\n      ])\r\n    );\r\n\r\n    this.gl.uniform4fv(\r\n      this.qaLoc,\r\n      new Float32Array([\r\n        mdVSQs.q1 || 0,\r\n        mdVSQs.q2 || 0,\r\n        mdVSQs.q3 || 0,\r\n        mdVSQs.q4 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qbLoc,\r\n      new Float32Array([\r\n        mdVSQs.q5 || 0,\r\n        mdVSQs.q6 || 0,\r\n        mdVSQs.q7 || 0,\r\n        mdVSQs.q8 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qcLoc,\r\n      new Float32Array([\r\n        mdVSQs.q9 || 0,\r\n        mdVSQs.q10 || 0,\r\n        mdVSQs.q11 || 0,\r\n        mdVSQs.q12 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qdLoc,\r\n      new Float32Array([\r\n        mdVSQs.q13 || 0,\r\n        mdVSQs.q14 || 0,\r\n        mdVSQs.q15 || 0,\r\n        mdVSQs.q16 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qeLoc,\r\n      new Float32Array([\r\n        mdVSQs.q17 || 0,\r\n        mdVSQs.q18 || 0,\r\n        mdVSQs.q19 || 0,\r\n        mdVSQs.q20 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qfLoc,\r\n      new Float32Array([\r\n        mdVSQs.q21 || 0,\r\n        mdVSQs.q22 || 0,\r\n        mdVSQs.q23 || 0,\r\n        mdVSQs.q24 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qgLoc,\r\n      new Float32Array([\r\n        mdVSQs.q25 || 0,\r\n        mdVSQs.q26 || 0,\r\n        mdVSQs.q27 || 0,\r\n        mdVSQs.q28 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qhLoc,\r\n      new Float32Array([\r\n        mdVSQs.q29 || 0,\r\n        mdVSQs.q30 || 0,\r\n        mdVSQs.q31 || 0,\r\n        mdVSQs.q32 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(this.slowRoamCosLoc, [\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.005),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.008),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.013),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.022),\r\n    ]);\r\n    this.gl.uniform4fv(this.roamCosLoc, [\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.3),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 1.3),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 5.0),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 20.0),\r\n    ]);\r\n    this.gl.uniform4fv(this.slowRoamSinLoc, [\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.005),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.008),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.013),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.022),\r\n    ]);\r\n    this.gl.uniform4fv(this.roamSinLoc, [\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.3),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 1.3),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 5.0),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 20.0),\r\n    ]);\r\n\r\n    this.bindBlurVals(blurMins, blurMaxs);\r\n\r\n    if (blending) {\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n    } else {\r\n      this.gl.disable(this.gl.BLEND);\r\n    }\r\n\r\n    this.gl.drawElements(\r\n      this.gl.TRIANGLES,\r\n      this.indices.length,\r\n      this.gl.UNSIGNED_SHORT,\r\n      0\r\n    );\r\n\r\n    if (!blending) {\r\n      this.gl.enable(this.gl.BLEND);\r\n    }\r\n  }\r\n}\r\n","import ShaderUtils from \"./shaderUtils\";\r\n\r\nexport default class CompShader {\r\n  constructor(gl, noise, image, opts = {}) {\r\n    this.gl = gl;\r\n    this.noise = noise;\r\n    this.image = image;\r\n\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.compWidth = 32;\r\n    this.compHeight = 24;\r\n\r\n    this.buildPositions();\r\n\r\n    this.indexBuf = gl.createBuffer();\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n    this.compColorVertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n\r\n    this.mainSampler = this.gl.createSampler();\r\n    this.mainSamplerFW = this.gl.createSampler();\r\n    this.mainSamplerFC = this.gl.createSampler();\r\n    this.mainSamplerPW = this.gl.createSampler();\r\n    this.mainSamplerPC = this.gl.createSampler();\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSampler,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSampler, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFW,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSamplerFW, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFC,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerFC, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFC,\r\n      gl.TEXTURE_WRAP_S,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n    gl.samplerParameteri(\r\n      this.mainSamplerFC,\r\n      gl.TEXTURE_WRAP_T,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPW,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.NEAREST_MIPMAP_NEAREST\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.mainSamplerPW, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPC,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.NEAREST_MIPMAP_NEAREST\r\n    );\r\n    gl.samplerParameteri(this.mainSamplerPC, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPC,\r\n      gl.TEXTURE_WRAP_S,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n    gl.samplerParameteri(\r\n      this.mainSamplerPC,\r\n      gl.TEXTURE_WRAP_T,\r\n      gl.CLAMP_TO_EDGE\r\n    );\r\n  }\r\n\r\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\r\n  buildPositions() {\r\n    const width = 2;\r\n    const height = 2;\r\n\r\n    const widthHalf = width / 2;\r\n    const heightHalf = height / 2;\r\n\r\n    const gridX = this.compWidth;\r\n    const gridY = this.compHeight;\r\n\r\n    const gridX1 = gridX + 1;\r\n    const gridY1 = gridY + 1;\r\n\r\n    const segmentWidth = width / gridX;\r\n    const segmentHeight = height / gridY;\r\n\r\n    const vertices = [];\r\n    for (let iy = 0; iy < gridY1; iy++) {\r\n      const y = iy * segmentHeight - heightHalf;\r\n      for (let ix = 0; ix < gridX1; ix++) {\r\n        const x = ix * segmentWidth - widthHalf;\r\n\r\n        vertices.push(x, -y, 0);\r\n      }\r\n    }\r\n\r\n    const indices = [];\r\n    for (let iy = 0; iy < gridY; iy++) {\r\n      for (let ix = 0; ix < gridX; ix++) {\r\n        const a = ix + gridX1 * iy;\r\n        const b = ix + gridX1 * (iy + 1);\r\n        const c = ix + 1 + gridX1 * (iy + 1);\r\n        const d = ix + 1 + gridX1 * iy;\r\n\r\n        indices.push(a, b, d);\r\n        indices.push(b, c, d);\r\n      }\r\n    }\r\n\r\n    this.vertices = new Float32Array(vertices);\r\n    this.indices = new Uint16Array(indices);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.buildPositions();\r\n  }\r\n\r\n  createShader(shaderText = \"\") {\r\n    let fragShaderText;\r\n    let fragShaderHeaderText;\r\n    if (shaderText.length === 0) {\r\n      fragShaderText = `float orient_horiz = mod(echo_orientation, 2.0);\r\n                        float orient_x = (orient_horiz != 0.0) ? -1.0 : 1.0;\r\n                        float orient_y = (echo_orientation >= 2.0) ? -1.0 : 1.0;\r\n                        vec2 uv_echo = ((uv - 0.5) *\r\n                                        (1.0 / echo_zoom) *\r\n                                        vec2(orient_x, orient_y)) + 0.5;\r\n\r\n                        ret = mix(texture(sampler_main, uv).rgb,\r\n                                  texture(sampler_main, uv_echo).rgb,\r\n                                  echo_alpha);\r\n\r\n                        ret *= gammaAdj;\r\n\r\n                        if(fShader >= 1.0) {\r\n                          ret *= hue_shader;\r\n                        } else if(fShader > 0.001) {\r\n                          ret *= (1.0 - fShader) + (fShader * hue_shader);\r\n                        }\r\n\r\n                        if(brighten != 0) ret = sqrt(ret);\r\n                        if(darken != 0) ret = ret*ret;\r\n                        if(solarize != 0) ret = ret * (1.0 - ret) * 4.0;\r\n                        if(invert != 0) ret = 1.0 - ret;`;\r\n      fragShaderHeaderText = \"\";\r\n    } else {\r\n      const shaderParts = ShaderUtils.getShaderParts(shaderText);\r\n      fragShaderHeaderText = shaderParts[0];\r\n      fragShaderText = shaderParts[1];\r\n    }\r\n\r\n    fragShaderText = fragShaderText.replace(/texture2D/g, \"texture\");\r\n    fragShaderText = fragShaderText.replace(/texture3D/g, \"texture\");\r\n\r\n    this.userTextures = ShaderUtils.getUserSamplers(fragShaderHeaderText);\r\n\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      const vec2 halfmad = vec2(0.5);\r\n      in vec2 aPos;\r\n      in vec4 aCompColor;\r\n      out vec2 vUv;\r\n      out vec4 vColor;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos, 0.0, 1.0);\r\n        vUv = aPos * halfmad + halfmad;\r\n        vColor = aCompColor;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `\r\n      #version 300 es\r\n      precision ${this.floatPrecision} float;\r\n      precision highp int;\r\n      precision mediump sampler2D;\r\n      precision mediump sampler3D;\r\n\r\n      vec3 lum(vec3 v){\r\n          return vec3(dot(v, vec3(0.32,0.49,0.29)));\r\n      }\r\n\r\n      in vec2 vUv;\r\n      in vec4 vColor;\r\n      out vec4 fragColor;\r\n      uniform sampler2D sampler_main;\r\n      uniform sampler2D sampler_fw_main;\r\n      uniform sampler2D sampler_fc_main;\r\n      uniform sampler2D sampler_pw_main;\r\n      uniform sampler2D sampler_pc_main;\r\n      uniform sampler2D sampler_blur1;\r\n      uniform sampler2D sampler_blur2;\r\n      uniform sampler2D sampler_blur3;\r\n      uniform sampler2D sampler_noise_lq;\r\n      uniform sampler2D sampler_noise_lq_lite;\r\n      uniform sampler2D sampler_noise_mq;\r\n      uniform sampler2D sampler_noise_hq;\r\n      uniform sampler2D sampler_pw_noise_lq;\r\n      uniform sampler3D sampler_noisevol_lq;\r\n      uniform sampler3D sampler_noisevol_hq;\r\n\r\n      uniform float time;\r\n      uniform float gammaAdj;\r\n      uniform float echo_zoom;\r\n      uniform float echo_alpha;\r\n      uniform float echo_orientation;\r\n      uniform int invert;\r\n      uniform int brighten;\r\n      uniform int darken;\r\n      uniform int solarize;\r\n      uniform vec2 resolution;\r\n      uniform vec4 aspect;\r\n      uniform vec4 texsize;\r\n      uniform vec4 texsize_noise_lq;\r\n      uniform vec4 texsize_noise_mq;\r\n      uniform vec4 texsize_noise_hq;\r\n      uniform vec4 texsize_noise_lq_lite;\r\n      uniform vec4 texsize_noisevol_lq;\r\n      uniform vec4 texsize_noisevol_hq;\r\n\r\n      uniform float bass;\r\n      uniform float mid;\r\n      uniform float treb;\r\n      uniform float vol;\r\n      uniform float bass_att;\r\n      uniform float mid_att;\r\n      uniform float treb_att;\r\n      uniform float vol_att;\r\n\r\n      uniform float frame;\r\n      uniform float fps;\r\n\r\n      uniform vec4 _qa;\r\n      uniform vec4 _qb;\r\n      uniform vec4 _qc;\r\n      uniform vec4 _qd;\r\n      uniform vec4 _qe;\r\n      uniform vec4 _qf;\r\n      uniform vec4 _qg;\r\n      uniform vec4 _qh;\r\n\r\n      #define q1 _qa.x\r\n      #define q2 _qa.y\r\n      #define q3 _qa.z\r\n      #define q4 _qa.w\r\n      #define q5 _qb.x\r\n      #define q6 _qb.y\r\n      #define q7 _qb.z\r\n      #define q8 _qb.w\r\n      #define q9 _qc.x\r\n      #define q10 _qc.y\r\n      #define q11 _qc.z\r\n      #define q12 _qc.w\r\n      #define q13 _qd.x\r\n      #define q14 _qd.y\r\n      #define q15 _qd.z\r\n      #define q16 _qd.w\r\n      #define q17 _qe.x\r\n      #define q18 _qe.y\r\n      #define q19 _qe.z\r\n      #define q20 _qe.w\r\n      #define q21 _qf.x\r\n      #define q22 _qf.y\r\n      #define q23 _qf.z\r\n      #define q24 _qf.w\r\n      #define q25 _qg.x\r\n      #define q26 _qg.y\r\n      #define q27 _qg.z\r\n      #define q28 _qg.w\r\n      #define q29 _qh.x\r\n      #define q30 _qh.y\r\n      #define q31 _qh.z\r\n      #define q32 _qh.w\r\n\r\n      uniform vec4 slow_roam_cos;\r\n      uniform vec4 roam_cos;\r\n      uniform vec4 slow_roam_sin;\r\n      uniform vec4 roam_sin;\r\n\r\n      uniform float blur1_min;\r\n      uniform float blur1_max;\r\n      uniform float blur2_min;\r\n      uniform float blur2_max;\r\n      uniform float blur3_min;\r\n      uniform float blur3_max;\r\n\r\n      uniform float scale1;\r\n      uniform float scale2;\r\n      uniform float scale3;\r\n      uniform float bias1;\r\n      uniform float bias2;\r\n      uniform float bias3;\r\n\r\n      uniform vec4 rand_frame;\r\n      uniform vec4 rand_preset;\r\n\r\n      uniform float fShader;\r\n\r\n      float PI = ${Math.PI};\r\n\r\n      ${fragShaderHeaderText}\r\n\r\n      void main(void) {\r\n        vec3 ret;\r\n        vec2 uv = vUv;\r\n        vec2 uv_orig = vUv;\r\n        uv.y = 1.0 - uv.y;\r\n        uv_orig.y = 1.0 - uv_orig.y;\r\n        float rad = length(uv - 0.5);\r\n        float ang = atan(uv.x - 0.5, uv.y - 0.5);\r\n        vec3 hue_shader = vColor.rgb;\r\n\r\n        ${fragShaderText}\r\n\r\n        fragColor = vec4(ret, vColor.a);\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.compColorLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aCompColor\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_main\"\r\n    );\r\n    this.textureFWLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_fw_main\"\r\n    );\r\n    this.textureFCLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_fc_main\"\r\n    );\r\n    this.texturePWLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_pw_main\"\r\n    );\r\n    this.texturePCLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_pc_main\"\r\n    );\r\n    this.blurTexture1Loc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_blur1\"\r\n    );\r\n    this.blurTexture2Loc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_blur2\"\r\n    );\r\n    this.blurTexture3Loc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_blur3\"\r\n    );\r\n    this.noiseLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_lq\"\r\n    );\r\n    this.noiseMQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_mq\"\r\n    );\r\n    this.noiseHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_hq\"\r\n    );\r\n    this.noiseLQLiteLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noise_lq_lite\"\r\n    );\r\n    this.noisePointLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_pw_noise_lq\"\r\n    );\r\n    this.noiseVolLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noisevol_lq\"\r\n    );\r\n    this.noiseVolHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"sampler_noisevol_hq\"\r\n    );\r\n    this.timeLoc = this.gl.getUniformLocation(this.shaderProgram, \"time\");\r\n    this.gammaAdjLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"gammaAdj\"\r\n    );\r\n    this.echoZoomLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"echo_zoom\"\r\n    );\r\n    this.echoAlphaLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"echo_alpha\"\r\n    );\r\n    this.echoOrientationLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"echo_orientation\"\r\n    );\r\n    this.invertLoc = this.gl.getUniformLocation(this.shaderProgram, \"invert\");\r\n    this.brightenLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"brighten\"\r\n    );\r\n    this.darkenLoc = this.gl.getUniformLocation(this.shaderProgram, \"darken\");\r\n    this.solarizeLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"solarize\"\r\n    );\r\n    this.texsizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"texsize\");\r\n    this.texsizeNoiseLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_lq\"\r\n    );\r\n    this.texsizeNoiseMQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_mq\"\r\n    );\r\n    this.texsizeNoiseHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_hq\"\r\n    );\r\n    this.texsizeNoiseLQLiteLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noise_lq_lite\"\r\n    );\r\n    this.texsizeNoiseVolLQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noisevol_lq\"\r\n    );\r\n    this.texsizeNoiseVolHQLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize_noisevol_hq\"\r\n    );\r\n    this.resolutionLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"resolution\"\r\n    );\r\n    this.aspectLoc = this.gl.getUniformLocation(this.shaderProgram, \"aspect\");\r\n    this.bassLoc = this.gl.getUniformLocation(this.shaderProgram, \"bass\");\r\n    this.midLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid\");\r\n    this.trebLoc = this.gl.getUniformLocation(this.shaderProgram, \"treb\");\r\n    this.volLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol\");\r\n    this.bassAttLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"bass_att\"\r\n    );\r\n    this.midAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"mid_att\");\r\n    this.trebAttLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"treb_att\"\r\n    );\r\n    this.volAttLoc = this.gl.getUniformLocation(this.shaderProgram, \"vol_att\");\r\n    this.frameLoc = this.gl.getUniformLocation(this.shaderProgram, \"frame\");\r\n    this.fpsLoc = this.gl.getUniformLocation(this.shaderProgram, \"fps\");\r\n    this.blur1MinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur1_min\"\r\n    );\r\n    this.blur1MaxLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur1_max\"\r\n    );\r\n    this.blur2MinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur2_min\"\r\n    );\r\n    this.blur2MaxLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur2_max\"\r\n    );\r\n    this.blur3MinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur3_min\"\r\n    );\r\n    this.blur3MaxLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"blur3_max\"\r\n    );\r\n    this.scale1Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale1\");\r\n    this.scale2Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale2\");\r\n    this.scale3Loc = this.gl.getUniformLocation(this.shaderProgram, \"scale3\");\r\n    this.bias1Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias1\");\r\n    this.bias2Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias2\");\r\n    this.bias3Loc = this.gl.getUniformLocation(this.shaderProgram, \"bias3\");\r\n    this.randPresetLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"rand_preset\"\r\n    );\r\n    this.randFrameLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"rand_frame\"\r\n    );\r\n    this.fShaderLoc = this.gl.getUniformLocation(this.shaderProgram, \"fShader\");\r\n\r\n    this.qaLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qa\");\r\n    this.qbLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qb\");\r\n    this.qcLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qc\");\r\n    this.qdLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qd\");\r\n    this.qeLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qe\");\r\n    this.qfLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qf\");\r\n    this.qgLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qg\");\r\n    this.qhLoc = this.gl.getUniformLocation(this.shaderProgram, \"_qh\");\r\n\r\n    this.slowRoamCosLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"slow_roam_cos\"\r\n    );\r\n    this.roamCosLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"roam_cos\"\r\n    );\r\n    this.slowRoamSinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"slow_roam_sin\"\r\n    );\r\n    this.roamSinLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"roam_sin\"\r\n    );\r\n\r\n    for (let i = 0; i < this.userTextures.length; i++) {\r\n      const userTexture = this.userTextures[i];\r\n      userTexture.textureLoc = this.gl.getUniformLocation(\r\n        this.shaderProgram,\r\n        `sampler_${userTexture.sampler}`\r\n      );\r\n    }\r\n  }\r\n\r\n  updateShader(shaderText) {\r\n    this.createShader(shaderText);\r\n  }\r\n\r\n  bindBlurVals(blurMins, blurMaxs) {\r\n    const blurMin1 = blurMins[0];\r\n    const blurMin2 = blurMins[1];\r\n    const blurMin3 = blurMins[2];\r\n    const blurMax1 = blurMaxs[0];\r\n    const blurMax2 = blurMaxs[1];\r\n    const blurMax3 = blurMaxs[2];\r\n\r\n    const scale1 = blurMax1 - blurMin1;\r\n    const bias1 = blurMin1;\r\n\r\n    const scale2 = blurMax2 - blurMin2;\r\n    const bias2 = blurMin2;\r\n\r\n    const scale3 = blurMax3 - blurMin3;\r\n    const bias3 = blurMin3;\r\n\r\n    this.gl.uniform1f(this.blur1MinLoc, blurMin1);\r\n    this.gl.uniform1f(this.blur1MaxLoc, blurMax1);\r\n    this.gl.uniform1f(this.blur2MinLoc, blurMin2);\r\n    this.gl.uniform1f(this.blur2MaxLoc, blurMax2);\r\n    this.gl.uniform1f(this.blur3MinLoc, blurMin3);\r\n    this.gl.uniform1f(this.blur3MaxLoc, blurMax3);\r\n    this.gl.uniform1f(this.scale1Loc, scale1);\r\n    this.gl.uniform1f(this.scale2Loc, scale2);\r\n    this.gl.uniform1f(this.scale3Loc, scale3);\r\n    this.gl.uniform1f(this.bias1Loc, bias1);\r\n    this.gl.uniform1f(this.bias2Loc, bias2);\r\n    this.gl.uniform1f(this.bias3Loc, bias3);\r\n  }\r\n\r\n  static generateHueBase(mdVSFrame) {\r\n    const hueBase = new Float32Array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]);\r\n\r\n    /* eslint-disable max-len */\r\n    for (let i = 0; i < 4; i++) {\r\n      hueBase[i * 3 + 0] =\r\n        0.6 +\r\n        0.3 *\r\n          Math.sin(\r\n            mdVSFrame.time * 30.0 * 0.0143 +\r\n              3 +\r\n              i * 21 +\r\n              mdVSFrame.rand_start[3]\r\n          );\r\n      hueBase[i * 3 + 1] =\r\n        0.6 +\r\n        0.3 *\r\n          Math.sin(\r\n            mdVSFrame.time * 30.0 * 0.0107 +\r\n              1 +\r\n              i * 13 +\r\n              mdVSFrame.rand_start[1]\r\n          );\r\n      hueBase[i * 3 + 2] =\r\n        0.6 +\r\n        0.3 *\r\n          Math.sin(\r\n            mdVSFrame.time * 30.0 * 0.0129 + 6 + i * 9 + mdVSFrame.rand_start[2]\r\n          );\r\n      const maxshade = Math.max(\r\n        hueBase[i * 3],\r\n        hueBase[i * 3 + 1],\r\n        hueBase[i * 3 + 2]\r\n      );\r\n      for (let k = 0; k < 3; k++) {\r\n        hueBase[i * 3 + k] = hueBase[i * 3 + k] / maxshade;\r\n        hueBase[i * 3 + k] = 0.5 + 0.5 * hueBase[i * 3 + k];\r\n      }\r\n    }\r\n    /* eslint-enable max-len */\r\n\r\n    return hueBase;\r\n  }\r\n\r\n  generateCompColors(blending, mdVSFrame, warpColor) {\r\n    const hueBase = CompShader.generateHueBase(mdVSFrame);\r\n    const gridX1 = this.compWidth + 1;\r\n    const gridY1 = this.compHeight + 1;\r\n    const compColor = new Float32Array(gridX1 * gridY1 * 4);\r\n\r\n    let offsetColor = 0;\r\n    for (let j = 0; j < gridY1; j++) {\r\n      for (let i = 0; i < gridX1; i++) {\r\n        let x = i / this.compWidth;\r\n        let y = j / this.compHeight;\r\n\r\n        const col = [1, 1, 1];\r\n        for (let c = 0; c < 3; c++) {\r\n          col[c] =\r\n            hueBase[0 + c] * x * y +\r\n            hueBase[3 + c] * (1 - x) * y +\r\n            hueBase[6 + c] * x * (1 - y) +\r\n            hueBase[9 + c] * (1 - x) * (1 - y);\r\n        }\r\n\r\n        let alpha = 1;\r\n        if (blending) {\r\n          x *= this.mesh_width + 1;\r\n          y *= this.mesh_height + 1;\r\n          x = Math.clamp(x, 0, this.mesh_width - 1);\r\n          y = Math.clamp(y, 0, this.mesh_height - 1);\r\n          const nx = Math.floor(x);\r\n          const ny = Math.floor(y);\r\n          const dx = x - nx;\r\n          const dy = y - ny;\r\n          const alpha00 = warpColor[(ny * (this.mesh_width + 1) + nx) * 4 + 3];\r\n          const alpha01 =\r\n            warpColor[(ny * (this.mesh_width + 1) + (nx + 1)) * 4 + 3];\r\n          const alpha10 =\r\n            warpColor[((ny + 1) * (this.mesh_width + 1) + nx) * 4 + 3];\r\n          const alpha11 =\r\n            warpColor[((ny + 1) * (this.mesh_width + 1) + (nx + 1)) * 4 + 3];\r\n          alpha =\r\n            alpha00 * (1 - dx) * (1 - dy) +\r\n            alpha01 * dx * (1 - dy) +\r\n            alpha10 * (1 - dx) * dy +\r\n            alpha11 * dx * dy;\r\n        }\r\n\r\n        compColor[offsetColor + 0] = col[0];\r\n        compColor[offsetColor + 1] = col[1];\r\n        compColor[offsetColor + 2] = col[2];\r\n        compColor[offsetColor + 3] = alpha;\r\n\r\n        offsetColor += 4;\r\n      }\r\n    }\r\n\r\n    return compColor;\r\n  }\r\n\r\n  renderQuadTexture(\r\n    blending,\r\n    texture,\r\n    blurTexture1,\r\n    blurTexture2,\r\n    blurTexture3,\r\n    blurMins,\r\n    blurMaxs,\r\n    mdVSFrame,\r\n    mdVSQs,\r\n    warpColor\r\n  ) {\r\n    const compColors = this.generateCompColors(blending, mdVSFrame, warpColor);\r\n\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ELEMENT_ARRAY_BUFFER,\r\n      this.indices,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.vertices,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      3,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.compColorVertexBuf);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, compColors, this.gl.STATIC_DRAW);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.compColorLocation,\r\n      4,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.compColorLocation);\r\n\r\n    const wrapping =\r\n      mdVSFrame.wrap !== 0 ? this.gl.REPEAT : this.gl.CLAMP_TO_EDGE;\r\n    this.gl.samplerParameteri(\r\n      this.mainSampler,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      wrapping\r\n    );\r\n    this.gl.samplerParameteri(\r\n      this.mainSampler,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      wrapping\r\n    );\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(0, this.mainSampler);\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE1);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(1, this.mainSamplerFW);\r\n    this.gl.uniform1i(this.textureFWLoc, 1);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE2);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(2, this.mainSamplerFC);\r\n    this.gl.uniform1i(this.textureFCLoc, 2);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE3);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(3, this.mainSamplerPW);\r\n    this.gl.uniform1i(this.texturePWLoc, 3);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE4);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.bindSampler(4, this.mainSamplerPC);\r\n    this.gl.uniform1i(this.texturePCLoc, 4);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE5);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture1);\r\n    this.gl.uniform1i(this.blurTexture1Loc, 5);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE6);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture2);\r\n    this.gl.uniform1i(this.blurTexture2Loc, 6);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE7);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, blurTexture3);\r\n    this.gl.uniform1i(this.blurTexture3Loc, 7);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE8);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\r\n    this.gl.uniform1i(this.noiseLQLoc, 8);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE9);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexMQ);\r\n    this.gl.uniform1i(this.noiseMQLoc, 9);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE10);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexHQ);\r\n    this.gl.uniform1i(this.noiseHQLoc, 10);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE11);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQLite);\r\n    this.gl.uniform1i(this.noiseLQLiteLoc, 11);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE12);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.noise.noiseTexLQ);\r\n    this.gl.bindSampler(12, this.noise.noiseTexPointLQ);\r\n    this.gl.uniform1i(this.noisePointLQLoc, 12);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE13);\r\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolLQ);\r\n    this.gl.uniform1i(this.noiseVolLQLoc, 13);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE14);\r\n    this.gl.bindTexture(this.gl.TEXTURE_3D, this.noise.noiseTexVolHQ);\r\n    this.gl.uniform1i(this.noiseVolHQLoc, 14);\r\n\r\n    for (let i = 0; i < this.userTextures.length; i++) {\r\n      const userTexture = this.userTextures[i];\r\n      this.gl.activeTexture(this.gl.TEXTURE15 + i);\r\n      this.gl.bindTexture(\r\n        this.gl.TEXTURE_2D,\r\n        this.image.getTexture(userTexture.sampler)\r\n      );\r\n      this.gl.uniform1i(userTexture.textureLoc, 15 + i);\r\n    }\r\n\r\n    this.gl.uniform1f(this.timeLoc, mdVSFrame.time);\r\n    this.gl.uniform1f(this.gammaAdjLoc, mdVSFrame.gammaadj);\r\n    this.gl.uniform1f(this.echoZoomLoc, mdVSFrame.echo_zoom);\r\n    this.gl.uniform1f(this.echoAlphaLoc, mdVSFrame.echo_alpha);\r\n    this.gl.uniform1f(this.echoOrientationLoc, mdVSFrame.echo_orient);\r\n    this.gl.uniform1i(this.invertLoc, mdVSFrame.invert);\r\n    this.gl.uniform1i(this.brightenLoc, mdVSFrame.brighten);\r\n    this.gl.uniform1i(this.darkenLoc, mdVSFrame.darken);\r\n    this.gl.uniform1i(this.solarizeLoc, mdVSFrame.solarize);\r\n    this.gl.uniform2fv(this.resolutionLoc, [this.texsizeX, this.texsizeY]);\r\n    this.gl.uniform4fv(this.aspectLoc, [\r\n      this.aspectx,\r\n      this.aspecty,\r\n      this.invAspectx,\r\n      this.invAspecty,\r\n    ]);\r\n    this.gl.uniform4fv(\r\n      this.texsizeLoc,\r\n      new Float32Array([\r\n        this.texsizeX,\r\n        this.texsizeY,\r\n        1.0 / this.texsizeX,\r\n        1.0 / this.texsizeY,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(this.texsizeNoiseLQLoc, [256, 256, 1 / 256, 1 / 256]);\r\n    this.gl.uniform4fv(this.texsizeNoiseMQLoc, [256, 256, 1 / 256, 1 / 256]);\r\n    this.gl.uniform4fv(this.texsizeNoiseHQLoc, [256, 256, 1 / 256, 1 / 256]);\r\n    this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc, [32, 32, 1 / 32, 1 / 32]);\r\n    this.gl.uniform4fv(this.texsizeNoiseVolLQLoc, [32, 32, 1 / 32, 1 / 32]);\r\n    this.gl.uniform4fv(this.texsizeNoiseVolHQLoc, [32, 32, 1 / 32, 1 / 32]);\r\n    this.gl.uniform1f(this.bassLoc, mdVSFrame.bass);\r\n    this.gl.uniform1f(this.midLoc, mdVSFrame.mid);\r\n    this.gl.uniform1f(this.trebLoc, mdVSFrame.treb);\r\n    this.gl.uniform1f(\r\n      this.volLoc,\r\n      (mdVSFrame.bass + mdVSFrame.mid + mdVSFrame.treb) / 3\r\n    );\r\n    this.gl.uniform1f(this.bassAttLoc, mdVSFrame.bass_att);\r\n    this.gl.uniform1f(this.midAttLoc, mdVSFrame.mid_att);\r\n    this.gl.uniform1f(this.trebAttLoc, mdVSFrame.treb_att);\r\n    this.gl.uniform1f(\r\n      this.volAttLoc,\r\n      (mdVSFrame.bass_att + mdVSFrame.mid_att + mdVSFrame.treb_att) / 3\r\n    );\r\n    this.gl.uniform1f(this.frameLoc, mdVSFrame.frame);\r\n    this.gl.uniform1f(this.fpsLoc, mdVSFrame.fps);\r\n    this.gl.uniform4fv(this.randPresetLoc, mdVSFrame.rand_preset);\r\n    this.gl.uniform4fv(\r\n      this.randFrameLoc,\r\n      new Float32Array([\r\n        Math.random(),\r\n        Math.random(),\r\n        Math.random(),\r\n        Math.random(),\r\n      ])\r\n    );\r\n    this.gl.uniform1f(this.fShaderLoc, mdVSFrame.fshader);\r\n\r\n    this.gl.uniform4fv(\r\n      this.qaLoc,\r\n      new Float32Array([\r\n        mdVSQs.q1 || 0,\r\n        mdVSQs.q2 || 0,\r\n        mdVSQs.q3 || 0,\r\n        mdVSQs.q4 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qbLoc,\r\n      new Float32Array([\r\n        mdVSQs.q5 || 0,\r\n        mdVSQs.q6 || 0,\r\n        mdVSQs.q7 || 0,\r\n        mdVSQs.q8 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qcLoc,\r\n      new Float32Array([\r\n        mdVSQs.q9 || 0,\r\n        mdVSQs.q10 || 0,\r\n        mdVSQs.q11 || 0,\r\n        mdVSQs.q12 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qdLoc,\r\n      new Float32Array([\r\n        mdVSQs.q13 || 0,\r\n        mdVSQs.q14 || 0,\r\n        mdVSQs.q15 || 0,\r\n        mdVSQs.q16 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qeLoc,\r\n      new Float32Array([\r\n        mdVSQs.q17 || 0,\r\n        mdVSQs.q18 || 0,\r\n        mdVSQs.q19 || 0,\r\n        mdVSQs.q20 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qfLoc,\r\n      new Float32Array([\r\n        mdVSQs.q21 || 0,\r\n        mdVSQs.q22 || 0,\r\n        mdVSQs.q23 || 0,\r\n        mdVSQs.q24 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qgLoc,\r\n      new Float32Array([\r\n        mdVSQs.q25 || 0,\r\n        mdVSQs.q26 || 0,\r\n        mdVSQs.q27 || 0,\r\n        mdVSQs.q28 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(\r\n      this.qhLoc,\r\n      new Float32Array([\r\n        mdVSQs.q29 || 0,\r\n        mdVSQs.q30 || 0,\r\n        mdVSQs.q31 || 0,\r\n        mdVSQs.q32 || 0,\r\n      ])\r\n    );\r\n    this.gl.uniform4fv(this.slowRoamCosLoc, [\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.005),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.008),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.013),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.022),\r\n    ]);\r\n    this.gl.uniform4fv(this.roamCosLoc, [\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 0.3),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 1.3),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 5.0),\r\n      0.5 + 0.5 * Math.cos(mdVSFrame.time * 20.0),\r\n    ]);\r\n    this.gl.uniform4fv(this.slowRoamSinLoc, [\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.005),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.008),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.013),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.022),\r\n    ]);\r\n    this.gl.uniform4fv(this.roamSinLoc, [\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 0.3),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 1.3),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 5.0),\r\n      0.5 + 0.5 * Math.sin(mdVSFrame.time * 20.0),\r\n    ]);\r\n\r\n    this.bindBlurVals(blurMins, blurMaxs);\r\n\r\n    if (blending) {\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n    } else {\r\n      this.gl.disable(this.gl.BLEND);\r\n    }\r\n\r\n    this.gl.drawElements(\r\n      this.gl.TRIANGLES,\r\n      this.indices.length,\r\n      this.gl.UNSIGNED_SHORT,\r\n      0\r\n    );\r\n\r\n    if (!blending) {\r\n      this.gl.enable(this.gl.BLEND);\r\n    }\r\n  }\r\n}\r\n","import ShaderUtils from \"./shaderUtils\";\r\n\r\nexport default class OutputShader {\r\n  constructor(gl, opts) {\r\n    this.gl = gl;\r\n\r\n    this.textureRatio = opts.textureRatio;\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n\r\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\r\n\r\n    this.vertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    if (this.useFXAA()) {\r\n      this.createFXAAShader();\r\n    } else {\r\n      this.createShader();\r\n    }\r\n  }\r\n\r\n  useFXAA() {\r\n    return this.textureRatio <= 1;\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.textureRatio = opts.textureRatio;\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n\r\n    this.gl.deleteProgram(this.shaderProgram);\r\n\r\n    if (this.useFXAA()) {\r\n      this.createFXAAShader();\r\n    } else {\r\n      this.createShader();\r\n    }\r\n  }\r\n\r\n  // based on https://github.com/mattdesl/glsl-fxaa\r\n  createFXAAShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `#version 300 es\r\n       const vec2 halfmad = vec2(0.5);\r\n       in vec2 aPos;\r\n       out vec2 v_rgbM;\r\n       out vec2 v_rgbNW;\r\n       out vec2 v_rgbNE;\r\n       out vec2 v_rgbSW;\r\n       out vec2 v_rgbSE;\r\n       uniform vec4 texsize;\r\n       void main(void) {\r\n         gl_Position = vec4(aPos, 0.0, 1.0);\r\n\r\n         v_rgbM = aPos * halfmad + halfmad;\r\n         v_rgbNW = v_rgbM + (vec2(-1.0, -1.0) * texsize.zx);\r\n         v_rgbNE = v_rgbM + (vec2(1.0, -1.0) * texsize.zx);\r\n         v_rgbSW = v_rgbM + (vec2(-1.0, 1.0) * texsize.zx);\r\n         v_rgbSE = v_rgbM + (vec2(1.0, 1.0) * texsize.zx);\r\n       }`\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `#version 300 es\r\n       precision ${this.floatPrecision} float;\r\n       precision highp int;\r\n       precision mediump sampler2D;\r\n\r\n       in vec2 v_rgbM;\r\n       in vec2 v_rgbNW;\r\n       in vec2 v_rgbNE;\r\n       in vec2 v_rgbSW;\r\n       in vec2 v_rgbSE;\r\n       out vec4 fragColor;\r\n       uniform vec4 texsize;\r\n       uniform sampler2D uTexture;\r\n\r\n       #ifndef FXAA_REDUCE_MIN\r\n         #define FXAA_REDUCE_MIN   (1.0/ 128.0)\r\n       #endif\r\n       #ifndef FXAA_REDUCE_MUL\r\n         #define FXAA_REDUCE_MUL   (1.0 / 8.0)\r\n       #endif\r\n       #ifndef FXAA_SPAN_MAX\r\n         #define FXAA_SPAN_MAX     8.0\r\n       #endif\r\n\r\n       void main(void) {\r\n         vec4 color;\r\n         vec3 rgbNW = textureLod(uTexture, v_rgbNW, 0.0).xyz;\r\n         vec3 rgbNE = textureLod(uTexture, v_rgbNE, 0.0).xyz;\r\n         vec3 rgbSW = textureLod(uTexture, v_rgbSW, 0.0).xyz;\r\n         vec3 rgbSE = textureLod(uTexture, v_rgbSE, 0.0).xyz;\r\n         vec3 rgbM  = textureLod(uTexture, v_rgbM, 0.0).xyz;\r\n         vec3 luma = vec3(0.299, 0.587, 0.114);\r\n         float lumaNW = dot(rgbNW, luma);\r\n         float lumaNE = dot(rgbNE, luma);\r\n         float lumaSW = dot(rgbSW, luma);\r\n         float lumaSE = dot(rgbSE, luma);\r\n         float lumaM  = dot(rgbM,  luma);\r\n         float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\r\n         float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\r\n\r\n         mediump vec2 dir;\r\n         dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\r\n         dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\r\n\r\n         float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\r\n                               (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\r\n\r\n         float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\r\n         dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\r\n                   max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\r\n                   dir * rcpDirMin)) * texsize.zw;\r\n\r\n         vec3 rgbA = 0.5 * (\r\n             textureLod(uTexture, v_rgbM + dir * (1.0 / 3.0 - 0.5), 0.0).xyz +\r\n             textureLod(uTexture, v_rgbM + dir * (2.0 / 3.0 - 0.5), 0.0).xyz);\r\n         vec3 rgbB = rgbA * 0.5 + 0.25 * (\r\n             textureLod(uTexture, v_rgbM + dir * -0.5, 0.0).xyz +\r\n             textureLod(uTexture, v_rgbM + dir * 0.5, 0.0).xyz);\r\n\r\n         float lumaB = dot(rgbB, luma);\r\n         if ((lumaB < lumaMin) || (lumaB > lumaMax))\r\n           color = vec4(rgbA, 1.0);\r\n         else\r\n           color = vec4(rgbB, 1.0);\r\n\r\n         fragColor = color;\r\n       }`\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n    this.texsizeLoc = this.gl.getUniformLocation(this.shaderProgram, \"texsize\");\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `#version 300 es\r\n       const vec2 halfmad = vec2(0.5);\r\n       in vec2 aPos;\r\n       out vec2 uv;\r\n       void main(void) {\r\n         gl_Position = vec4(aPos, 0.0, 1.0);\r\n         uv = aPos * halfmad + halfmad;\r\n       }`\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `#version 300 es\r\n       precision ${this.floatPrecision} float;\r\n       precision highp int;\r\n       precision mediump sampler2D;\r\n\r\n       in vec2 uv;\r\n       out vec4 fragColor;\r\n       uniform sampler2D uTexture;\r\n\r\n       void main(void) {\r\n         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);\r\n       }`\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n  }\r\n\r\n  renderQuadTexture(texture) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.positions,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      2,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    if (this.useFXAA()) {\r\n      this.gl.uniform4fv(\r\n        this.texsizeLoc,\r\n        new Float32Array([\r\n          this.texsizeX,\r\n          this.texsizeY,\r\n          1.0 / this.texsizeX,\r\n          1.0 / this.texsizeY,\r\n        ])\r\n      );\r\n    }\r\n\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\r\n  }\r\n}\r\n","import ShaderUtils from \"./shaderUtils\";\r\n\r\nexport default class ResampleShader {\r\n  constructor(gl) {\r\n    this.gl = gl;\r\n\r\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\r\n\r\n    this.vertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `#version 300 es\r\n       const vec2 halfmad = vec2(0.5);\r\n       in vec2 aPos;\r\n       out vec2 uv;\r\n       void main(void) {\r\n         gl_Position = vec4(aPos, 0.0, 1.0);\r\n         uv = aPos * halfmad + halfmad;\r\n       }`\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `#version 300 es\r\n       precision ${this.floatPrecision} float;\r\n       precision highp int;\r\n       precision mediump sampler2D;\r\n\r\n       in vec2 uv;\r\n       out vec4 fragColor;\r\n       uniform sampler2D uTexture;\r\n\r\n       void main(void) {\r\n         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);\r\n       }`\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n  }\r\n\r\n  renderQuadTexture(texture) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.positions,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      2,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\r\n  }\r\n}\r\n","import ShaderUtils from \"../shaderUtils\";\r\n\r\nexport default class BlurVertical {\r\n  constructor(gl, blurLevel) {\r\n    this.gl = gl;\r\n    this.blurLevel = blurLevel;\r\n\r\n    const w = [4.0, 3.8, 3.5, 2.9, 1.9, 1.2, 0.7, 0.3];\r\n    const w1V = w[0] + w[1] + w[2] + w[3];\r\n    const w2V = w[4] + w[5] + w[6] + w[7];\r\n    const d1V = 0 + 2 * ((w[2] + w[3]) / w1V);\r\n    const d2V = 2 + 2 * ((w[6] + w[7]) / w2V);\r\n\r\n    this.wds = new Float32Array([w1V, w2V, d1V, d2V]);\r\n    this.wDiv = 1.0 / ((w1V + w2V) * 2);\r\n\r\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\r\n\r\n    this.vertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      const vec2 halfmad = vec2(0.5);\r\n      in vec2 aPos;\r\n      out vec2 uv;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos, 0.0, 1.0);\r\n        uv = aPos * halfmad + halfmad;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `#version 300 es\r\n       precision ${this.floatPrecision} float;\r\n       precision highp int;\r\n       precision mediump sampler2D;\r\n\r\n       in vec2 uv;\r\n       out vec4 fragColor;\r\n       uniform sampler2D uTexture;\r\n       uniform vec4 texsize;\r\n       uniform float ed1;\r\n       uniform float ed2;\r\n       uniform float ed3;\r\n       uniform vec4 wds;\r\n       uniform float wdiv;\r\n\r\n       void main(void) {\r\n         float w1 = wds[0];\r\n         float w2 = wds[1];\r\n         float d1 = wds[2];\r\n         float d2 = wds[3];\r\n\r\n         vec2 uv2 = uv.xy;\r\n\r\n         vec3 blur =\r\n           ( texture(uTexture, uv2 + vec2(0.0, d1 * texsize.w) ).xyz\r\n           + texture(uTexture, uv2 + vec2(0.0,-d1 * texsize.w) ).xyz) * w1 +\r\n           ( texture(uTexture, uv2 + vec2(0.0, d2 * texsize.w) ).xyz\r\n           + texture(uTexture, uv2 + vec2(0.0,-d2 * texsize.w) ).xyz) * w2;\r\n\r\n         blur.xyz *= wdiv;\r\n\r\n         float t = min(min(uv.x, uv.y), 1.0 - max(uv.x, uv.y));\r\n         t = sqrt(t);\r\n         t = ed1 + ed2 * clamp(t * ed3, 0.0, 1.0);\r\n         blur.xyz *= t;\r\n\r\n         fragColor = vec4(blur, 1.0);\r\n       }`\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n    this.texsizeLocation = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize\"\r\n    );\r\n    this.ed1Loc = this.gl.getUniformLocation(this.shaderProgram, \"ed1\");\r\n    this.ed2Loc = this.gl.getUniformLocation(this.shaderProgram, \"ed2\");\r\n    this.ed3Loc = this.gl.getUniformLocation(this.shaderProgram, \"ed3\");\r\n    this.wdsLocation = this.gl.getUniformLocation(this.shaderProgram, \"wds\");\r\n    this.wdivLoc = this.gl.getUniformLocation(this.shaderProgram, \"wdiv\");\r\n  }\r\n\r\n  renderQuadTexture(texture, mdVSFrame, srcTexsize) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.positions,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      2,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    const b1ed = this.blurLevel === 0 ? mdVSFrame.b1ed : 0.0;\r\n\r\n    this.gl.uniform4fv(this.texsizeLocation, [\r\n      srcTexsize[0],\r\n      srcTexsize[1],\r\n      1.0 / srcTexsize[0],\r\n      1.0 / srcTexsize[1],\r\n    ]);\r\n    this.gl.uniform1f(this.ed1Loc, 1.0 - b1ed);\r\n    this.gl.uniform1f(this.ed2Loc, b1ed);\r\n    this.gl.uniform1f(this.ed3Loc, 5.0);\r\n    this.gl.uniform4fv(this.wdsLocation, this.wds);\r\n    this.gl.uniform1f(this.wdivLoc, this.wDiv);\r\n\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\r\n  }\r\n}\r\n","import ShaderUtils from \"../shaderUtils\";\r\n\r\nexport default class BlurHorizontal {\r\n  constructor(gl, blurLevel) {\r\n    this.gl = gl;\r\n    this.blurLevel = blurLevel;\r\n\r\n    const w = [4.0, 3.8, 3.5, 2.9, 1.9, 1.2, 0.7, 0.3];\r\n    const w1H = w[0] + w[1];\r\n    const w2H = w[2] + w[3];\r\n    const w3H = w[4] + w[5];\r\n    const w4H = w[6] + w[7];\r\n    const d1H = 0 + (2 * w[1]) / w1H;\r\n    const d2H = 2 + (2 * w[3]) / w2H;\r\n    const d3H = 4 + (2 * w[5]) / w3H;\r\n    const d4H = 6 + (2 * w[7]) / w4H;\r\n\r\n    this.ws = new Float32Array([w1H, w2H, w3H, w4H]);\r\n    this.ds = new Float32Array([d1H, d2H, d3H, d4H]);\r\n    this.wDiv = 0.5 / (w1H + w2H + w3H + w4H);\r\n\r\n    this.positions = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\r\n\r\n    this.vertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `\r\n      #version 300 es\r\n      const vec2 halfmad = vec2(0.5);\r\n      in vec2 aPos;\r\n      out vec2 uv;\r\n      void main(void) {\r\n        gl_Position = vec4(aPos, 0.0, 1.0);\r\n        uv = aPos * halfmad + halfmad;\r\n      }\r\n      `.trim()\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `#version 300 es\r\n       precision ${this.floatPrecision} float;\r\n       precision highp int;\r\n       precision mediump sampler2D;\r\n\r\n       in vec2 uv;\r\n       out vec4 fragColor;\r\n       uniform sampler2D uTexture;\r\n       uniform vec4 texsize;\r\n       uniform float scale;\r\n       uniform float bias;\r\n       uniform vec4 ws;\r\n       uniform vec4 ds;\r\n       uniform float wdiv;\r\n\r\n       void main(void) {\r\n         float w1 = ws[0];\r\n         float w2 = ws[1];\r\n         float w3 = ws[2];\r\n         float w4 = ws[3];\r\n         float d1 = ds[0];\r\n         float d2 = ds[1];\r\n         float d3 = ds[2];\r\n         float d4 = ds[3];\r\n\r\n         vec2 uv2 = uv.xy;\r\n\r\n         vec3 blur =\r\n           ( texture(uTexture, uv2 + vec2( d1 * texsize.z,0.0) ).xyz\r\n           + texture(uTexture, uv2 + vec2(-d1 * texsize.z,0.0) ).xyz) * w1 +\r\n           ( texture(uTexture, uv2 + vec2( d2 * texsize.z,0.0) ).xyz\r\n           + texture(uTexture, uv2 + vec2(-d2 * texsize.z,0.0) ).xyz) * w2 +\r\n           ( texture(uTexture, uv2 + vec2( d3 * texsize.z,0.0) ).xyz\r\n           + texture(uTexture, uv2 + vec2(-d3 * texsize.z,0.0) ).xyz) * w3 +\r\n           ( texture(uTexture, uv2 + vec2( d4 * texsize.z,0.0) ).xyz\r\n           + texture(uTexture, uv2 + vec2(-d4 * texsize.z,0.0) ).xyz) * w4;\r\n\r\n         blur.xyz *= wdiv;\r\n         blur.xyz = blur.xyz * scale + bias;\r\n\r\n         fragColor = vec4(blur, 1.0);\r\n       }`\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n    this.texsizeLocation = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"texsize\"\r\n    );\r\n    this.scaleLoc = this.gl.getUniformLocation(this.shaderProgram, \"scale\");\r\n    this.biasLoc = this.gl.getUniformLocation(this.shaderProgram, \"bias\");\r\n    this.wsLoc = this.gl.getUniformLocation(this.shaderProgram, \"ws\");\r\n    this.dsLocation = this.gl.getUniformLocation(this.shaderProgram, \"ds\");\r\n    this.wdivLoc = this.gl.getUniformLocation(this.shaderProgram, \"wdiv\");\r\n  }\r\n\r\n  getScaleAndBias(blurMins, blurMaxs) {\r\n    const scale = [1, 1, 1];\r\n    const bias = [0, 0, 0];\r\n\r\n    let tempMin;\r\n    let tempMax;\r\n    scale[0] = 1.0 / (blurMaxs[0] - blurMins[0]);\r\n    bias[0] = -blurMins[0] * scale[0];\r\n    tempMin = (blurMins[1] - blurMins[0]) / (blurMaxs[0] - blurMins[0]);\r\n    tempMax = (blurMaxs[1] - blurMins[0]) / (blurMaxs[0] - blurMins[0]);\r\n    scale[1] = 1.0 / (tempMax - tempMin);\r\n    bias[1] = -tempMin * scale[1];\r\n    tempMin = (blurMins[2] - blurMins[1]) / (blurMaxs[1] - blurMins[1]);\r\n    tempMax = (blurMaxs[2] - blurMins[1]) / (blurMaxs[1] - blurMins[1]);\r\n    scale[2] = 1.0 / (tempMax - tempMin);\r\n    bias[2] = -tempMin * scale[2];\r\n\r\n    return {\r\n      scale: scale[this.blurLevel],\r\n      bias: bias[this.blurLevel],\r\n    };\r\n  }\r\n\r\n  renderQuadTexture(texture, mdVSFrame, blurMins, blurMaxs, srcTexsize) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.positions,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      2,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    const { scale, bias } = this.getScaleAndBias(blurMins, blurMaxs);\r\n\r\n    this.gl.uniform4fv(this.texsizeLocation, [\r\n      srcTexsize[0],\r\n      srcTexsize[1],\r\n      1.0 / srcTexsize[0],\r\n      1.0 / srcTexsize[1],\r\n    ]);\r\n    this.gl.uniform1f(this.scaleLoc, scale);\r\n    this.gl.uniform1f(this.biasLoc, bias);\r\n    this.gl.uniform4fv(this.wsLoc, this.ws);\r\n    this.gl.uniform4fv(this.dsLocation, this.ds);\r\n    this.gl.uniform1f(this.wdivLoc, this.wDiv);\r\n\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\r\n  }\r\n}\r\n","import BlurVertical from \"./blurVertical\";\r\nimport BlurHorizontal from \"./blurHorizontal\";\r\n\r\nexport default class BlurShader {\r\n  constructor(blurLevel, blurRatios, gl, opts = {}) {\r\n    this.blurLevel = blurLevel;\r\n    this.blurRatios = blurRatios;\r\n    this.gl = gl;\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n\r\n    this.anisoExt =\r\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n\r\n    this.blurHorizontalFrameBuffer = this.gl.createFramebuffer();\r\n    this.blurVerticalFrameBuffer = this.gl.createFramebuffer();\r\n\r\n    this.blurHorizontalTexture = this.gl.createTexture();\r\n    this.blurVerticalTexture = this.gl.createTexture();\r\n\r\n    this.setupFrameBufferTextures();\r\n\r\n    this.blurHorizontal = new BlurHorizontal(gl, this.blurLevel, opts);\r\n    this.blurVertical = new BlurVertical(gl, this.blurLevel, opts);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n\r\n    this.setupFrameBufferTextures();\r\n  }\r\n\r\n  getTextureSize(sizeRatio) {\r\n    let sizeX = Math.max(this.texsizeX * sizeRatio, 16);\r\n    sizeX = Math.floor((sizeX + 3) / 16) * 16;\r\n    let sizeY = Math.max(this.texsizeY * sizeRatio, 16);\r\n    sizeY = Math.floor((sizeY + 3) / 4) * 4;\r\n    return [sizeX, sizeY];\r\n  }\r\n\r\n  setupFrameBufferTextures() {\r\n    const srcBlurRatios =\r\n      this.blurLevel > 0 ? this.blurRatios[this.blurLevel - 1] : [1, 1];\r\n    const dstBlurRatios = this.blurRatios[this.blurLevel];\r\n    const srcTexsizeHorizontal = this.getTextureSize(srcBlurRatios[1]);\r\n    const dstTexsizeHorizontal = this.getTextureSize(dstBlurRatios[0]);\r\n    this.bindFrameBufferTexture(\r\n      this.blurHorizontalFrameBuffer,\r\n      this.blurHorizontalTexture,\r\n      dstTexsizeHorizontal\r\n    );\r\n\r\n    const srcTexsizeVertical = dstTexsizeHorizontal;\r\n    const dstTexsizeVertical = this.getTextureSize(dstBlurRatios[1]);\r\n    this.bindFrameBufferTexture(\r\n      this.blurVerticalFrameBuffer,\r\n      this.blurVerticalTexture,\r\n      dstTexsizeVertical\r\n    );\r\n\r\n    this.horizontalTexsizes = [srcTexsizeHorizontal, dstTexsizeHorizontal];\r\n    this.verticalTexsizes = [srcTexsizeVertical, dstTexsizeVertical];\r\n  }\r\n\r\n  bindFrambufferAndSetViewport(fb, texsize) {\r\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, fb);\r\n    this.gl.viewport(0, 0, texsize[0], texsize[1]);\r\n  }\r\n\r\n  bindFrameBufferTexture(targetFrameBuffer, targetTexture, texsize) {\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, targetTexture);\r\n\r\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      0,\r\n      this.gl.RGBA,\r\n      texsize[0],\r\n      texsize[1],\r\n      0,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      new Uint8Array(texsize[0] * texsize[1] * 4)\r\n    );\r\n\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      this.gl.CLAMP_TO_EDGE\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      this.gl.CLAMP_TO_EDGE\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MIN_FILTER,\r\n      this.gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MAG_FILTER,\r\n      this.gl.LINEAR\r\n    );\r\n    if (this.anisoExt) {\r\n      const max = this.gl.getParameter(\r\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\r\n      );\r\n      this.gl.texParameterf(\r\n        this.gl.TEXTURE_2D,\r\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\r\n        max\r\n      );\r\n    }\r\n\r\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, targetFrameBuffer);\r\n    this.gl.framebufferTexture2D(\r\n      this.gl.FRAMEBUFFER,\r\n      this.gl.COLOR_ATTACHMENT0,\r\n      this.gl.TEXTURE_2D,\r\n      targetTexture,\r\n      0\r\n    );\r\n  }\r\n\r\n  renderBlurTexture(prevTexture, mdVSFrame, blurMins, blurMaxs) {\r\n    this.bindFrambufferAndSetViewport(\r\n      this.blurHorizontalFrameBuffer,\r\n      this.horizontalTexsizes[1]\r\n    );\r\n    this.blurHorizontal.renderQuadTexture(\r\n      prevTexture,\r\n      mdVSFrame,\r\n      blurMins,\r\n      blurMaxs,\r\n      this.horizontalTexsizes[0]\r\n    );\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.blurHorizontalTexture);\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.bindFrambufferAndSetViewport(\r\n      this.blurVerticalFrameBuffer,\r\n      this.verticalTexsizes[1]\r\n    );\r\n    this.blurVertical.renderQuadTexture(\r\n      this.blurHorizontalTexture,\r\n      mdVSFrame,\r\n      this.verticalTexsizes[0]\r\n    );\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.blurVerticalTexture);\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n  }\r\n}\r\n","export default class Noise {\r\n  constructor(gl) {\r\n    this.gl = gl;\r\n\r\n    this.anisoExt =\r\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n\r\n    this.noiseTexLQ = this.gl.createTexture();\r\n    this.noiseTexLQLite = this.gl.createTexture();\r\n    this.noiseTexMQ = this.gl.createTexture();\r\n    this.noiseTexHQ = this.gl.createTexture();\r\n\r\n    this.noiseTexVolLQ = this.gl.createTexture();\r\n    this.noiseTexVolHQ = this.gl.createTexture();\r\n\r\n    this.nTexArrLQ = Noise.createNoiseTex(256, 1);\r\n    this.nTexArrLQLite = Noise.createNoiseTex(32, 1);\r\n    this.nTexArrMQ = Noise.createNoiseTex(256, 4);\r\n    this.nTexArrHQ = Noise.createNoiseTex(256, 8);\r\n\r\n    this.nTexArrVolLQ = Noise.createNoiseVolTex(32, 1);\r\n    this.nTexArrVolHQ = Noise.createNoiseVolTex(32, 4);\r\n\r\n    this.bindTexture(this.noiseTexLQ, this.nTexArrLQ, 256, 256);\r\n    this.bindTexture(this.noiseTexLQLite, this.nTexArrLQLite, 32, 32);\r\n    this.bindTexture(this.noiseTexMQ, this.nTexArrMQ, 256, 256);\r\n    this.bindTexture(this.noiseTexHQ, this.nTexArrHQ, 256, 256);\r\n\r\n    this.bindTexture3D(this.noiseTexVolLQ, this.nTexArrVolLQ, 32, 32, 32);\r\n    this.bindTexture3D(this.noiseTexVolHQ, this.nTexArrVolHQ, 32, 32, 32);\r\n\r\n    this.noiseTexPointLQ = this.gl.createSampler();\r\n    gl.samplerParameteri(\r\n      this.noiseTexPointLQ,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.NEAREST_MIPMAP_NEAREST\r\n    );\r\n    gl.samplerParameteri(\r\n      this.noiseTexPointLQ,\r\n      gl.TEXTURE_MAG_FILTER,\r\n      gl.NEAREST\r\n    );\r\n    gl.samplerParameteri(this.noiseTexPointLQ, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n    gl.samplerParameteri(this.noiseTexPointLQ, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n  }\r\n\r\n  bindTexture(texture, data, width, height) {\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      0,\r\n      this.gl.RGBA,\r\n      width,\r\n      height,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      data\r\n    );\r\n\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MIN_FILTER,\r\n      this.gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MAG_FILTER,\r\n      this.gl.LINEAR\r\n    );\r\n    if (this.anisoExt) {\r\n      const max = this.gl.getParameter(\r\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\r\n      );\r\n      this.gl.texParameterf(\r\n        this.gl.TEXTURE_2D,\r\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\r\n        max\r\n      );\r\n    }\r\n  }\r\n\r\n  bindTexture3D(texture, data, width, height, depth) {\r\n    this.gl.bindTexture(this.gl.TEXTURE_3D, texture);\r\n\r\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\r\n    this.gl.texImage3D(\r\n      this.gl.TEXTURE_3D,\r\n      0,\r\n      this.gl.RGBA,\r\n      width,\r\n      height,\r\n      depth,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      data\r\n    );\r\n\r\n    this.gl.generateMipmap(this.gl.TEXTURE_3D);\r\n\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_3D,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_3D,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_3D,\r\n      this.gl.TEXTURE_WRAP_R,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_3D,\r\n      this.gl.TEXTURE_MIN_FILTER,\r\n      this.gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_3D,\r\n      this.gl.TEXTURE_MAG_FILTER,\r\n      this.gl.LINEAR\r\n    );\r\n    if (this.anisoExt) {\r\n      const max = this.gl.getParameter(\r\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\r\n      );\r\n      this.gl.texParameterf(\r\n        this.gl.TEXTURE_3D,\r\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\r\n        max\r\n      );\r\n    }\r\n  }\r\n\r\n  static fCubicInterpolate(y0, y1, y2, y3, t) {\r\n    const t2 = t * t;\r\n    const t3 = t * t2;\r\n    const a0 = y3 - y2 - y0 + y1;\r\n    const a1 = y0 - y1 - a0;\r\n    const a2 = y2 - y0;\r\n    const a3 = y1;\r\n\r\n    return a0 * t3 + a1 * t2 + a2 * t + a3;\r\n  }\r\n\r\n  static dwCubicInterpolate(y0, y1, y2, y3, t) {\r\n    const ret = [];\r\n    for (let i = 0; i < 4; i++) {\r\n      let f = Noise.fCubicInterpolate(\r\n        y0[i] / 255.0,\r\n        y1[i] / 255.0,\r\n        y2[i] / 255.0,\r\n        y3[i] / 255.0,\r\n        t\r\n      );\r\n      f = Math.clamp(f, 0, 1);\r\n      ret[i] = f * 255;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  static createNoiseVolTex(noiseSize, zoom) {\r\n    const nsize = noiseSize * noiseSize * noiseSize;\r\n    const texArr = new Uint8Array(nsize * 4);\r\n    const texRange = zoom > 1 ? 216 : 256;\r\n    const halfTexRange = texRange * 0.5;\r\n    for (let i = 0; i < nsize; i++) {\r\n      texArr[i * 4 + 0] = Math.floor(Math.random() * texRange + halfTexRange);\r\n      texArr[i * 4 + 1] = Math.floor(Math.random() * texRange + halfTexRange);\r\n      texArr[i * 4 + 2] = Math.floor(Math.random() * texRange + halfTexRange);\r\n      texArr[i * 4 + 3] = Math.floor(Math.random() * texRange + halfTexRange);\r\n    }\r\n\r\n    const wordsPerSlice = noiseSize * noiseSize;\r\n    const wordsPerLine = noiseSize;\r\n    if (zoom > 1) {\r\n      for (let z = 0; z < noiseSize; z += zoom) {\r\n        for (let y = 0; y < noiseSize; y += zoom) {\r\n          for (let x = 0; x < noiseSize; x++) {\r\n            if (x % zoom !== 0) {\r\n              const baseX = Math.floor(x / zoom) * zoom + noiseSize;\r\n              const baseY = z * wordsPerSlice + y * wordsPerLine;\r\n\r\n              const y0 = [];\r\n              const y1 = [];\r\n              const y2 = [];\r\n              const y3 = [];\r\n              for (let i = 0; i < 4; i++) {\r\n                y0[i] =\r\n                  texArr[baseY * 4 + ((baseX - zoom) % noiseSize) * 4 + i];\r\n                y1[i] = texArr[baseY * 4 + (baseX % noiseSize) * 4 + i];\r\n                y2[i] =\r\n                  texArr[baseY * 4 + ((baseX + zoom) % noiseSize) * 4 + i];\r\n                y3[i] =\r\n                  texArr[baseY * 4 + ((baseX + zoom * 2) % noiseSize) * 4 + i];\r\n              }\r\n\r\n              const t = (x % zoom) / zoom;\r\n              const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\r\n\r\n              for (let i = 0; i < 4; i++) {\r\n                const offset = x * 4 + i;\r\n                texArr[z * wordsPerSlice * 4 + y * wordsPerLine * 4 + offset] =\r\n                  result[i];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let z = 0; z < noiseSize; z += zoom) {\r\n        for (let x = 0; x < noiseSize; x++) {\r\n          for (let y = 0; y < noiseSize; y++) {\r\n            if (y % zoom !== 0) {\r\n              const baseY = Math.floor(y / zoom) * zoom + noiseSize;\r\n              const baseZ = z * wordsPerSlice;\r\n\r\n              const y0 = [];\r\n              const y1 = [];\r\n              const y2 = [];\r\n              const y3 = [];\r\n              for (let i = 0; i < 4; i++) {\r\n                const offset = x * 4 + baseZ * 4 + i;\r\n                y0[i] =\r\n                  texArr[\r\n                    ((baseY - zoom) % noiseSize) * wordsPerLine * 4 + offset\r\n                  ];\r\n                y1[i] = texArr[(baseY % noiseSize) * wordsPerLine * 4 + offset];\r\n                y2[i] =\r\n                  texArr[\r\n                    ((baseY + zoom) % noiseSize) * wordsPerLine * 4 + offset\r\n                  ];\r\n                y3[i] =\r\n                  texArr[\r\n                    ((baseY + zoom * 2) % noiseSize) * wordsPerLine * 4 + offset\r\n                  ];\r\n              }\r\n\r\n              const t = (y % zoom) / zoom;\r\n              const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\r\n\r\n              for (let i = 0; i < 4; i++) {\r\n                const offset = x * 4 + baseZ * 4 + i;\r\n                texArr[y * wordsPerLine * 4 + offset] = result[i];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let x = 0; x < noiseSize; x++) {\r\n        for (let y = 0; y < noiseSize; y++) {\r\n          for (let z = 0; z < noiseSize; z++) {\r\n            if (z % zoom !== 0) {\r\n              const baseY = y * wordsPerLine;\r\n              const baseZ = Math.floor(z / zoom) * zoom + noiseSize;\r\n\r\n              const y0 = [];\r\n              const y1 = [];\r\n              const y2 = [];\r\n              const y3 = [];\r\n              for (let i = 0; i < 4; i++) {\r\n                const offset = x * 4 + baseY * 4 + i;\r\n                y0[i] =\r\n                  texArr[\r\n                    ((baseZ - zoom) % noiseSize) * wordsPerSlice * 4 + offset\r\n                  ];\r\n                y1[i] =\r\n                  texArr[(baseZ % noiseSize) * wordsPerSlice * 4 + offset];\r\n                y2[i] =\r\n                  texArr[\r\n                    ((baseZ + zoom) % noiseSize) * wordsPerSlice * 4 + offset\r\n                  ];\r\n                y3[i] =\r\n                  texArr[\r\n                    ((baseZ + zoom * 2) % noiseSize) * wordsPerSlice * 4 +\r\n                      offset\r\n                  ];\r\n              }\r\n\r\n              const t = (y % zoom) / zoom;\r\n              const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\r\n\r\n              for (let i = 0; i < 4; i++) {\r\n                const offset = x * 4 + baseY * 4 + i;\r\n                texArr[z * wordsPerSlice * 4 + offset] = result[i];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return texArr;\r\n  }\r\n\r\n  static createNoiseTex(noiseSize, zoom) {\r\n    const nsize = noiseSize * noiseSize;\r\n    const texArr = new Uint8Array(nsize * 4);\r\n    const texRange = zoom > 1 ? 216 : 256;\r\n    const halfTexRange = texRange * 0.5;\r\n    for (let i = 0; i < nsize; i++) {\r\n      texArr[i * 4 + 0] = Math.floor(Math.random() * texRange + halfTexRange);\r\n      texArr[i * 4 + 1] = Math.floor(Math.random() * texRange + halfTexRange);\r\n      texArr[i * 4 + 2] = Math.floor(Math.random() * texRange + halfTexRange);\r\n      texArr[i * 4 + 3] = Math.floor(Math.random() * texRange + halfTexRange);\r\n    }\r\n\r\n    if (zoom > 1) {\r\n      for (let y = 0; y < noiseSize; y += zoom) {\r\n        for (let x = 0; x < noiseSize; x++) {\r\n          if (x % zoom !== 0) {\r\n            const baseX = Math.floor(x / zoom) * zoom + noiseSize;\r\n            const baseY = y * noiseSize;\r\n\r\n            const y0 = [];\r\n            const y1 = [];\r\n            const y2 = [];\r\n            const y3 = [];\r\n            for (let z = 0; z < 4; z++) {\r\n              y0[z] = texArr[baseY * 4 + ((baseX - zoom) % noiseSize) * 4 + z];\r\n              y1[z] = texArr[baseY * 4 + (baseX % noiseSize) * 4 + z];\r\n              y2[z] = texArr[baseY * 4 + ((baseX + zoom) % noiseSize) * 4 + z];\r\n              y3[z] =\r\n                texArr[baseY * 4 + ((baseX + zoom * 2) % noiseSize) * 4 + z];\r\n            }\r\n\r\n            const t = (x % zoom) / zoom;\r\n            const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\r\n\r\n            for (let z = 0; z < 4; z++) {\r\n              texArr[y * noiseSize * 4 + x * 4 + z] = result[z];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let x = 0; x < noiseSize; x++) {\r\n        for (let y = 0; y < noiseSize; y++) {\r\n          if (y % zoom !== 0) {\r\n            const baseY = Math.floor(y / zoom) * zoom + noiseSize;\r\n\r\n            const y0 = [];\r\n            const y1 = [];\r\n            const y2 = [];\r\n            const y3 = [];\r\n            for (let z = 0; z < 4; z++) {\r\n              y0[z] =\r\n                texArr[\r\n                  ((baseY - zoom) % noiseSize) * noiseSize * 4 + x * 4 + z\r\n                ];\r\n              y1[z] = texArr[(baseY % noiseSize) * noiseSize * 4 + x * 4 + z];\r\n              y2[z] =\r\n                texArr[\r\n                  ((baseY + zoom) % noiseSize) * noiseSize * 4 + x * 4 + z\r\n                ];\r\n              y3[z] =\r\n                texArr[\r\n                  ((baseY + zoom * 2) % noiseSize) * noiseSize * 4 + x * 4 + z\r\n                ];\r\n            }\r\n\r\n            const t = (y % zoom) / zoom;\r\n            const result = Noise.dwCubicInterpolate(y0, y1, y2, y3, t);\r\n\r\n            for (let z = 0; z < 4; z++) {\r\n              texArr[y * noiseSize * 4 + x * 4 + z] = result[z];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return texArr;\r\n  }\r\n}\r\n","export default class ImageTextures {\r\n  constructor(gl) {\r\n    this.gl = gl;\r\n\r\n    this.anisoExt =\r\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n\r\n    this.samplers = {};\r\n\r\n    /* eslint-disable max-len */\r\n    this.clouds2Image = new Image();\r\n    this.clouds2Image.onload = () => {\r\n      this.samplers.clouds2 = this.gl.createTexture();\r\n      this.bindTexture(this.samplers.clouds2, this.clouds2Image, 128, 128);\r\n    };\r\n    this.clouds2Image.src =\r\n      \"data:image/jpeg;base64,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\";\r\n\r\n    this.emptyImage = new Image();\r\n    this.emptyImage.onload = () => {\r\n      this.samplers.empty = this.gl.createTexture();\r\n      this.bindTexture(this.samplers.empty, this.emptyImage, 1, 1);\r\n    };\r\n    this.emptyImage.src =\r\n      \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\";\r\n    /* eslint-enable max-len */\r\n  }\r\n\r\n  bindTexture(texture, data, width, height) {\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      0,\r\n      this.gl.RGBA,\r\n      width,\r\n      height,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      data\r\n    );\r\n\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      this.gl.REPEAT\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MIN_FILTER,\r\n      this.gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MAG_FILTER,\r\n      this.gl.LINEAR\r\n    );\r\n    if (this.anisoExt) {\r\n      const max = this.gl.getParameter(\r\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\r\n      );\r\n      this.gl.texParameterf(\r\n        this.gl.TEXTURE_2D,\r\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\r\n        max\r\n      );\r\n    }\r\n  }\r\n\r\n  loadExtraImages(imageData) {\r\n    Object.keys(imageData).forEach((imageName) => {\r\n      const { data, width, height } = imageData[imageName];\r\n      if (!this.samplers[imageName]) {\r\n        const image = new Image();\r\n        image.onload = () => {\r\n          this.samplers[imageName] = this.gl.createTexture();\r\n          this.bindTexture(this.samplers[imageName], image, width, height);\r\n        };\r\n        image.src = data;\r\n      }\r\n    });\r\n  }\r\n\r\n  getTexture(sampler) {\r\n    const tex = this.samplers[sampler];\r\n    if (tex) {\r\n      return tex;\r\n    }\r\n\r\n    return this.samplers.clouds2;\r\n  }\r\n}\r\n","import ShaderUtils from \"../shaders/shaderUtils\";\r\n\r\nexport default class TitleText {\r\n  constructor(gl, opts = {}) {\r\n    this.gl = gl;\r\n\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.buildPositions();\r\n\r\n    this.textTexture = this.gl.createTexture();\r\n    this.indexBuf = gl.createBuffer();\r\n    this.positionVertexBuf = this.gl.createBuffer();\r\n    this.vertexBuf = this.gl.createBuffer();\r\n\r\n    this.floatPrecision = ShaderUtils.getFragmentFloatPrecision(this.gl);\r\n    this.createShader();\r\n  }\r\n\r\n  generateTitleTexture(buffer) {\r\n    const imageData = new Uint8Array(buffer);\r\n\r\n    this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.textTexture);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.texsizeX,\r\n      this.texsizeY,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      imageData\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MAG_FILTER,\r\n      this.gl.LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MIN_FILTER,\r\n      this.gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      this.gl.CLAMP_TO_EDGE\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      this.gl.CLAMP_TO_EDGE\r\n    );\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, null);\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    this.texsizeX = opts.texsizeX;\r\n    this.texsizeY = opts.texsizeY;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n  }\r\n\r\n  // based on https://github.com/mrdoob/three.js/blob/master/src/geometries/PlaneGeometry.js\r\n  buildPositions() {\r\n    const width = 2;\r\n    const height = 2;\r\n\r\n    const widthHalf = width / 2;\r\n    const heightHalf = height / 2;\r\n\r\n    const gridX = 15;\r\n    const gridY = 7;\r\n\r\n    const gridX1 = gridX + 1;\r\n    const gridY1 = gridY + 1;\r\n\r\n    const segmentWidth = width / gridX;\r\n    const segmentHeight = height / gridY;\r\n\r\n    const vertices = [];\r\n    for (let iy = 0; iy < gridY1; iy++) {\r\n      const y = iy * segmentHeight - heightHalf;\r\n      for (let ix = 0; ix < gridX1; ix++) {\r\n        const x = ix * segmentWidth - widthHalf;\r\n        vertices.push(x, -y, 0);\r\n      }\r\n    }\r\n\r\n    const indices = [];\r\n    for (let iy = 0; iy < gridY; iy++) {\r\n      for (let ix = 0; ix < gridX; ix++) {\r\n        const a = ix + gridX1 * iy;\r\n        const b = ix + gridX1 * (iy + 1);\r\n        const c = ix + 1 + gridX1 * (iy + 1);\r\n        const d = ix + 1 + gridX1 * iy;\r\n\r\n        indices.push(a, b, d);\r\n        indices.push(b, c, d);\r\n      }\r\n    }\r\n\r\n    this.vertices = new Float32Array(vertices);\r\n    this.indices = new Uint16Array(indices);\r\n  }\r\n\r\n  createShader() {\r\n    this.shaderProgram = this.gl.createProgram();\r\n\r\n    const vertShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n    this.gl.shaderSource(\r\n      vertShader,\r\n      `#version 300 es\r\n       const vec2 halfmad = vec2(0.5);\r\n       in vec2 aPos;\r\n       in vec2 aUv;\r\n       out vec2 uv_orig;\r\n       out vec2 uv;\r\n       void main(void) {\r\n         gl_Position = vec4(aPos, 0.0, 1.0);\r\n         uv_orig = aPos * halfmad + halfmad;\r\n         uv = aUv;\r\n       }`\r\n    );\r\n    this.gl.compileShader(vertShader);\r\n\r\n    const fragShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n    this.gl.shaderSource(\r\n      fragShader,\r\n      `#version 300 es\r\n       precision ${this.floatPrecision} float;\r\n       precision highp int;\r\n       precision mediump sampler2D;\r\n\r\n       in vec2 uv_orig;\r\n       in vec2 uv;\r\n       out vec4 fragColor;\r\n       uniform sampler2D uTexture;\r\n       uniform float textColor;\r\n\r\n       void main(void) {\r\n         fragColor = texture(uTexture, uv) * vec4(textColor);\r\n       }`\r\n    );\r\n    this.gl.compileShader(fragShader);\r\n\r\n    this.gl.attachShader(this.shaderProgram, vertShader);\r\n    this.gl.attachShader(this.shaderProgram, fragShader);\r\n    this.gl.linkProgram(this.shaderProgram);\r\n\r\n    this.positionLocation = this.gl.getAttribLocation(\r\n      this.shaderProgram,\r\n      \"aPos\"\r\n    );\r\n    this.uvLocation = this.gl.getAttribLocation(this.shaderProgram, \"aUv\");\r\n    this.textureLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"uTexture\"\r\n    );\r\n    this.textColorLoc = this.gl.getUniformLocation(\r\n      this.shaderProgram,\r\n      \"textColor\"\r\n    );\r\n  }\r\n\r\n  generateUvs(progress, flip, globalVars) {\r\n    const gridX = 15;\r\n    const gridY = 7;\r\n\r\n    const gridX1 = gridX + 1;\r\n    const gridY1 = gridY + 1;\r\n\r\n    const uvs = [];\r\n    const vertClip = 0.75;\r\n    for (let j = 0; j < gridY1; j++) {\r\n      for (let i = 0; i < gridX1; i++) {\r\n        const u = i / gridX;\r\n        const v = (j / gridY - 0.5) * vertClip + 0.5;\r\n        const x = u * 2.0 - 1.0;\r\n        let y = v * 2.0 - 1.0;\r\n        if (progress >= 1) {\r\n          y += 1.0 / this.texsizeY;\r\n        }\r\n\r\n        uvs.push(x, flip ? y : -y);\r\n      }\r\n    }\r\n\r\n    const rampedProgress = Math.max(0, 1 - progress * 1.5);\r\n    const t2 = rampedProgress ** 1.8 * 1.3;\r\n    for (let j = 0; j < gridY1; j++) {\r\n      for (let i = 0; i < gridX1; i++) {\r\n        const idx = j * gridX1 + i;\r\n        uvs[idx] +=\r\n          t2 *\r\n          0.07 *\r\n          Math.sin(\r\n            globalVars.time * 0.31 + uvs[idx] * 0.39 - uvs[idx + 1] * 1.94\r\n          );\r\n        uvs[idx] +=\r\n          t2 *\r\n          0.044 *\r\n          Math.sin(\r\n            globalVars.time * 0.81 - uvs[idx] * 1.91 + uvs[idx + 1] * 0.27\r\n          );\r\n        uvs[idx] +=\r\n          t2 *\r\n          0.061 *\r\n          Math.sin(\r\n            globalVars.time * 1.31 + uvs[idx] * 0.61 + uvs[idx + 1] * 0.74\r\n          );\r\n\r\n        uvs[idx + 1] +=\r\n          t2 *\r\n          0.061 *\r\n          Math.sin(\r\n            globalVars.time * 0.37 + uvs[idx] * 1.83 + uvs[idx + 1] * 0.69\r\n          );\r\n        uvs[idx + 1] +=\r\n          t2 *\r\n          0.07 *\r\n          Math.sin(\r\n            globalVars.time * 0.67 + uvs[idx] * 0.42 - uvs[idx + 1] * 1.39\r\n          );\r\n        uvs[idx + 1] +=\r\n          t2 *\r\n          0.087 *\r\n          Math.sin(\r\n            globalVars.time * 1.07 + uvs[idx] * 3.55 + uvs[idx + 1] * 0.89\r\n          );\r\n      }\r\n    }\r\n\r\n    const scale = 1.01 / (progress ** 0.21 + 0.01);\r\n    for (let i = 0; i < uvs.length / 2; i++) {\r\n      uvs[i * 2] *= scale;\r\n      uvs[i * 2 + 1] *= scale * this.invAspecty;\r\n\r\n      // get back UVs\r\n      uvs[i * 2] = (uvs[i * 2] + 1) / 2.0;\r\n      uvs[i * 2 + 1] = (uvs[i * 2 + 1] + 1) / 2.0;\r\n    }\r\n\r\n    return new Float32Array(uvs);\r\n  }\r\n\r\n  renderTitle(progress, flip, globalVars) {\r\n    this.gl.useProgram(this.shaderProgram);\r\n\r\n    const progressUvs = this.generateUvs(progress, flip, globalVars);\r\n\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ELEMENT_ARRAY_BUFFER,\r\n      this.indices,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionVertexBuf);\r\n    this.gl.bufferData(\r\n      this.gl.ARRAY_BUFFER,\r\n      this.vertices,\r\n      this.gl.STATIC_DRAW\r\n    );\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.positionLocation,\r\n      3,\r\n      this.gl.FLOAT,\r\n      false,\r\n      0,\r\n      0\r\n    );\r\n    this.gl.enableVertexAttribArray(this.positionLocation);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuf);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, progressUvs, this.gl.STATIC_DRAW);\r\n\r\n    this.gl.vertexAttribPointer(this.uvLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n    this.gl.enableVertexAttribArray(this.uvLocation);\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.textTexture);\r\n\r\n    this.gl.uniform1i(this.textureLoc, 0);\r\n\r\n    this.gl.uniform1f(this.textColorLoc, progress ** 0.3);\r\n\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    this.gl.drawElements(\r\n      this.gl.TRIANGLES,\r\n      this.indices.length,\r\n      this.gl.UNSIGNED_SHORT,\r\n      0\r\n    );\r\n  }\r\n}\r\n","export default class BlendPattern {\r\n  constructor(opts) {\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n\r\n    this.vertInfoA = new Float32Array(\r\n      (this.mesh_width + 1) * (this.mesh_height + 1)\r\n    );\r\n    this.vertInfoC = new Float32Array(\r\n      (this.mesh_width + 1) * (this.mesh_height + 1)\r\n    );\r\n\r\n    this.createBlendPattern();\r\n  }\r\n\r\n  static resizeMatrixValues(oldMat, oldWidth, oldHeight, newWidth, newHeight) {\r\n    const newMat = new Float32Array((newWidth + 1) * (newHeight + 1));\r\n    let nVert = 0;\r\n    for (let j = 0; j < newHeight + 1; j++) {\r\n      for (let i = 0; i < newWidth + 1; i++) {\r\n        let x = i / newHeight;\r\n        let y = j / newWidth;\r\n\r\n        x *= oldWidth + 1;\r\n        y *= oldHeight + 1;\r\n        x = Math.clamp(x, 0, oldWidth - 1);\r\n        y = Math.clamp(y, 0, oldHeight - 1);\r\n        const nx = Math.floor(x);\r\n        const ny = Math.floor(y);\r\n        const dx = x - nx;\r\n        const dy = y - ny;\r\n        const val00 = oldMat[ny * (oldWidth + 1) + nx];\r\n        const val01 = oldMat[ny * (oldWidth + 1) + (nx + 1)];\r\n        const val10 = oldMat[(ny + 1) * (oldWidth + 1) + nx];\r\n        const val11 = oldMat[(ny + 1) * (oldWidth + 1) + (nx + 1)];\r\n        newMat[nVert] =\r\n          val00 * (1 - dx) * (1 - dy) +\r\n          val01 * dx * (1 - dy) +\r\n          val10 * (1 - dx) * dy +\r\n          val11 * dx * dy;\r\n\r\n        nVert += 1;\r\n      }\r\n    }\r\n\r\n    return newMat;\r\n  }\r\n\r\n  updateGlobals(opts) {\r\n    const oldMeshWidth = this.mesh_width;\r\n    const oldMeshHeight = this.mesh_height;\r\n\r\n    this.mesh_width = opts.mesh_width;\r\n    this.mesh_height = opts.mesh_height;\r\n    this.aspectx = opts.aspectx;\r\n    this.aspecty = opts.aspecty;\r\n\r\n    if (\r\n      this.mesh_width !== oldMeshWidth ||\r\n      this.mesh_height !== oldMeshHeight\r\n    ) {\r\n      this.vertInfoA = BlendPattern.resizeMatrixValues(\r\n        this.vertInfoA,\r\n        oldMeshWidth,\r\n        oldMeshHeight,\r\n        this.mesh_width,\r\n        this.mesh_height\r\n      );\r\n      this.vertInfoC = BlendPattern.resizeMatrixValues(\r\n        this.vertInfoC,\r\n        oldMeshWidth,\r\n        oldMeshHeight,\r\n        this.mesh_width,\r\n        this.mesh_height\r\n      );\r\n    }\r\n  }\r\n\r\n  genPlasma(x0, x1, y0, y1, dt) {\r\n    const midx = Math.floor((x0 + x1) / 2);\r\n    const midy = Math.floor((y0 + y1) / 2);\r\n    let t00 = this.vertInfoC[y0 * (this.mesh_width + 1) + x0];\r\n    let t01 = this.vertInfoC[y0 * (this.mesh_width + 1) + x1];\r\n    let t10 = this.vertInfoC[y1 * (this.mesh_width + 1) + x0];\r\n    let t11 = this.vertInfoC[y1 * (this.mesh_width + 1) + x1];\r\n\r\n    if (y1 - y0 >= 2) {\r\n      if (x0 === 0) {\r\n        this.vertInfoC[midy * (this.mesh_width + 1) + x0] =\r\n          0.5 * (t00 + t10) + (Math.random() * 2 - 1) * dt * this.aspecty;\r\n      }\r\n      this.vertInfoC[midy * (this.mesh_width + 1) + x1] =\r\n        0.5 * (t01 + t11) + (Math.random() * 2 - 1) * dt * this.aspecty;\r\n    }\r\n    if (x1 - x0 >= 2) {\r\n      if (y0 === 0) {\r\n        this.vertInfoC[y0 * (this.mesh_width + 1) + midx] =\r\n          0.5 * (t00 + t01) + (Math.random() * 2 - 1) * dt * this.aspectx;\r\n      }\r\n      this.vertInfoC[y1 * (this.mesh_width + 1) + midx] =\r\n        0.5 * (t10 + t11) + (Math.random() * 2 - 1) * dt * this.aspectx;\r\n    }\r\n\r\n    if (y1 - y0 >= 2 && x1 - x0 >= 2) {\r\n      t00 = this.vertInfoC[midy * (this.mesh_width + 1) + x0];\r\n      t01 = this.vertInfoC[midy * (this.mesh_width + 1) + x1];\r\n      t10 = this.vertInfoC[y0 * (this.mesh_width + 1) + midx];\r\n      t11 = this.vertInfoC[y1 * (this.mesh_width + 1) + midx];\r\n      this.vertInfoC[midy * (this.mesh_width + 1) + midx] =\r\n        0.25 * (t10 + t11 + t00 + t01) + (Math.random() * 2 - 1) * dt;\r\n\r\n      this.genPlasma(x0, midx, y0, midy, dt * 0.5);\r\n      this.genPlasma(midx, x1, y0, midy, dt * 0.5);\r\n      this.genPlasma(x0, midx, midy, y1, dt * 0.5);\r\n      this.genPlasma(midx, x1, midy, y1, dt * 0.5);\r\n    }\r\n  }\r\n\r\n  createBlendPattern() {\r\n    const mixType = 1 + Math.floor(Math.random() * 3);\r\n    if (mixType === 0) {\r\n      // not currently used\r\n      let nVert = 0;\r\n      for (let y = 0; y <= this.mesh_height; y++) {\r\n        for (let x = 0; x <= this.mesh_width; x++) {\r\n          this.vertInfoA[nVert] = 1;\r\n          this.vertInfoC[nVert] = 0;\r\n          nVert += 1;\r\n        }\r\n      }\r\n    } else if (mixType === 1) {\r\n      const ang = Math.random() * 6.28;\r\n      const vx = Math.cos(ang);\r\n      const vy = Math.sin(ang);\r\n      const band = 0.1 + 0.2 * Math.random();\r\n      const invBand = 1.0 / band;\r\n\r\n      let nVert = 0;\r\n      for (let y = 0; y <= this.mesh_height; y++) {\r\n        const fy = (y / this.mesh_height) * this.aspecty;\r\n        for (let x = 0; x <= this.mesh_width; x++) {\r\n          const fx = (x / this.mesh_width) * this.aspectx;\r\n\r\n          let t = (fx - 0.5) * vx + (fy - 0.5) * vy + 0.5;\r\n          t = (t - 0.5) / Math.sqrt(2) + 0.5;\r\n\r\n          this.vertInfoA[nVert] = invBand * (1 + band);\r\n          this.vertInfoC[nVert] = -invBand + invBand * t;\r\n          nVert += 1;\r\n        }\r\n      }\r\n    } else if (mixType === 2) {\r\n      const band = 0.12 + 0.13 * Math.random();\r\n      const invBand = 1.0 / band;\r\n\r\n      this.vertInfoC[0] = Math.random();\r\n      this.vertInfoC[this.mesh_width] = Math.random();\r\n      this.vertInfoC[this.mesh_height * (this.mesh_width + 1)] = Math.random();\r\n      this.vertInfoC[\r\n        this.mesh_height * (this.mesh_width + 1) + this.mesh_width\r\n      ] = Math.random();\r\n      this.genPlasma(0, this.mesh_width, 0, this.mesh_height, 0.25);\r\n\r\n      let minc = this.vertInfoC[0];\r\n      let maxc = this.vertInfoC[0];\r\n\r\n      let nVert = 0;\r\n      for (let y = 0; y <= this.mesh_height; y++) {\r\n        for (let x = 0; x <= this.mesh_width; x++) {\r\n          if (minc > this.vertInfoC[nVert]) {\r\n            minc = this.vertInfoC[nVert];\r\n          }\r\n          if (maxc < this.vertInfoC[nVert]) {\r\n            maxc = this.vertInfoC[nVert];\r\n          }\r\n          nVert += 1;\r\n        }\r\n      }\r\n\r\n      const mult = 1.0 / (maxc - minc);\r\n      nVert = 0;\r\n      for (let y = 0; y <= this.mesh_height; y++) {\r\n        for (let x = 0; x <= this.mesh_width; x++) {\r\n          const t = (this.vertInfoC[nVert] - minc) * mult;\r\n          this.vertInfoA[nVert] = invBand * (1 + band);\r\n          this.vertInfoC[nVert] = -invBand + invBand * t;\r\n          nVert += 1;\r\n        }\r\n      }\r\n    } else if (mixType === 3) {\r\n      const band = 0.02 + 0.14 * Math.random() + 0.34 * Math.random();\r\n      const invBand = 1.0 / band;\r\n      const dir = Math.floor(Math.random() * 2) * 2 - 1;\r\n\r\n      let nVert = 0;\r\n      for (let y = 0; y <= this.mesh_height; y++) {\r\n        const dy = (y / this.mesh_height - 0.5) * this.aspecty;\r\n        for (let x = 0; x <= this.mesh_width; x++) {\r\n          const dx = (x / this.mesh_width - 0.5) * this.aspectx;\r\n          let t = Math.sqrt(dx * dx + dy * dy) * 1.41421;\r\n          if (dir === -1) {\r\n            t = 1 - t;\r\n          }\r\n\r\n          this.vertInfoA[nVert] = invBand * (1 + band);\r\n          this.vertInfoC[nVert] = -invBand + invBand * t;\r\n          nVert += 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import AudioLevels from \"../audio/audioLevels\";\r\nimport blankPreset from \"../blankPreset\";\r\nimport PresetEquationRunner from \"../equations/presetEquationRunner\";\r\nimport PresetEquationRunnerWASM from \"../equations/presetEquationRunnerWASM\";\r\nimport BasicWaveform from \"./waves/basicWaveform\";\r\nimport CustomWaveform from \"./waves/customWaveform\";\r\nimport CustomShape from \"./shapes/customShape\";\r\nimport Border from \"./sprites/border\";\r\nimport DarkenCenter from \"./sprites/darkenCenter\";\r\nimport MotionVectors from \"./motionVectors/motionVectors\";\r\nimport WarpShader from \"./shaders/warp\";\r\nimport CompShader from \"./shaders/comp\";\r\nimport OutputShader from \"./shaders/output\";\r\nimport ResampleShader from \"./shaders/resample\";\r\nimport BlurShader from \"./shaders/blur/blur\";\r\nimport Noise from \"../noise/noise\";\r\nimport ImageTextures from \"../image/imageTextures\";\r\nimport TitleText from \"./text/titleText\";\r\nimport BlendPattern from \"./blendPattern\";\r\nimport Utils from \"../utils\";\r\n\r\nexport default class Renderer {\r\n  constructor(gl, audio, opts) {\r\n    this.gl = gl;\r\n    this.audio = audio;\r\n    this.showTitleOpts = {};\r\n    this.frameNum = 0;\r\n    this.fps = 30;\r\n    this.time = 0;\r\n    this.presetTime = 0;\r\n    this.lastTime = performance.now();\r\n    this.timeHist = [0];\r\n    this.timeHistMax = 120;\r\n    this.blending = false;\r\n    this.blendStartTime = 0;\r\n    this.blendProgress = 0;\r\n    this.blendDuration = 0;\r\n\r\n    this.width = opts.width || 1200;\r\n    this.height = opts.height || 900;\r\n    this.mesh_width = opts.meshWidth || 48;\r\n    this.mesh_height = opts.meshHeight || 36;\r\n    this.pixelRatio = opts.pixelRatio || window.devicePixelRatio || 1;\r\n    this.textureRatio = opts.textureRatio || 1;\r\n    this.outputFXAA = opts.outputFXAA || false;\r\n    this.texsizeX = this.width * this.pixelRatio * this.textureRatio;\r\n    this.texsizeY = this.height * this.pixelRatio * this.textureRatio;\r\n    this.aspectx =\r\n      this.texsizeY > this.texsizeX ? this.texsizeX / this.texsizeY : 1;\r\n    this.aspecty =\r\n      this.texsizeX > this.texsizeY ? this.texsizeY / this.texsizeX : 1;\r\n    this.invAspectx = 1.0 / this.aspectx;\r\n    this.invAspecty = 1.0 / this.aspecty;\r\n\r\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\r\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\r\n    this.regs = Utils.range(0, 100).map((x) => {\r\n      if (x < 10) {\r\n        return `reg0${x}`;\r\n      }\r\n      return `reg${x}`;\r\n    });\r\n\r\n    this.blurRatios = [\r\n      [0.5, 0.25],\r\n      [0.125, 0.125],\r\n      [0.0625, 0.0625],\r\n    ];\r\n\r\n    this.audioLevels = new AudioLevels(this.audio);\r\n\r\n    this.prevFrameBuffer = this.gl.createFramebuffer();\r\n    this.targetFrameBuffer = this.gl.createFramebuffer();\r\n    this.prevTexture = this.gl.createTexture();\r\n    this.targetTexture = this.gl.createTexture();\r\n\r\n    this.compFrameBuffer = this.gl.createFramebuffer();\r\n    this.compTexture = this.gl.createTexture();\r\n\r\n    this.anisoExt =\r\n      this.gl.getExtension(\"EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") ||\r\n      this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n\r\n    this.bindFrameBufferTexture(this.prevFrameBuffer, this.prevTexture);\r\n    this.bindFrameBufferTexture(this.targetFrameBuffer, this.targetTexture);\r\n    this.bindFrameBufferTexture(this.compFrameBuffer, this.compTexture);\r\n\r\n    const params = {\r\n      pixelRatio: this.pixelRatio,\r\n      textureRatio: this.textureRatio,\r\n      texsizeX: this.texsizeX,\r\n      texsizeY: this.texsizeY,\r\n      mesh_width: this.mesh_width,\r\n      mesh_height: this.mesh_height,\r\n      aspectx: this.aspectx,\r\n      aspecty: this.aspecty,\r\n    };\r\n    this.noise = new Noise(gl);\r\n    this.image = new ImageTextures(gl);\r\n    this.warpShader = new WarpShader(gl, this.noise, this.image, params);\r\n    this.compShader = new CompShader(gl, this.noise, this.image, params);\r\n    this.outputShader = new OutputShader(gl, params);\r\n    this.prevWarpShader = new WarpShader(gl, this.noise, this.image, params);\r\n    this.prevCompShader = new CompShader(gl, this.noise, this.image, params);\r\n    this.numBlurPasses = 0;\r\n    this.blurShader1 = new BlurShader(0, this.blurRatios, gl, params);\r\n    this.blurShader2 = new BlurShader(1, this.blurRatios, gl, params);\r\n    this.blurShader3 = new BlurShader(2, this.blurRatios, gl, params);\r\n    this.blurTexture1 = this.blurShader1.blurVerticalTexture;\r\n    this.blurTexture2 = this.blurShader2.blurVerticalTexture;\r\n    this.blurTexture3 = this.blurShader3.blurVerticalTexture;\r\n    this.basicWaveform = new BasicWaveform(gl, params);\r\n    this.customWaveforms = Utils.range(4).map(\r\n      (i) => new CustomWaveform(i, gl, params)\r\n    );\r\n    this.customShapes = Utils.range(4).map(\r\n      (i) => new CustomShape(i, gl, params)\r\n    );\r\n    this.prevCustomWaveforms = Utils.range(4).map(\r\n      (i) => new CustomWaveform(i, gl, params)\r\n    );\r\n    this.prevCustomShapes = Utils.range(4).map(\r\n      (i) => new CustomShape(i, gl, params)\r\n    );\r\n    this.darkenCenter = new DarkenCenter(gl, params);\r\n    this.innerBorder = new Border(gl, params);\r\n    this.outerBorder = new Border(gl, params);\r\n    this.motionVectors = new MotionVectors(gl, params);\r\n    this.titleText = new TitleText(gl, params);\r\n    this.blendPattern = new BlendPattern(params);\r\n    this.resampleShader = new ResampleShader(gl);\r\n\r\n    this.warpUVs = new Float32Array(\r\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 2\r\n    );\r\n    this.warpColor = new Float32Array(\r\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 4\r\n    );\r\n\r\n    this.gl.clearColor(0, 0, 0, 1);\r\n\r\n    this.blankPreset = blankPreset;\r\n\r\n    const globalVars = {\r\n      frame: 0,\r\n      time: 0,\r\n      fps: 45,\r\n      bass: 1,\r\n      bass_att: 1,\r\n      mid: 1,\r\n      mid_att: 1,\r\n      treb: 1,\r\n      treb_att: 1,\r\n    };\r\n\r\n    this.preset = blankPreset;\r\n    this.prevPreset = this.preset;\r\n    this.presetEquationRunner = new PresetEquationRunner(\r\n      this.preset,\r\n      globalVars,\r\n      params\r\n    );\r\n    this.prevPresetEquationRunner = new PresetEquationRunner(\r\n      this.prevPreset,\r\n      globalVars,\r\n      params\r\n    );\r\n\r\n    if (!this.preset.useWASM) {\r\n      this.regVars = this.presetEquationRunner.mdVSRegs;\r\n    }\r\n  }\r\n\r\n  static getHighestBlur(t) {\r\n    if (/sampler_blur3/.test(t)) {\r\n      return 3;\r\n    } else if (/sampler_blur2/.test(t)) {\r\n      return 2;\r\n    } else if (/sampler_blur1/.test(t)) {\r\n      return 1;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  loadPreset(preset, blendTime) {\r\n    this.blendPattern.createBlendPattern();\r\n    this.blending = true;\r\n    this.blendStartTime = this.time;\r\n    this.blendDuration = blendTime;\r\n    this.blendProgress = 0;\r\n\r\n    this.prevPresetEquationRunner = this.presetEquationRunner;\r\n\r\n    this.prevPreset = this.preset;\r\n    this.preset = preset;\r\n\r\n    this.presetTime = this.time;\r\n\r\n    const globalVars = {\r\n      frame: this.frameNum,\r\n      time: this.time,\r\n      fps: this.fps,\r\n      bass: this.audioLevels.bass,\r\n      bass_att: this.audioLevels.bass_att,\r\n      mid: this.audioLevels.mid,\r\n      mid_att: this.audioLevels.mid_att,\r\n      treb: this.audioLevels.treb,\r\n      treb_att: this.audioLevels.treb_att,\r\n    };\r\n    const params = {\r\n      pixelRatio: this.pixelRatio,\r\n      textureRatio: this.textureRatio,\r\n      texsizeX: this.texsizeX,\r\n      texsizeY: this.texsizeY,\r\n      mesh_width: this.mesh_width,\r\n      mesh_height: this.mesh_height,\r\n      aspectx: this.aspectx,\r\n      aspecty: this.aspecty,\r\n    };\r\n\r\n    if (preset.useWASM) {\r\n      this.preset.globalPools.perFrame.old_wave_mode.value = this.prevPreset.baseVals.wave_mode;\r\n      this.preset.baseVals.old_wave_mode = this.prevPreset.baseVals.wave_mode;\r\n      this.presetEquationRunner = new PresetEquationRunnerWASM(\r\n        this.preset,\r\n        globalVars,\r\n        params\r\n      );\r\n      if (this.preset.pixel_eqs_initialize_array) {\r\n        this.preset.pixel_eqs_initialize_array(\r\n          this.mesh_width,\r\n          this.mesh_height\r\n        );\r\n      }\r\n    } else {\r\n      this.preset.baseVals.old_wave_mode = this.prevPreset.baseVals.wave_mode;\r\n      this.presetEquationRunner = new PresetEquationRunner(\r\n        this.preset,\r\n        globalVars,\r\n        params\r\n      );\r\n      this.regVars = this.presetEquationRunner.mdVSRegs;\r\n    }\r\n\r\n    const tmpWarpShader = this.prevWarpShader;\r\n    this.prevWarpShader = this.warpShader;\r\n    this.warpShader = tmpWarpShader;\r\n\r\n    const tmpCompShader = this.prevCompShader;\r\n    this.prevCompShader = this.compShader;\r\n    this.compShader = tmpCompShader;\r\n\r\n    const warpText = this.preset.warp.trim();\r\n    const compText = this.preset.comp.trim();\r\n\r\n    this.warpShader.updateShader(warpText);\r\n    this.compShader.updateShader(compText);\r\n\r\n    if (warpText.length === 0) {\r\n      this.numBlurPasses = 0;\r\n    } else {\r\n      this.numBlurPasses = Renderer.getHighestBlur(warpText);\r\n    }\r\n\r\n    if (compText.length !== 0) {\r\n      this.numBlurPasses = Math.max(\r\n        this.numBlurPasses,\r\n        Renderer.getHighestBlur(compText)\r\n      );\r\n    }\r\n  }\r\n\r\n  loadExtraImages(imageData) {\r\n    this.image.loadExtraImages(imageData);\r\n  }\r\n\r\n  setRendererSize(width, height, opts) {\r\n    const oldTexsizeX = this.texsizeX;\r\n    const oldTexsizeY = this.texsizeY;\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n    this.mesh_width = opts.meshWidth || this.mesh_width;\r\n    this.mesh_height = opts.meshHeight || this.mesh_height;\r\n    this.pixelRatio = opts.pixelRatio || this.pixelRatio;\r\n    this.textureRatio = opts.textureRatio || this.textureRatio;\r\n    this.texsizeX = width * this.pixelRatio * this.textureRatio;\r\n    this.texsizeY = height * this.pixelRatio * this.textureRatio;\r\n    this.aspectx =\r\n      this.texsizeY > this.texsizeX ? this.texsizeX / this.texsizeY : 1;\r\n    this.aspecty =\r\n      this.texsizeX > this.texsizeY ? this.texsizeY / this.texsizeX : 1;\r\n\r\n    if (this.texsizeX !== oldTexsizeX || this.texsizeY !== oldTexsizeY) {\r\n      // copy target texture, because we flip prev/target at start of render\r\n      const targetTextureNew = this.gl.createTexture();\r\n      this.bindFrameBufferTexture(this.targetFrameBuffer, targetTextureNew);\r\n      this.bindFrambufferAndSetViewport(\r\n        this.targetFrameBuffer,\r\n        this.texsizeX,\r\n        this.texsizeY\r\n      );\r\n\r\n      this.resampleShader.renderQuadTexture(this.targetTexture);\r\n\r\n      this.targetTexture = targetTextureNew;\r\n\r\n      this.bindFrameBufferTexture(this.prevFrameBuffer, this.prevTexture);\r\n      this.bindFrameBufferTexture(this.compFrameBuffer, this.compTexture);\r\n    }\r\n\r\n    this.updateGlobals();\r\n\r\n    // rerender current frame at new size\r\n    if (this.frameNum > 0) {\r\n      this.renderToScreen();\r\n    }\r\n  }\r\n\r\n  setInternalMeshSize(width, height) {\r\n    this.mesh_width = width;\r\n    this.mesh_height = height;\r\n\r\n    this.updateGlobals();\r\n  }\r\n\r\n  setOutputAA(useAA) {\r\n    this.outputFXAA = useAA;\r\n  }\r\n\r\n  updateGlobals() {\r\n    const params = {\r\n      pixelRatio: this.pixelRatio,\r\n      textureRatio: this.textureRatio,\r\n      texsizeX: this.texsizeX,\r\n      texsizeY: this.texsizeY,\r\n      mesh_width: this.mesh_width,\r\n      mesh_height: this.mesh_height,\r\n      aspectx: this.aspectx,\r\n      aspecty: this.aspecty,\r\n    };\r\n    this.presetEquationRunner.updateGlobals(params);\r\n    this.prevPresetEquationRunner.updateGlobals(params);\r\n    this.warpShader.updateGlobals(params);\r\n    this.prevWarpShader.updateGlobals(params);\r\n    this.compShader.updateGlobals(params);\r\n    this.prevCompShader.updateGlobals(params);\r\n    this.outputShader.updateGlobals(params);\r\n    this.blurShader1.updateGlobals(params);\r\n    this.blurShader2.updateGlobals(params);\r\n    this.blurShader3.updateGlobals(params);\r\n    this.basicWaveform.updateGlobals(params);\r\n    this.customWaveforms.forEach((wave) => wave.updateGlobals(params));\r\n    this.customShapes.forEach((shape) => shape.updateGlobals(params));\r\n    this.prevCustomWaveforms.forEach((wave) => wave.updateGlobals(params));\r\n    this.prevCustomShapes.forEach((shape) => shape.updateGlobals(params));\r\n    this.darkenCenter.updateGlobals(params);\r\n    this.innerBorder.updateGlobals(params);\r\n    this.outerBorder.updateGlobals(params);\r\n    this.motionVectors.updateGlobals(params);\r\n    this.titleText.updateGlobals(params);\r\n    this.blendPattern.updateGlobals(params);\r\n\r\n    this.warpUVs = new Float32Array(\r\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 2\r\n    );\r\n    this.warpColor = new Float32Array(\r\n      (this.mesh_width + 1) * (this.mesh_height + 1) * 4\r\n    );\r\n\r\n    if (this.preset.pixel_eqs_initialize_array) {\r\n      this.preset.pixel_eqs_initialize_array(this.mesh_width, this.mesh_height);\r\n    }\r\n  }\r\n\r\n  calcTimeAndFPS(elapsedTime) {\r\n    let elapsed;\r\n    if (elapsedTime) {\r\n      elapsed = elapsedTime;\r\n    } else {\r\n      const newTime = performance.now();\r\n      elapsed = (newTime - this.lastTime) / 1000.0;\r\n      if (elapsed > 1.0 || elapsed < 0.0 || this.frame < 2) {\r\n        elapsed = 1.0 / 30.0;\r\n      }\r\n      this.lastTime = newTime;\r\n    }\r\n\r\n    this.time += 1.0 / this.fps;\r\n\r\n    if (this.blending) {\r\n      this.blendProgress =\r\n        (this.time - this.blendStartTime) / this.blendDuration;\r\n      if (this.blendProgress > 1.0) {\r\n        this.blending = false;\r\n      }\r\n    }\r\n\r\n    const newHistTime = this.timeHist[this.timeHist.length - 1] + elapsed;\r\n    this.timeHist.push(newHistTime);\r\n    if (this.timeHist.length > this.timeHistMax) {\r\n      this.timeHist.shift();\r\n    }\r\n\r\n    const newFPS = this.timeHist.length / (newHistTime - this.timeHist[0]);\r\n    if (Math.abs(newFPS - this.fps) > 3.0 && this.frame > this.timeHistMax) {\r\n      this.fps = newFPS;\r\n    } else {\r\n      const damping = 0.93;\r\n      this.fps = damping * this.fps + (1.0 - damping) * newFPS;\r\n    }\r\n  }\r\n\r\n  runPixelEquations(presetEquationRunner, mdVSFrame, globalVars, blending) {\r\n    const gridX = this.mesh_width;\r\n    const gridZ = this.mesh_height;\r\n\r\n    const gridX1 = gridX + 1;\r\n    const gridZ1 = gridZ + 1;\r\n\r\n    const warpTimeV = this.time * mdVSFrame.warpanimspeed;\r\n    const warpScaleInv = 1.0 / mdVSFrame.warpscale;\r\n\r\n    const warpf0 = 11.68 + 4.0 * Math.cos(warpTimeV * 1.413 + 10);\r\n    const warpf1 = 8.77 + 3.0 * Math.cos(warpTimeV * 1.113 + 7);\r\n    const warpf2 = 10.54 + 3.0 * Math.cos(warpTimeV * 1.233 + 3);\r\n    const warpf3 = 11.49 + 4.0 * Math.cos(warpTimeV * 0.933 + 5);\r\n\r\n    const texelOffsetX = 0.0 / this.texsizeX;\r\n    const texelOffsetY = 0.0 / this.texsizeY;\r\n\r\n    const aspectx = this.aspectx;\r\n    const aspecty = this.aspecty;\r\n\r\n    let offset = 0;\r\n    let offsetColor = 0;\r\n    if (!presetEquationRunner.preset.useWASM) {\r\n      let mdVSVertex = Utils.cloneVars(mdVSFrame);\r\n\r\n      let warp = mdVSVertex.warp;\r\n      let zoom = mdVSVertex.zoom;\r\n      let zoomExp = mdVSVertex.zoomexp;\r\n      let cx = mdVSVertex.cx;\r\n      let cy = mdVSVertex.cy;\r\n      let sx = mdVSVertex.sx;\r\n      let sy = mdVSVertex.sy;\r\n      let dx = mdVSVertex.dx;\r\n      let dy = mdVSVertex.dy;\r\n      let rot = mdVSVertex.rot;\r\n\r\n      for (let iz = 0; iz < gridZ1; iz++) {\r\n        for (let ix = 0; ix < gridX1; ix++) {\r\n          const x = (ix / gridX) * 2.0 - 1.0;\r\n          const y = (iz / gridZ) * 2.0 - 1.0;\r\n          const rad = Math.sqrt(\r\n            x * x * aspectx * aspectx + y * y * aspecty * aspecty\r\n          );\r\n\r\n          if (presetEquationRunner.runVertEQs) {\r\n            let ang;\r\n            if (iz === gridZ / 2 && ix === gridX / 2) {\r\n              ang = 0;\r\n            } else {\r\n              ang = Utils.atan2(y * aspecty, x * aspectx);\r\n            }\r\n\r\n            mdVSVertex.x = x * 0.5 * aspectx + 0.5;\r\n            mdVSVertex.y = y * -0.5 * aspecty + 0.5;\r\n            mdVSVertex.rad = rad;\r\n            mdVSVertex.ang = ang;\r\n\r\n            mdVSVertex.zoom = mdVSFrame.zoom;\r\n            mdVSVertex.zoomexp = mdVSFrame.zoomexp;\r\n            mdVSVertex.rot = mdVSFrame.rot;\r\n            mdVSVertex.warp = mdVSFrame.warp;\r\n            mdVSVertex.cx = mdVSFrame.cx;\r\n            mdVSVertex.cy = mdVSFrame.cy;\r\n            mdVSVertex.dx = mdVSFrame.dx;\r\n            mdVSVertex.dy = mdVSFrame.dy;\r\n            mdVSVertex.sx = mdVSFrame.sx;\r\n            mdVSVertex.sy = mdVSFrame.sy;\r\n\r\n            mdVSVertex = presetEquationRunner.runPixelEquations(mdVSVertex);\r\n\r\n            warp = mdVSVertex.warp;\r\n            zoom = mdVSVertex.zoom;\r\n            zoomExp = mdVSVertex.zoomexp;\r\n            cx = mdVSVertex.cx;\r\n            cy = mdVSVertex.cy;\r\n            sx = mdVSVertex.sx;\r\n            sy = mdVSVertex.sy;\r\n            dx = mdVSVertex.dx;\r\n            dy = mdVSVertex.dy;\r\n            rot = mdVSVertex.rot;\r\n          }\r\n\r\n          const zoom2V = zoom ** (zoomExp ** (rad * 2.0 - 1.0));\r\n          const zoom2Inv = 1.0 / zoom2V;\r\n\r\n          let u = x * 0.5 * aspectx * zoom2Inv + 0.5;\r\n          let v = -y * 0.5 * aspecty * zoom2Inv + 0.5;\r\n\r\n          u = (u - cx) / sx + cx;\r\n          v = (v - cy) / sy + cy;\r\n\r\n          if (warp !== 0) {\r\n            u +=\r\n              warp *\r\n              0.0035 *\r\n              Math.sin(\r\n                warpTimeV * 0.333 + warpScaleInv * (x * warpf0 - y * warpf3)\r\n              );\r\n            v +=\r\n              warp *\r\n              0.0035 *\r\n              Math.cos(\r\n                warpTimeV * 0.375 - warpScaleInv * (x * warpf2 + y * warpf1)\r\n              );\r\n            u +=\r\n              warp *\r\n              0.0035 *\r\n              Math.cos(\r\n                warpTimeV * 0.753 - warpScaleInv * (x * warpf1 - y * warpf2)\r\n              );\r\n            v +=\r\n              warp *\r\n              0.0035 *\r\n              Math.sin(\r\n                warpTimeV * 0.825 + warpScaleInv * (x * warpf0 + y * warpf3)\r\n              );\r\n          }\r\n\r\n          const u2 = u - cx;\r\n          const v2 = v - cy;\r\n\r\n          const cosRot = Math.cos(rot);\r\n          const sinRot = Math.sin(rot);\r\n          u = u2 * cosRot - v2 * sinRot + cx;\r\n          v = u2 * sinRot + v2 * cosRot + cy;\r\n\r\n          u -= dx;\r\n          v -= dy;\r\n\r\n          u = (u - 0.5) / aspectx + 0.5;\r\n          v = (v - 0.5) / aspecty + 0.5;\r\n\r\n          u += texelOffsetX;\r\n          v += texelOffsetY;\r\n\r\n          if (!blending) {\r\n            this.warpUVs[offset] = u;\r\n            this.warpUVs[offset + 1] = v;\r\n\r\n            this.warpColor[offsetColor + 0] = 1;\r\n            this.warpColor[offsetColor + 1] = 1;\r\n            this.warpColor[offsetColor + 2] = 1;\r\n            this.warpColor[offsetColor + 3] = 1;\r\n          } else {\r\n            let mix2 =\r\n              this.blendPattern.vertInfoA[offset / 2] * this.blendProgress +\r\n              this.blendPattern.vertInfoC[offset / 2];\r\n            mix2 = Math.clamp(mix2, 0, 1);\r\n\r\n            this.warpUVs[offset] = this.warpUVs[offset] * mix2 + u * (1 - mix2);\r\n            this.warpUVs[offset + 1] =\r\n              this.warpUVs[offset + 1] * mix2 + v * (1 - mix2);\r\n\r\n            this.warpColor[offsetColor + 0] = 1;\r\n            this.warpColor[offsetColor + 1] = 1;\r\n            this.warpColor[offsetColor + 2] = 1;\r\n            this.warpColor[offsetColor + 3] = mix2;\r\n          }\r\n\r\n          offset += 2;\r\n          offsetColor += 4;\r\n        }\r\n      }\r\n\r\n      this.mdVSVertex = mdVSVertex;\r\n    } else {\r\n      const varPool = presetEquationRunner.preset.globalPools.perVertex;\r\n\r\n      Utils.setWasm(varPool, globalVars, presetEquationRunner.globalKeys);\r\n      Utils.setWasm(\r\n        varPool,\r\n        presetEquationRunner.mdVSQAfterFrame,\r\n        presetEquationRunner.qs\r\n      );\r\n\r\n      varPool.zoom.value = mdVSFrame.zoom;\r\n      varPool.zoomexp.value = mdVSFrame.zoomexp;\r\n      varPool.rot.value = mdVSFrame.rot;\r\n      varPool.warp.value = mdVSFrame.warp;\r\n      varPool.cx.value = mdVSFrame.cx;\r\n      varPool.cy.value = mdVSFrame.cy;\r\n      varPool.dx.value = mdVSFrame.dx;\r\n      varPool.dy.value = mdVSFrame.dy;\r\n      varPool.sx.value = mdVSFrame.sx;\r\n      varPool.sy.value = mdVSFrame.sy;\r\n\r\n      presetEquationRunner.preset.pixel_eqs_wasm(\r\n        presetEquationRunner.runVertEQs,\r\n        this.mesh_width,\r\n        this.mesh_height,\r\n        this.time,\r\n        mdVSFrame.warpanimspeed,\r\n        mdVSFrame.warpscale,\r\n        this.aspectx,\r\n        this.aspecty\r\n      );\r\n\r\n      if (!blending) {\r\n        this.warpUVs = presetEquationRunner.preset.pixel_eqs_get_array();\r\n        this.warpColor.fill(1);\r\n      } else {\r\n        const newWarpUVs = presetEquationRunner.preset.pixel_eqs_get_array();\r\n\r\n        let offset = 0;\r\n        let offsetColor = 0;\r\n        for (let iz = 0; iz < gridZ1; iz++) {\r\n          for (let ix = 0; ix < gridX1; ix++) {\r\n            const u = newWarpUVs[offset];\r\n            const v = newWarpUVs[offset + 1];\r\n\r\n            let mix2 =\r\n              this.blendPattern.vertInfoA[offset / 2] * this.blendProgress +\r\n              this.blendPattern.vertInfoC[offset / 2];\r\n            mix2 = Math.clamp(mix2, 0, 1);\r\n\r\n            this.warpUVs[offset] = this.warpUVs[offset] * mix2 + u * (1 - mix2);\r\n            this.warpUVs[offset + 1] =\r\n              this.warpUVs[offset + 1] * mix2 + v * (1 - mix2);\r\n\r\n            this.warpColor[offsetColor + 0] = 1;\r\n            this.warpColor[offsetColor + 1] = 1;\r\n            this.warpColor[offsetColor + 2] = 1;\r\n            this.warpColor[offsetColor + 3] = mix2;\r\n\r\n            offset += 2;\r\n            offsetColor += 4;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static mixFrameEquations(blendProgress, mdVSFrame, mdVSFramePrev) {\r\n    const mix = 0.5 - 0.5 * Math.cos(blendProgress * Math.PI);\r\n    const mix2 = 1 - mix;\r\n    const snapPoint = 0.5;\r\n\r\n    const mixedFrame = Utils.cloneVars(mdVSFrame);\r\n\r\n    mixedFrame.decay = mix * mdVSFrame.decay + mix2 * mdVSFramePrev.decay;\r\n    mixedFrame.wave_a = mix * mdVSFrame.wave_a + mix2 * mdVSFramePrev.wave_a;\r\n    mixedFrame.wave_r = mix * mdVSFrame.wave_r + mix2 * mdVSFramePrev.wave_r;\r\n    mixedFrame.wave_g = mix * mdVSFrame.wave_g + mix2 * mdVSFramePrev.wave_g;\r\n    mixedFrame.wave_b = mix * mdVSFrame.wave_b + mix2 * mdVSFramePrev.wave_b;\r\n    mixedFrame.wave_x = mix * mdVSFrame.wave_x + mix2 * mdVSFramePrev.wave_x;\r\n    mixedFrame.wave_y = mix * mdVSFrame.wave_y + mix2 * mdVSFramePrev.wave_y;\r\n    mixedFrame.wave_mystery =\r\n      mix * mdVSFrame.wave_mystery + mix2 * mdVSFramePrev.wave_mystery;\r\n    mixedFrame.ob_size = mix * mdVSFrame.ob_size + mix2 * mdVSFramePrev.ob_size;\r\n    mixedFrame.ob_r = mix * mdVSFrame.ob_r + mix2 * mdVSFramePrev.ob_r;\r\n    mixedFrame.ob_g = mix * mdVSFrame.ob_g + mix2 * mdVSFramePrev.ob_g;\r\n    mixedFrame.ob_b = mix * mdVSFrame.ob_b + mix2 * mdVSFramePrev.ob_b;\r\n    mixedFrame.ob_a = mix * mdVSFrame.ob_a + mix2 * mdVSFramePrev.ob_a;\r\n    mixedFrame.ib_size = mix * mdVSFrame.ib_size + mix2 * mdVSFramePrev.ib_size;\r\n    mixedFrame.ib_r = mix * mdVSFrame.ib_r + mix2 * mdVSFramePrev.ib_r;\r\n    mixedFrame.ib_g = mix * mdVSFrame.ib_g + mix2 * mdVSFramePrev.ib_g;\r\n    mixedFrame.ib_b = mix * mdVSFrame.ib_b + mix2 * mdVSFramePrev.ib_b;\r\n    mixedFrame.ib_a = mix * mdVSFrame.ib_a + mix2 * mdVSFramePrev.ib_a;\r\n    mixedFrame.mv_x = mix * mdVSFrame.mv_x + mix2 * mdVSFramePrev.mv_x;\r\n    mixedFrame.mv_y = mix * mdVSFrame.mv_y + mix2 * mdVSFramePrev.mv_y;\r\n    mixedFrame.mv_dx = mix * mdVSFrame.mv_dx + mix2 * mdVSFramePrev.mv_dx;\r\n    mixedFrame.mv_dy = mix * mdVSFrame.mv_dy + mix2 * mdVSFramePrev.mv_dy;\r\n    mixedFrame.mv_l = mix * mdVSFrame.mv_l + mix2 * mdVSFramePrev.mv_l;\r\n    mixedFrame.mv_r = mix * mdVSFrame.mv_r + mix2 * mdVSFramePrev.mv_r;\r\n    mixedFrame.mv_g = mix * mdVSFrame.mv_g + mix2 * mdVSFramePrev.mv_g;\r\n    mixedFrame.mv_b = mix * mdVSFrame.mv_b + mix2 * mdVSFramePrev.mv_b;\r\n    mixedFrame.mv_a = mix * mdVSFrame.mv_a + mix2 * mdVSFramePrev.mv_a;\r\n    mixedFrame.echo_zoom =\r\n      mix * mdVSFrame.echo_zoom + mix2 * mdVSFramePrev.echo_zoom;\r\n    mixedFrame.echo_alpha =\r\n      mix * mdVSFrame.echo_alpha + mix2 * mdVSFramePrev.echo_alpha;\r\n    mixedFrame.echo_orient =\r\n      mix * mdVSFrame.echo_orient + mix2 * mdVSFramePrev.echo_orient;\r\n    mixedFrame.wave_dots =\r\n      mix < snapPoint ? mdVSFramePrev.wave_dots : mdVSFrame.wave_dots;\r\n    mixedFrame.wave_thick =\r\n      mix < snapPoint ? mdVSFramePrev.wave_thick : mdVSFrame.wave_thick;\r\n    mixedFrame.additivewave =\r\n      mix < snapPoint ? mdVSFramePrev.additivewave : mdVSFrame.additivewave;\r\n    mixedFrame.wave_brighten =\r\n      mix < snapPoint ? mdVSFramePrev.wave_brighten : mdVSFrame.wave_brighten;\r\n    mixedFrame.darken_center =\r\n      mix < snapPoint ? mdVSFramePrev.darken_center : mdVSFrame.darken_center;\r\n    mixedFrame.gammaadj =\r\n      mix < snapPoint ? mdVSFramePrev.gammaadj : mdVSFrame.gammaadj;\r\n    mixedFrame.wrap = mix < snapPoint ? mdVSFramePrev.wrap : mdVSFrame.wrap;\r\n    mixedFrame.invert =\r\n      mix < snapPoint ? mdVSFramePrev.invert : mdVSFrame.invert;\r\n    mixedFrame.brighten =\r\n      mix < snapPoint ? mdVSFramePrev.brighten : mdVSFrame.brighten;\r\n    mixedFrame.darken =\r\n      mix < snapPoint ? mdVSFramePrev.darken : mdVSFrame.darken;\r\n    mixedFrame.solarize =\r\n      mix < snapPoint ? mdVSFramePrev.brighten : mdVSFrame.solarize;\r\n    mixedFrame.b1n = mix * mdVSFrame.b1n + mix2 * mdVSFramePrev.b1n;\r\n    mixedFrame.b2n = mix * mdVSFrame.b2n + mix2 * mdVSFramePrev.b2n;\r\n    mixedFrame.b3n = mix * mdVSFrame.b3n + mix2 * mdVSFramePrev.b3n;\r\n    mixedFrame.b1x = mix * mdVSFrame.b1x + mix2 * mdVSFramePrev.b1x;\r\n    mixedFrame.b2x = mix * mdVSFrame.b2x + mix2 * mdVSFramePrev.b2x;\r\n    mixedFrame.b3x = mix * mdVSFrame.b3x + mix2 * mdVSFramePrev.b3x;\r\n    mixedFrame.b1ed = mix * mdVSFrame.b1ed + mix2 * mdVSFramePrev.b1ed;\r\n\r\n    return mixedFrame;\r\n  }\r\n\r\n  static getBlurValues(mdVSFrame) {\r\n    let blurMin1 = mdVSFrame.b1n;\r\n    let blurMin2 = mdVSFrame.b2n;\r\n    let blurMin3 = mdVSFrame.b3n;\r\n    let blurMax1 = mdVSFrame.b1x;\r\n    let blurMax2 = mdVSFrame.b2x;\r\n    let blurMax3 = mdVSFrame.b3x;\r\n\r\n    const fMinDist = 0.1;\r\n    if (blurMax1 - blurMin1 < fMinDist) {\r\n      const avg = (blurMin1 + blurMax1) * 0.5;\r\n      blurMin1 = avg - fMinDist * 0.5;\r\n      blurMax1 = avg - fMinDist * 0.5;\r\n    }\r\n    blurMax2 = Math.min(blurMax1, blurMax2);\r\n    blurMin2 = Math.max(blurMin1, blurMin2);\r\n    if (blurMax2 - blurMin2 < fMinDist) {\r\n      const avg = (blurMin2 + blurMax2) * 0.5;\r\n      blurMin2 = avg - fMinDist * 0.5;\r\n      blurMax2 = avg - fMinDist * 0.5;\r\n    }\r\n    blurMax3 = Math.min(blurMax2, blurMax3);\r\n    blurMin3 = Math.max(blurMin2, blurMin3);\r\n    if (blurMax3 - blurMin3 < fMinDist) {\r\n      const avg = (blurMin3 + blurMax3) * 0.5;\r\n      blurMin3 = avg - fMinDist * 0.5;\r\n      blurMax3 = avg - fMinDist * 0.5;\r\n    }\r\n\r\n    return {\r\n      blurMins: [blurMin1, blurMin2, blurMin3],\r\n      blurMaxs: [blurMax1, blurMax2, blurMax3],\r\n    };\r\n  }\r\n\r\n  bindFrambufferAndSetViewport(fb, width, height) {\r\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, fb);\r\n    this.gl.viewport(0, 0, width, height);\r\n  }\r\n\r\n  bindFrameBufferTexture(targetFrameBuffer, targetTexture) {\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, targetTexture);\r\n\r\n    this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.texsizeX,\r\n      this.texsizeY,\r\n      0,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      new Uint8Array(this.texsizeX * this.texsizeY * 4)\r\n    );\r\n\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_S,\r\n      this.gl.CLAMP_TO_EDGE\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_WRAP_T,\r\n      this.gl.CLAMP_TO_EDGE\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MIN_FILTER,\r\n      this.gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n    this.gl.texParameteri(\r\n      this.gl.TEXTURE_2D,\r\n      this.gl.TEXTURE_MAG_FILTER,\r\n      this.gl.LINEAR\r\n    );\r\n    if (this.anisoExt) {\r\n      const max = this.gl.getParameter(\r\n        this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT\r\n      );\r\n      this.gl.texParameterf(\r\n        this.gl.TEXTURE_2D,\r\n        this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,\r\n        max\r\n      );\r\n    }\r\n\r\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, targetFrameBuffer);\r\n    this.gl.framebufferTexture2D(\r\n      this.gl.FRAMEBUFFER,\r\n      this.gl.COLOR_ATTACHMENT0,\r\n      this.gl.TEXTURE_2D,\r\n      targetTexture,\r\n      0\r\n    );\r\n  }\r\n\r\n  render({audioLevels, elapsedTime} = {}) {\r\n    this.calcTimeAndFPS(elapsedTime);\r\n    this.frameNum += 1;\r\n\r\n    if (audioLevels) {\r\n      this.audio.updateAudio(\r\n        audioLevels.timeByteArray,\r\n        audioLevels.timeByteArrayL,\r\n        audioLevels.timeByteArrayR\r\n      );\r\n    } else {\r\n      this.audio.sampleAudio();\r\n    }\r\n    this.audioLevels.updateAudioLevels(this.fps, this.frameNum);\r\n\r\n    const globalVars = {\r\n      frame: this.frameNum,\r\n      time: this.time,\r\n      fps: this.fps,\r\n      bass: this.audioLevels.bass,\r\n      bass_att: this.audioLevels.bass_att,\r\n      mid: this.audioLevels.mid,\r\n      mid_att: this.audioLevels.mid_att,\r\n      treb: this.audioLevels.treb,\r\n      treb_att: this.audioLevels.treb_att,\r\n      meshx: this.mesh_width,\r\n      meshy: this.mesh_height,\r\n      aspectx: this.invAspectx,\r\n      aspecty: this.invAspecty,\r\n      pixelsx: this.texsizeX,\r\n      pixelsy: this.texsizeY,\r\n    };\r\n\r\n    const prevGlobalVars = Object.assign({}, globalVars);\r\n    if (!this.prevPreset.useWASM) {\r\n      prevGlobalVars.gmegabuf = this.prevPresetEquationRunner.gmegabuf;\r\n    }\r\n\r\n    if (!this.preset.useWASM) {\r\n      globalVars.gmegabuf = this.presetEquationRunner.gmegabuf;\r\n      Object.assign(globalVars, this.regVars);\r\n    }\r\n\r\n    const mdVSFrame = this.presetEquationRunner.runFrameEquations(globalVars);\r\n\r\n    this.runPixelEquations(\r\n      this.presetEquationRunner,\r\n      mdVSFrame,\r\n      globalVars,\r\n      false\r\n    );\r\n\r\n    if (!this.preset.useWASM) {\r\n      Object.assign(this.regVars, Utils.pick(this.mdVSVertex, this.regs));\r\n      Object.assign(globalVars, this.regVars);\r\n    }\r\n\r\n    let mdVSFrameMixed;\r\n    if (this.blending) {\r\n      this.prevMDVSFrame = this.prevPresetEquationRunner.runFrameEquations(\r\n        prevGlobalVars\r\n      );\r\n      this.runPixelEquations(\r\n        this.prevPresetEquationRunner,\r\n        this.prevMDVSFrame,\r\n        prevGlobalVars,\r\n        true\r\n      );\r\n\r\n      mdVSFrameMixed = Renderer.mixFrameEquations(\r\n        this.blendProgress,\r\n        mdVSFrame,\r\n        this.prevMDVSFrame\r\n      );\r\n    } else {\r\n      mdVSFrameMixed = mdVSFrame;\r\n    }\r\n\r\n    const swapTexture = this.targetTexture;\r\n    this.targetTexture = this.prevTexture;\r\n    this.prevTexture = swapTexture;\r\n\r\n    const swapFrameBuffer = this.targetFrameBuffer;\r\n    this.targetFrameBuffer = this.prevFrameBuffer;\r\n    this.prevFrameBuffer = swapFrameBuffer;\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.prevTexture);\r\n    this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n    this.bindFrambufferAndSetViewport(\r\n      this.targetFrameBuffer,\r\n      this.texsizeX,\r\n      this.texsizeY\r\n    );\r\n\r\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n    this.gl.enable(this.gl.BLEND);\r\n    this.gl.blendEquation(this.gl.FUNC_ADD);\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    const {blurMins, blurMaxs} = Renderer.getBlurValues(mdVSFrameMixed);\r\n\r\n    if (!this.blending) {\r\n      this.warpShader.renderQuadTexture(\r\n        false,\r\n        this.prevTexture,\r\n        this.blurTexture1,\r\n        this.blurTexture2,\r\n        this.blurTexture3,\r\n        blurMins,\r\n        blurMaxs,\r\n        mdVSFrame,\r\n        this.presetEquationRunner.mdVSQAfterFrame,\r\n        this.warpUVs,\r\n        this.warpColor\r\n      );\r\n    } else {\r\n      this.prevWarpShader.renderQuadTexture(\r\n        false,\r\n        this.prevTexture,\r\n        this.blurTexture1,\r\n        this.blurTexture2,\r\n        this.blurTexture3,\r\n        blurMins,\r\n        blurMaxs,\r\n        this.prevMDVSFrame,\r\n        this.prevPresetEquationRunner.mdVSQAfterFrame,\r\n        this.warpUVs,\r\n        this.warpColor\r\n      );\r\n\r\n      this.warpShader.renderQuadTexture(\r\n        true,\r\n        this.prevTexture,\r\n        this.blurTexture1,\r\n        this.blurTexture2,\r\n        this.blurTexture3,\r\n        blurMins,\r\n        blurMaxs,\r\n        mdVSFrameMixed,\r\n        this.presetEquationRunner.mdVSQAfterFrame,\r\n        this.warpUVs,\r\n        this.warpColor\r\n      );\r\n    }\r\n\r\n    if (this.numBlurPasses > 0) {\r\n      this.blurShader1.renderBlurTexture(\r\n        this.targetTexture,\r\n        mdVSFrame,\r\n        blurMins,\r\n        blurMaxs\r\n      );\r\n\r\n      if (this.numBlurPasses > 1) {\r\n        this.blurShader2.renderBlurTexture(\r\n          this.blurTexture1,\r\n          mdVSFrame,\r\n          blurMins,\r\n          blurMaxs\r\n        );\r\n\r\n        if (this.numBlurPasses > 2) {\r\n          this.blurShader3.renderBlurTexture(\r\n            this.blurTexture2,\r\n            mdVSFrame,\r\n            blurMins,\r\n            blurMaxs\r\n          );\r\n        }\r\n      }\r\n\r\n      // rebind target texture framebuffer\r\n      this.bindFrambufferAndSetViewport(\r\n        this.targetFrameBuffer,\r\n        this.texsizeX,\r\n        this.texsizeY\r\n      );\r\n    }\r\n\r\n    this.motionVectors.drawMotionVectors(mdVSFrameMixed, this.warpUVs);\r\n\r\n    if (this.preset.shapes && this.preset.shapes.length > 0) {\r\n      this.customShapes.forEach((shape, i) => {\r\n        shape.drawCustomShape(\r\n          this.blending ? this.blendProgress : 1,\r\n          globalVars,\r\n          this.presetEquationRunner,\r\n          this.preset.shapes[i],\r\n          this.prevTexture\r\n        );\r\n      });\r\n    }\r\n\r\n    if (this.preset.waves && this.preset.waves.length > 0) {\r\n      this.customWaveforms.forEach((waveform, i) => {\r\n        waveform.drawCustomWaveform(\r\n          this.blending ? this.blendProgress : 1,\r\n          this.audio.timeArrayL,\r\n          this.audio.timeArrayR,\r\n          this.audio.freqArrayL,\r\n          this.audio.freqArrayR,\r\n          globalVars,\r\n          this.presetEquationRunner,\r\n          this.preset.waves[i]\r\n        );\r\n      });\r\n    }\r\n\r\n    if (this.blending) {\r\n      if (this.prevPreset.shapes && this.prevPreset.shapes.length > 0) {\r\n        this.prevCustomShapes.forEach((shape, i) => {\r\n          shape.drawCustomShape(\r\n            1.0 - this.blendProgress,\r\n            prevGlobalVars,\r\n            this.prevPresetEquationRunner,\r\n            this.prevPreset.shapes[i],\r\n            this.prevTexture\r\n          );\r\n        });\r\n      }\r\n\r\n      if (this.prevPreset.waves && this.prevPreset.waves.length > 0) {\r\n        this.prevCustomWaveforms.forEach((waveform, i) => {\r\n          waveform.drawCustomWaveform(\r\n            1.0 - this.blendProgress,\r\n            this.audio.timeArrayL,\r\n            this.audio.timeArrayR,\r\n            this.audio.freqArrayL,\r\n            this.audio.freqArrayR,\r\n            prevGlobalVars,\r\n            this.prevPresetEquationRunner,\r\n            this.prevPreset.waves[i]\r\n          );\r\n        });\r\n      }\r\n    }\r\n\r\n    this.basicWaveform.drawBasicWaveform(\r\n      this.blending,\r\n      this.blendProgress,\r\n      this.audio.timeArrayL,\r\n      this.audio.timeArrayR,\r\n      mdVSFrameMixed\r\n    );\r\n\r\n    this.darkenCenter.drawDarkenCenter(mdVSFrameMixed);\r\n\r\n    const outerColor = [\r\n      mdVSFrameMixed.ob_r,\r\n      mdVSFrameMixed.ob_g,\r\n      mdVSFrameMixed.ob_b,\r\n      mdVSFrameMixed.ob_a,\r\n    ];\r\n    this.outerBorder.drawBorder(outerColor, mdVSFrameMixed.ob_size, 0);\r\n\r\n    const innerColor = [\r\n      mdVSFrameMixed.ib_r,\r\n      mdVSFrameMixed.ib_g,\r\n      mdVSFrameMixed.ib_b,\r\n      mdVSFrameMixed.ib_a,\r\n    ];\r\n    this.innerBorder.drawBorder(\r\n      innerColor,\r\n      mdVSFrameMixed.ib_size,\r\n      mdVSFrameMixed.ob_size\r\n    );\r\n\r\n    if (this.showTitleOpts.buffer && !this.showTitleOpts.rendered && this.showTitleOpts.progress >= 1) {\r\n      this.titleText.renderTitle(this.showTitleOpts.progress, true, globalVars);\r\n      this.showTitleOpts.rendered = true;\r\n    }\r\n\r\n    // Store variables in case we need to rerender\r\n    this.globalVars = globalVars;\r\n    this.mdVSFrame = mdVSFrame;\r\n    this.mdVSFrameMixed = mdVSFrameMixed;\r\n\r\n    this.renderToScreen();\r\n  }\r\n\r\n  renderToScreen() {\r\n    if (this.outputFXAA) {\r\n      this.bindFrambufferAndSetViewport(\r\n        this.compFrameBuffer,\r\n        this.texsizeX,\r\n        this.texsizeY\r\n      );\r\n    } else {\r\n      this.bindFrambufferAndSetViewport(null, this.width, this.height);\r\n    }\r\n\r\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n    this.gl.enable(this.gl.BLEND);\r\n    this.gl.blendEquation(this.gl.FUNC_ADD);\r\n    this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    const {blurMins, blurMaxs} = Renderer.getBlurValues(this.mdVSFrameMixed);\r\n\r\n    if (!this.blending) {\r\n      this.compShader.renderQuadTexture(\r\n        false,\r\n        this.targetTexture,\r\n        this.blurTexture1,\r\n        this.blurTexture2,\r\n        this.blurTexture3,\r\n        blurMins,\r\n        blurMaxs,\r\n        this.mdVSFrame,\r\n        this.presetEquationRunner.mdVSQAfterFrame,\r\n        this.warpColor\r\n      );\r\n    } else {\r\n      this.prevCompShader.renderQuadTexture(\r\n        false,\r\n        this.targetTexture,\r\n        this.blurTexture1,\r\n        this.blurTexture2,\r\n        this.blurTexture3,\r\n        blurMins,\r\n        blurMaxs,\r\n        this.prevMDVSFrame,\r\n        this.prevPresetEquationRunner.mdVSQAfterFrame,\r\n        this.warpColor\r\n      );\r\n\r\n      this.compShader.renderQuadTexture(\r\n        true,\r\n        this.targetTexture,\r\n        this.blurTexture1,\r\n        this.blurTexture2,\r\n        this.blurTexture3,\r\n        blurMins,\r\n        blurMaxs,\r\n        this.mdVSFrameMixed,\r\n        this.presetEquationRunner.mdVSQAfterFrame,\r\n        this.warpColor\r\n      );\r\n    }\r\n\r\n    if (this.showTitleOpts.buffer) {\r\n      this.titleText.renderTitle(this.showTitleOpts.progress, false, this.globalVars);\r\n    }\r\n\r\n    if (this.outputFXAA) {\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, this.compTexture);\r\n      this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n      this.bindFrambufferAndSetViewport(null, this.width, this.height);\r\n      this.outputShader.renderQuadTexture(this.compTexture);\r\n    }\r\n  }\r\n\r\n  launchSongTitleAnim(showTitleOpts) {\r\n    this.showTitleOpts = showTitleOpts;\r\n    if (this.showTitleOpts.buffer) {\r\n      this.titleText.generateTitleTexture(this.showTitleOpts.buffer);\r\n    }\r\n  }\r\n\r\n  toDataURL() {\r\n    const data = new Uint8Array(this.texsizeX * this.texsizeY * 4);\r\n\r\n    const compFrameBuffer = this.gl.createFramebuffer();\r\n    const compTexture = this.gl.createTexture();\r\n\r\n    this.bindFrameBufferTexture(compFrameBuffer, compTexture);\r\n\r\n    const {blurMins, blurMaxs} = Renderer.getBlurValues(this.mdVSFrameMixed);\r\n    this.compShader.renderQuadTexture(\r\n      false,\r\n      this.targetTexture,\r\n      this.blurTexture1,\r\n      this.blurTexture2,\r\n      this.blurTexture3,\r\n      blurMins,\r\n      blurMaxs,\r\n      this.mdVSFrame,\r\n      this.presetEquationRunner.mdVSQAfterFrame,\r\n      this.warpColor\r\n    );\r\n\r\n    this.gl.readPixels(\r\n      0,\r\n      0,\r\n      this.texsizeX,\r\n      this.texsizeY,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      data\r\n    );\r\n\r\n    // flip data\r\n    Array.from({length: this.texsizeY}, (val, i) =>\r\n      data.slice(i * this.texsizeX * 4, (i + 1) * this.texsizeX * 4)\r\n    ).forEach((val, i) =>\r\n      data.set(val, (this.texsizeY - i - 1) * this.texsizeX * 4)\r\n    );\r\n\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = this.texsizeX;\r\n    canvas.height = this.texsizeY;\r\n\r\n    const context = canvas.getContext(\"2d\");\r\n    const imageData = context.createImageData(this.texsizeX, this.texsizeY);\r\n    imageData.data.set(data);\r\n    context.putImageData(imageData, 0, 0);\r\n\r\n    this.gl.deleteTexture(compTexture);\r\n    this.gl.deleteFramebuffer(compFrameBuffer);\r\n\r\n    return canvas.toDataURL();\r\n  }\r\n\r\n  warpBufferToDataURL() {\r\n    const data = new Uint8Array(this.texsizeX * this.texsizeY * 4);\r\n\r\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.targetFrameBuffer);\r\n    this.gl.readPixels(\r\n      0,\r\n      0,\r\n      this.texsizeX,\r\n      this.texsizeY,\r\n      this.gl.RGBA,\r\n      this.gl.UNSIGNED_BYTE,\r\n      data\r\n    );\r\n\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = this.texsizeX;\r\n    canvas.height = this.texsizeY;\r\n\r\n    const context = canvas.getContext(\"2d\");\r\n    const imageData = context.createImageData(this.texsizeX, this.texsizeY);\r\n    imageData.data.set(data);\r\n    context.putImageData(imageData, 0, 0);\r\n\r\n    return canvas.toDataURL();\r\n  }\r\n}\r\n","import { loadModule } from \"eel-wasm\";\r\nimport ascLoader from \"@assemblyscript/loader\";\r\nimport AudioProcessor from \"./audio/audioProcessor\";\r\nimport Renderer from \"./rendering/renderer\";\r\nimport Utils from \"./utils\";\r\nimport loadPresetFunctionsBuffer from \"./assemblyscript/presetFunctions.ts\";\r\n\r\nexport default class Visualizer {\r\n  constructor(audioContext, canvas, opts) {\r\n    this.opts = opts;\r\n    this.audio = new AudioProcessor(audioContext);\r\n\r\n    const vizWidth = opts.width || 1200;\r\n    const vizHeight = opts.height || 900;\r\n    if (window.OffscreenCanvas) {\r\n      this.internalCanvas = new OffscreenCanvas(vizWidth, vizHeight);\r\n    } else {\r\n      this.internalCanvas = document.createElement(\"canvas\");\r\n      this.internalCanvas.width = vizWidth;\r\n      this.internalCanvas.height = vizHeight;\r\n    }\r\n\r\n    this.gl = this.internalCanvas.getContext(\"webgl2\", {\r\n      alpha: false,\r\n      antialias: false,\r\n      depth: false,\r\n      stencil: false,\r\n      premultipliedAlpha: false,\r\n    });\r\n\r\n    this.outputGl = canvas.getContext('2d');\r\n\r\n    this.baseValsDefaults = {\r\n      decay: 0.98,\r\n      gammaadj: 2,\r\n      echo_zoom: 2,\r\n      echo_alpha: 0,\r\n      echo_orient: 0,\r\n      red_blue: 0,\r\n      brighten: 0,\r\n      darken: 0,\r\n      wrap: 1,\r\n      darken_center: 0,\r\n      solarize: 0,\r\n      invert: 0,\r\n      bmotionvectorson: 1,\r\n      fshader: 0,\r\n      b1n: 0,\r\n      b2n: 0,\r\n      b3n: 0,\r\n      b1x: 1,\r\n      b2x: 1,\r\n      b3x: 1,\r\n      b1ed: 0.25,\r\n      wave_mode: 0,\r\n      additivewave: 0,\r\n      wave_dots: 0,\r\n      wave_thick: 0,\r\n      wave_a: 0.8,\r\n      wave_scale: 1,\r\n      wave_smoothing: 0.75,\r\n      wave_mystery: 0,\r\n      modwavealphabyvolume: 0,\r\n      modwavealphastart: 0.75,\r\n      modwavealphaend: 0.95,\r\n      wave_r: 1,\r\n      wave_g: 1,\r\n      wave_b: 1,\r\n      wave_x: 0.5,\r\n      wave_y: 0.5,\r\n      wave_brighten: 1,\r\n      mv_x: 12,\r\n      mv_y: 9,\r\n      mv_dx: 0,\r\n      mv_dy: 0,\r\n      mv_l: 0.9,\r\n      mv_r: 1,\r\n      mv_g: 1,\r\n      mv_b: 1,\r\n      mv_a: 1,\r\n      warpanimspeed: 1,\r\n      warpscale: 1,\r\n      zoomexp: 1,\r\n      zoom: 1,\r\n      rot: 0,\r\n      cx: 0.5,\r\n      cy: 0.5,\r\n      dx: 0,\r\n      dy: 0,\r\n      warp: 1,\r\n      sx: 1,\r\n      sy: 1,\r\n      ob_size: 0.01,\r\n      ob_r: 0,\r\n      ob_g: 0,\r\n      ob_b: 0,\r\n      ob_a: 0,\r\n      ib_size: 0.01,\r\n      ib_r: 0.25,\r\n      ib_g: 0.25,\r\n      ib_b: 0.25,\r\n      ib_a: 0,\r\n    };\r\n\r\n    this.shapeBaseValsDefaults = {\r\n      enabled: 0,\r\n      sides: 4,\r\n      additive: 0,\r\n      thickoutline: 0,\r\n      textured: 0,\r\n      num_inst: 1,\r\n      tex_zoom: 1,\r\n      tex_ang: 0,\r\n      x: 0.5,\r\n      y: 0.5,\r\n      rad: 0.1,\r\n      ang: 0,\r\n      r: 1,\r\n      g: 0,\r\n      b: 0,\r\n      a: 1,\r\n      r2: 0,\r\n      g2: 1,\r\n      b2: 0,\r\n      a2: 0,\r\n      border_r: 1,\r\n      border_g: 1,\r\n      border_b: 1,\r\n      border_a: 0.1,\r\n    };\r\n\r\n    this.waveBaseValsDefaults = {\r\n      enabled: 0,\r\n      samples: 512,\r\n      sep: 0,\r\n      scaling: 1,\r\n      smoothing: 0.5,\r\n      r: 1,\r\n      g: 1,\r\n      b: 1,\r\n      a: 1,\r\n      spectrum: 0,\r\n      usedots: 0,\r\n      thick: 0,\r\n      additive: 0,\r\n    };\r\n\r\n    this.qs = Utils.range(1, 33).map((x) => `q${x}`);\r\n    this.ts = Utils.range(1, 9).map((x) => `t${x}`);\r\n\r\n    this.globalPerFrameVars = [\r\n      \"old_wave_mode\",\r\n      // globals\r\n      \"frame\",\r\n      \"time\",\r\n      \"fps\",\r\n      \"bass\",\r\n      \"bass_att\",\r\n      \"mid\",\r\n      \"mid_att\",\r\n      \"treb\",\r\n      \"treb_att\",\r\n      \"meshx\",\r\n      \"meshy\",\r\n      \"aspectx\",\r\n      \"aspecty\",\r\n      \"pixelsx\",\r\n      \"pixelsy\",\r\n      \"rand_start\",\r\n      \"rand_preset\",\r\n    ];\r\n\r\n    this.globalPerPixelVars = [\r\n      // globals\r\n      \"frame\",\r\n      \"time\",\r\n      \"fps\",\r\n      \"bass\",\r\n      \"bass_att\",\r\n      \"mid\",\r\n      \"mid_att\",\r\n      \"treb\",\r\n      \"treb_att\",\r\n      \"meshx\",\r\n      \"meshy\",\r\n      \"aspectx\",\r\n      \"aspecty\",\r\n      \"pixelsx\",\r\n      \"pixelsy\",\r\n      \"rand_start\",\r\n      \"rand_preset\",\r\n      // for pixel eqs\r\n      \"x\",\r\n      \"y\",\r\n      \"rad\",\r\n      \"ang\",\r\n    ];\r\n\r\n    this.globalShapeVars = [\r\n      // globals\r\n      \"frame\",\r\n      \"time\",\r\n      \"fps\",\r\n      \"bass\",\r\n      \"bass_att\",\r\n      \"mid\",\r\n      \"mid_att\",\r\n      \"treb\",\r\n      \"treb_att\",\r\n      \"meshx\",\r\n      \"meshy\",\r\n      \"aspectx\",\r\n      \"aspecty\",\r\n      \"pixelsx\",\r\n      \"pixelsy\",\r\n      \"rand_start\",\r\n      \"rand_preset\",\r\n      // for shape eqs\r\n      \"instance\",\r\n    ];\r\n\r\n    this.shapeBaseVars = [\r\n      \"x\",\r\n      \"y\",\r\n      \"rad\",\r\n      \"ang\",\r\n      \"r\",\r\n      \"g\",\r\n      \"b\",\r\n      \"a\",\r\n      \"r2\",\r\n      \"g2\",\r\n      \"b2\",\r\n      \"a2\",\r\n      \"border_r\",\r\n      \"border_g\",\r\n      \"border_b\",\r\n      \"border_a\",\r\n      \"thickoutline\",\r\n      \"textured\",\r\n      \"tex_zoom\",\r\n      \"tex_ang\",\r\n      \"additive\",\r\n    ];\r\n\r\n    this.globalWaveVars = [\r\n      // globals\r\n      \"frame\",\r\n      \"time\",\r\n      \"fps\",\r\n      \"bass\",\r\n      \"bass_att\",\r\n      \"mid\",\r\n      \"mid_att\",\r\n      \"treb\",\r\n      \"treb_att\",\r\n      \"meshx\",\r\n      \"meshy\",\r\n      \"aspectx\",\r\n      \"aspecty\",\r\n      \"pixelsx\",\r\n      \"pixelsy\",\r\n      \"rand_start\",\r\n      \"rand_preset\",\r\n      // for wave eqs\r\n      \"x\",\r\n      \"y\",\r\n      \"sample\",\r\n      \"value1\",\r\n      \"value2\",\r\n    ];\r\n\r\n    this.renderer = new Renderer(this.gl, this.audio, opts);\r\n  }\r\n\r\n  loseGLContext() {\r\n    this.gl.getExtension(\"WEBGL_lose_context\").loseContext();\r\n    this.outputGl = null;\r\n  }\r\n\r\n  connectAudio(audioNode) {\r\n    this.audioNode = audioNode;\r\n    this.audio.connectAudio(audioNode);\r\n  }\r\n\r\n  disconnectAudio(audioNode) {\r\n    this.audio.disconnectAudio(audioNode);\r\n  }\r\n\r\n  // Override defaults, but only include variables in default map\r\n  static overrideDefaultVars(baseValsDefaults, baseVals) {\r\n    const combinedVals = {};\r\n\r\n    Object.keys(baseValsDefaults).forEach((key) => {\r\n      if (Object.prototype.hasOwnProperty.call(baseVals, key)) {\r\n        combinedVals[key] = baseVals[key];\r\n      } else {\r\n        combinedVals[key] = baseValsDefaults[key];\r\n      }\r\n    });\r\n\r\n    return combinedVals;\r\n  }\r\n\r\n  createQVars() {\r\n    const wasmVars = {};\r\n\r\n    this.qs.forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        0\r\n      );\r\n    });\r\n\r\n    return wasmVars;\r\n  }\r\n\r\n  createTVars() {\r\n    const wasmVars = {};\r\n\r\n    this.ts.forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        0\r\n      );\r\n    });\r\n\r\n    return wasmVars;\r\n  }\r\n\r\n  createPerFramePool(baseVals) {\r\n    const wasmVars = {};\r\n\r\n    Object.keys(this.baseValsDefaults).forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        baseVals[key]\r\n      );\r\n    });\r\n\r\n    this.globalPerFrameVars.forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        0\r\n      );\r\n    });\r\n\r\n    return wasmVars;\r\n  }\r\n\r\n  createPerPixelPool(baseVals) {\r\n    const wasmVars = {};\r\n\r\n    Object.keys(this.baseValsDefaults).forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        baseVals[key]\r\n      );\r\n    });\r\n\r\n    this.globalPerPixelVars.forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        0\r\n      );\r\n    });\r\n\r\n    return wasmVars;\r\n  }\r\n\r\n  createCustomShapePerFramePool(baseVals) {\r\n    const wasmVars = {};\r\n\r\n    Object.keys(this.shapeBaseValsDefaults).forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        baseVals[key]\r\n      );\r\n    });\r\n\r\n    this.globalShapeVars.forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        0\r\n      );\r\n    });\r\n\r\n    return wasmVars;\r\n  }\r\n\r\n  createCustomWavePerFramePool(baseVals) {\r\n    const wasmVars = {};\r\n\r\n    Object.keys(this.waveBaseValsDefaults).forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        baseVals[key]\r\n      );\r\n    });\r\n\r\n    this.globalWaveVars.forEach((key) => {\r\n      wasmVars[key] = new WebAssembly.Global(\r\n        { value: \"f64\", mutable: true },\r\n        0\r\n      );\r\n    });\r\n\r\n    return wasmVars;\r\n  }\r\n\r\n  static makeShapeResetPool(pool, variables, idx) {\r\n    return variables.reduce((acc, variable) => {\r\n      return { ...acc, [`${variable}_${idx}`]: pool[variable] };\r\n    }, {});\r\n  }\r\n\r\n  static base64ToArrayBuffer(base64) {\r\n    var binaryString = window.atob(base64);\r\n    var len = binaryString.length;\r\n    var bytes = new Uint8Array(len);\r\n    for (var i = 0; i < len; i++) {\r\n      bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n  }\r\n\r\n  async loadPreset(presetMap, blendTime = 0) {\r\n    const preset = JSON.parse(JSON.stringify(presetMap));\r\n    preset.baseVals = Visualizer.overrideDefaultVars(\r\n      this.baseValsDefaults,\r\n      preset.baseVals\r\n    );\r\n    for (let i = 0; i < preset.shapes.length; i++) {\r\n      preset.shapes[i].baseVals = Visualizer.overrideDefaultVars(\r\n        this.shapeBaseValsDefaults,\r\n        preset.shapes[i].baseVals\r\n      );\r\n    }\r\n\r\n    for (let i = 0; i < preset.waves.length; i++) {\r\n      preset.waves[i].baseVals = Visualizer.overrideDefaultVars(\r\n        this.waveBaseValsDefaults,\r\n        preset.waves[i].baseVals\r\n      );\r\n    }\r\n\r\n    const forceJS = preset.useJS && !this.opts.onlyUseWASM;\r\n\r\n    if (\r\n      Object.prototype.hasOwnProperty.call(preset, \"init_eqs_eel\") &&\r\n      !forceJS\r\n    ) {\r\n      preset.useWASM = true;\r\n      await this.loadWASMPreset(preset, blendTime);\r\n    } else if (!this.opts.onlyUseWASM) {\r\n      if (Object.prototype.hasOwnProperty.call(preset, \"init_eqs_str\")) {\r\n        this.loadJSPreset(preset, blendTime);\r\n      } else {\r\n        console.warn(\r\n          \"Tried to load a JS preset that doesn't have converted strings\"\r\n        );\r\n      }\r\n    } else {\r\n      console.warn(\r\n        \"Tried to load a preset that doesn't support WASM with onlyUseWASM on\"\r\n      );\r\n    }\r\n  }\r\n\r\n  async loadWASMPreset(preset, blendTime) {\r\n    const qWasmVars = this.createQVars();\r\n    const tWasmVars = this.createTVars();\r\n\r\n    const wasmVarPools = {\r\n      perFrame: { ...qWasmVars, ...this.createPerFramePool(preset.baseVals) },\r\n      perVertex: {\r\n        ...qWasmVars,\r\n        ...this.createPerPixelPool(preset.baseVals),\r\n      },\r\n    };\r\n\r\n    const wasmFunctions = {\r\n      presetInit: { pool: \"perFrame\", code: preset.init_eqs_eel },\r\n      perFrame: { pool: \"perFrame\", code: preset.frame_eqs_eel },\r\n    };\r\n\r\n    if (preset.pixel_eqs_eel !== \"\") {\r\n      wasmFunctions.perPixel = {\r\n        pool: \"perVertex\",\r\n        code: preset.pixel_eqs_eel,\r\n      };\r\n    }\r\n\r\n    for (let i = 0; i < preset.shapes.length; i++) {\r\n      wasmVarPools[`shapePerFrame${i}`] = {\r\n        ...qWasmVars,\r\n        ...tWasmVars,\r\n        ...this.createCustomShapePerFramePool(preset.shapes[i].baseVals),\r\n      };\r\n\r\n      if (preset.shapes[i].baseVals.enabled !== 0) {\r\n        wasmFunctions[`shapes_${i}_init_eqs`] = {\r\n          pool: `shapePerFrame${i}`,\r\n          code: preset.shapes[i].init_eqs_eel,\r\n        };\r\n        wasmFunctions[`shapes_${i}_frame_eqs`] = {\r\n          pool: `shapePerFrame${i}`,\r\n          code: preset.shapes[i].frame_eqs_eel,\r\n        };\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < preset.waves.length; i++) {\r\n      if (preset.waves[i].baseVals.enabled !== 0) {\r\n        wasmVarPools[`wavePerFrame${i}`] = {\r\n          ...qWasmVars,\r\n          ...tWasmVars,\r\n          ...this.createCustomWavePerFramePool(preset.waves[i].baseVals),\r\n        };\r\n        wasmFunctions[`waves_${i}_init_eqs`] = {\r\n          pool: `wavePerFrame${i}`,\r\n          code: preset.waves[i].init_eqs_eel,\r\n        };\r\n        wasmFunctions[`waves_${i}_frame_eqs`] = {\r\n          pool: `wavePerFrame${i}`,\r\n          code: preset.waves[i].frame_eqs_eel,\r\n        };\r\n\r\n        if (\r\n          preset.waves[i].point_eqs_eel &&\r\n          preset.waves[i].point_eqs_eel !== \"\"\r\n        ) {\r\n          wasmFunctions[`waves_${i}_point_eqs`] = {\r\n            pool: `wavePerFrame${i}`,\r\n            code: preset.waves[i].point_eqs_eel,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    const mod = await loadModule({\r\n      pools: wasmVarPools,\r\n      functions: wasmFunctions,\r\n      eelVersion: preset.version || 2,\r\n    });\r\n\r\n    // eel-wasm returns null if the function was empty\r\n    const handleEmptyFunction = (f) => {\r\n      return f ? f : () => {};\r\n    };\r\n\r\n    const presetFunctionsMod = await ascLoader.instantiate(\r\n      Visualizer.base64ToArrayBuffer(loadPresetFunctionsBuffer()),\r\n      {\r\n        pixelEqs: {\r\n          perPixelEqs: handleEmptyFunction(mod.exports.perPixel),\r\n        },\r\n        // For resetting pixel eq vars\r\n        pixelVarPool: {\r\n          warp: wasmVarPools.perVertex.warp,\r\n          zoom: wasmVarPools.perVertex.zoom,\r\n          zoomexp: wasmVarPools.perVertex.zoomexp,\r\n          cx: wasmVarPools.perVertex.cx,\r\n          cy: wasmVarPools.perVertex.cy,\r\n          sx: wasmVarPools.perVertex.sx,\r\n          sy: wasmVarPools.perVertex.sy,\r\n          dx: wasmVarPools.perVertex.dx,\r\n          dy: wasmVarPools.perVertex.dy,\r\n          rot: wasmVarPools.perVertex.rot,\r\n          x: wasmVarPools.perVertex.x,\r\n          y: wasmVarPools.perVertex.y,\r\n          ang: wasmVarPools.perVertex.ang,\r\n          rad: wasmVarPools.perVertex.rad,\r\n        },\r\n        // For resetting qs/ts\r\n        qVarPool: qWasmVars,\r\n        tVarPool: tWasmVars,\r\n        // For resetting shape vars\r\n        shapePool0: Visualizer.makeShapeResetPool(\r\n          wasmVarPools[\"shapePerFrame0\"],\r\n          this.shapeBaseVars,\r\n          0\r\n        ),\r\n        shapePool1: Visualizer.makeShapeResetPool(\r\n          wasmVarPools[\"shapePerFrame1\"],\r\n          this.shapeBaseVars,\r\n          1\r\n        ),\r\n        shapePool2: Visualizer.makeShapeResetPool(\r\n          wasmVarPools[\"shapePerFrame2\"],\r\n          this.shapeBaseVars,\r\n          2\r\n        ),\r\n        shapePool3: Visualizer.makeShapeResetPool(\r\n          wasmVarPools[\"shapePerFrame3\"],\r\n          this.shapeBaseVars,\r\n          3\r\n        ),\r\n        console: {\r\n          logi: (value) => {\r\n            // eslint-disable-next-line no-console\r\n            console.log(\"logi: \" + value);\r\n          },\r\n          logf: (value) => {\r\n            // eslint-disable-next-line no-console\r\n            console.log(\"logf: \" + value);\r\n          },\r\n        },\r\n        env: {\r\n          abort: () => {\r\n            // No idea why we need this.\r\n          },\r\n        },\r\n      }\r\n    );\r\n\r\n    preset.globalPools = wasmVarPools;\r\n    preset.init_eqs = handleEmptyFunction(mod.exports.presetInit);\r\n    preset.frame_eqs = handleEmptyFunction(mod.exports.perFrame);\r\n    preset.save_qs = presetFunctionsMod.exports.saveQs;\r\n    preset.restore_qs = presetFunctionsMod.exports.restoreQs;\r\n    preset.save_ts = presetFunctionsMod.exports.saveTs;\r\n    preset.restore_ts = presetFunctionsMod.exports.restoreTs;\r\n    if (mod.exports.perPixel) {\r\n      preset.pixel_eqs = mod.exports.perPixel;\r\n    }\r\n    preset.pixel_eqs_initialize_array = (meshWidth, meshHeight) => {\r\n      const arrPtr = presetFunctionsMod.exports.createFloat32Array(\r\n        (meshWidth + 1) * (meshHeight + 1) * 2\r\n      );\r\n      preset.pixel_eqs_array = arrPtr;\r\n    };\r\n    preset.pixel_eqs_get_array = () => {\r\n      return presetFunctionsMod.exports.__getFloat32ArrayView(\r\n        preset.pixel_eqs_array\r\n      );\r\n    };\r\n    preset.pixel_eqs_wasm = (...args) =>\r\n      presetFunctionsMod.exports.runPixelEquations(\r\n        preset.pixel_eqs_array,\r\n        ...args\r\n      );\r\n\r\n    for (let i = 0; i < preset.shapes.length; i++) {\r\n      if (preset.shapes[i].baseVals.enabled !== 0) {\r\n        preset.shapes[i].init_eqs = handleEmptyFunction(\r\n          mod.exports[`shapes_${i}_init_eqs`]\r\n        );\r\n        // Not wrapped because we check if null in customShapes\r\n        preset.shapes[i].frame_eqs = mod.exports[`shapes_${i}_frame_eqs`];\r\n\r\n        preset.shapes[i].frame_eqs_save = () =>\r\n          presetFunctionsMod.exports[`shape${i}_save`]();\r\n        preset.shapes[i].frame_eqs_restore = () =>\r\n          presetFunctionsMod.exports[`shape${i}_restore`]();\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < preset.waves.length; i++) {\r\n      if (preset.waves[i].baseVals.enabled !== 0) {\r\n        const wave = {\r\n          init_eqs: handleEmptyFunction(mod.exports[`waves_${i}_init_eqs`]),\r\n          frame_eqs: handleEmptyFunction(mod.exports[`waves_${i}_frame_eqs`]),\r\n        };\r\n\r\n        if (\r\n          preset.waves[i].point_eqs_eel &&\r\n          preset.waves[i].point_eqs_eel !== \"\"\r\n        ) {\r\n          // Not wrapped because we check if null in customWaves\r\n          wave.point_eqs = mod.exports[`waves_${i}_point_eqs`];\r\n        } else {\r\n          wave.point_eqs = \"\";\r\n        }\r\n\r\n        preset.waves[i] = Object.assign({}, preset.waves[i], wave);\r\n      }\r\n    }\r\n\r\n    this.renderer.loadPreset(preset, blendTime);\r\n  }\r\n\r\n  loadJSPreset(preset, blendTime) {\r\n    // If init_eqs is already a function, it means we've already prepared the preset to run\r\n    if (typeof preset.init_eqs !== \"function\") {\r\n      /* eslint-disable no-param-reassign, no-new-func */\r\n      preset.init_eqs = new Function(\"a\", `${preset.init_eqs_str} return a;`);\r\n      preset.frame_eqs = new Function(\"a\", `${preset.frame_eqs_str} return a;`);\r\n      if (preset.pixel_eqs_str && preset.pixel_eqs_str !== \"\") {\r\n        preset.pixel_eqs = new Function(\r\n          \"a\",\r\n          `${preset.pixel_eqs_str} return a;`\r\n        );\r\n      } else {\r\n        preset.pixel_eqs = \"\";\r\n      }\r\n\r\n      for (let i = 0; i < preset.shapes.length; i++) {\r\n        if (preset.shapes[i].baseVals.enabled !== 0) {\r\n          preset.shapes[i] = Object.assign({}, preset.shapes[i], {\r\n            init_eqs: new Function(\r\n              \"a\",\r\n              `${preset.shapes[i].init_eqs_str} return a;`\r\n            ),\r\n            frame_eqs: new Function(\r\n              \"a\",\r\n              `${preset.shapes[i].frame_eqs_str} return a;`\r\n            ),\r\n          });\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < preset.waves.length; i++) {\r\n        if (preset.waves[i].baseVals.enabled !== 0) {\r\n          const wave = {\r\n            init_eqs: new Function(\r\n              \"a\",\r\n              `${preset.waves[i].init_eqs_str} return a;`\r\n            ),\r\n            frame_eqs: new Function(\r\n              \"a\",\r\n              `${preset.waves[i].frame_eqs_str} return a;`\r\n            ),\r\n          };\r\n\r\n          if (\r\n            preset.waves[i].point_eqs_str &&\r\n            preset.waves[i].point_eqs_str !== \"\"\r\n          ) {\r\n            wave.point_eqs = new Function(\r\n              \"a\",\r\n              `${preset.waves[i].point_eqs_str} return a;`\r\n            );\r\n          } else {\r\n            wave.point_eqs = \"\";\r\n          }\r\n\r\n          preset.waves[i] = Object.assign({}, preset.waves[i], wave);\r\n        }\r\n      }\r\n      /* eslint-enable no-param-reassign, no-new-func */\r\n    }\r\n    this.renderer.loadPreset(preset, blendTime);\r\n  }\r\n\r\n  loadExtraImages(imageData) {\r\n    this.renderer.loadExtraImages(imageData);\r\n  }\r\n\r\n  setRendererSize(width, height, opts = {}) {\r\n    this.internalCanvas.width = width;\r\n    this.internalCanvas.height = height;\r\n    this.renderer.setRendererSize(width, height, opts);\r\n  }\r\n\r\n  setInternalMeshSize(width, height) {\r\n    this.renderer.setInternalMeshSize(width, height);\r\n  }\r\n\r\n  setOutputAA(useAA) {\r\n    this.renderer.setOutputAA(useAA);\r\n  }\r\n\r\n  setCanvas(canvas) {\r\n    this.outputGl = canvas.getContext('2d');\r\n  }\r\n\r\n  render(opts) {\r\n    const renderOutput = this.renderer.render(opts);\r\n\r\n    if (this.outputGl) {\r\n      this.outputGl.drawImage(this.internalCanvas, 0, 0);\r\n    }\r\n\r\n    return renderOutput;\r\n  }\r\n\r\n  launchSongTitleAnim(showTitleOpts) {\r\n    this.renderer.launchSongTitleAnim(showTitleOpts);\r\n  }\r\n\r\n  toDataURL() {\r\n    return this.renderer.toDataURL();\r\n  }\r\n\r\n  warpBufferToDataURL() {\r\n    return this.renderer.warpBufferToDataURL();\r\n  }\r\n}\r\n","import \"ecma-proposal-math-extensions\";\r\nimport \"./presetBase\";\r\nimport Visualizer from \"./visualizer\";\r\n\r\nexport default class Butterchurn {\r\n  static createVisualizer(context, canvas, opts) {\r\n    return new Visualizer(context, canvas, opts);\r\n  }\r\n}\r\n"],"sourceRoot":""}